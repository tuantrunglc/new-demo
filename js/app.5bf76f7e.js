(function(){"use strict";var e={4516:function(e,t,s){var a={};s.r(a),s.d(a,{tQ:function(){return te},xZ:function(){return ee},ZE:function(){return z}});var r=s(5130),n=s(657),l=s(6768);const i={id:"app",class:"font-sans antialiased text-gray-900"};function o(e,t,s,a,r,n){const o=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(o)])}var d={name:"App"},c=s(1241);const u=(0,c.A)(d,[["render",o]]);var m=u,g=s(1387);const p={class:"bg-dark text-white py-4 mt-5"},f={class:"container"},h={class:"row"},b={class:"col-md-4"},x={class:"list-unstyled"};function v(e,t,s,a,r,n){const i=(0,l.g2)("site-header"),o=(0,l.g2)("featured-carousel"),d=(0,l.g2)("category-grid"),c=(0,l.g2)("product-grid"),u=(0,l.g2)("lucky-spin-section"),m=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(i),(0,l.Lk)("main",null,[(0,l.bF)(o),(0,l.bF)(d),(0,l.bF)(c,{title:"Featured Products",products:r.featuredProducts},null,8,["products"]),(0,l.bF)(c,{title:"Today's Deals",products:r.dailyDeals},null,8,["products"]),(0,l.bF)(u)]),(0,l.Lk)("footer",p,[(0,l.Lk)("div",f,[(0,l.Lk)("div",h,[t[5]||(t[5]=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("h5",null,"About Us"),(0,l.Lk)("p",null,"Modern e-commerce platform with the best deals and products.")],-1)),(0,l.Lk)("div",b,[t[4]||(t[4]=(0,l.Lk)("h5",null,"Quick Links",-1)),(0,l.Lk)("ul",x,[(0,l.Lk)("li",null,[(0,l.bF)(m,{to:"/",class:"text-white"},{default:(0,l.k6)(()=>t[0]||(t[0]=[(0,l.eW)("Home")])),_:1,__:[0]})]),t[1]||(t[1]=(0,l.Lk)("li",null,[(0,l.Lk)("a",{href:"#",class:"text-white"},"Products")],-1)),t[2]||(t[2]=(0,l.Lk)("li",null,[(0,l.Lk)("a",{href:"#",class:"text-white"},"Categories")],-1)),t[3]||(t[3]=(0,l.Lk)("li",null,[(0,l.Lk)("a",{href:"#",class:"text-white"},"Contact")],-1))])]),t[6]||(t[6]=(0,l.Fv)('<div class="col-md-4"><h5>Connect With Us</h5><div class="d-flex gap-3 fs-4"><a href="#" class="text-white"><i class="fab fa-facebook"></i></a><a href="#" class="text-white"><i class="fab fa-twitter"></i></a><a href="#" class="text-white"><i class="fab fa-instagram"></i></a><a href="#" class="text-white"><i class="fab fa-youtube"></i></a></div></div>',1))]),t[7]||(t[7]=(0,l.Lk)("div",{class:"text-center mt-4"},[(0,l.Lk)("p",{class:"mb-0"},"© 2023 ShopVN. All rights reserved.")],-1))])])])}const y={class:"site-header py-3"},k={class:"container"},L={class:"row align-items-center"},w={class:"col-md-4"},C={class:"d-flex justify-content-end align-items-center"};function _(e,t,s,a,r,n){const i=(0,l.g2)("nav-links");return(0,l.uX)(),(0,l.CE)("header",y,[(0,l.Lk)("div",k,[(0,l.Lk)("div",L,[t[1]||(t[1]=(0,l.Fv)('<div class="col-md-2 mb-2 mb-md-0" data-v-067a4078><a href="#" class="d-flex align-items-center text-decoration-none" data-v-067a4078><img src="https://placeholder.pics/svg/150x50/FF6A00-FFFFFF/ShopVN" alt="ShopVN" class="logo" data-v-067a4078></a></div><div class="col-md-6 mb-2 mb-md-0" data-v-067a4078><div class="input-group" data-v-067a4078><input type="text" class="form-control search-bar" placeholder="Tìm kiếm sản phẩm..." aria-label="Tìm kiếm" data-v-067a4078><button class="btn search-button" type="button" data-v-067a4078><i class="fas fa-search" data-v-067a4078></i></button></div></div>',2)),(0,l.Lk)("div",w,[(0,l.Lk)("div",C,[(0,l.bF)(i),t[0]||(t[0]=(0,l.Lk)("div",{class:"ms-3 position-relative"},[(0,l.Lk)("a",{href:"#",class:"text-dark fs-5"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart"}),(0,l.Lk)("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"}," 3 ")])],-1))])])])])])}var F=s(4232);const S={class:"nav"},I={class:"nav-item dropdown"},T={class:"dropdown-menu"},E=["href"],P={class:"nav-item"},D={class:"nav-item"};function M(e,t,s,a,r,n){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("ul",S,[(0,l.Lk)("li",I,[t[0]||(t[0]=(0,l.Lk)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Danh mục ",-1)),(0,l.Lk)("ul",T,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.categories,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("a",{class:"dropdown-item",href:e.link},(0,F.v_)(e.name),9,E)]))),128))])]),t[3]||(t[3]=(0,l.Lk)("li",{class:"nav-item"},[(0,l.Lk)("a",{class:"nav-link",href:"#"},"Khuyến mãi hôm nay")],-1)),t[4]||(t[4]=(0,l.Lk)("li",{class:"nav-item"},[(0,l.Lk)("a",{class:"nav-link",href:"#"},"Hàng mới về")],-1)),(0,l.Lk)("li",P,[(0,l.bF)(i,{class:"nav-link",to:"/admin/login"},{default:(0,l.k6)(()=>t[1]||(t[1]=[(0,l.Lk)("i",{class:"fas fa-user me-1"},null,-1),(0,l.eW)(" Tài khoản ")])),_:1,__:[1]})]),(0,l.Lk)("li",D,[(0,l.bF)(i,{class:"nav-link",to:"/admin"},{default:(0,l.k6)(()=>t[2]||(t[2]=[(0,l.Lk)("i",{class:"fas fa-cog me-1"},null,-1),(0,l.eW)(" Admin ")])),_:1,__:[2]})])])}const A=[{id:1,name:"Điện tử",image:"https://images.unsplash.com/photo-1550009158-9ebf69173e03?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:2,name:"Thời trang",image:"https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:3,name:"Nhà bếp",image:"https://images.unsplash.com/photo-1556911220-bda9f7f7597b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:4,name:"Làm đẹp & Sức khỏe",image:"https://images.unsplash.com/photo-1571781926291-c477ebfd024b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:5,name:"Thể thao & Dã ngoại",image:"https://images.unsplash.com/photo-1517836357463-d25dfeac3438?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:6,name:"Đồ chơi & Trò chơi",image:"https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:7,name:"Sách & Văn phòng phẩm",image:"https://images.unsplash.com/photo-1526243741027-444d633d7365?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"},{id:8,name:"Nội thất",image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",link:"#"}];var U={name:"NavLinks",data(){return{categories:A}}};const N=(0,c.A)(U,[["render",M],["__scopeId","data-v-04e968e5"]]);var W=N,X={name:"SiteHeader",components:{NavLinks:W}};const B=(0,c.A)(X,[["render",_],["__scopeId","data-v-067a4078"]]);var O=B;const K={id:"featuredCarousel",class:"carousel slide featured-carousel mb-4","data-bs-ride":"carousel"},V={class:"carousel-indicators"},R=["data-bs-slide-to","aria-current","aria-label"],j={class:"carousel-inner"},H={class:"carousel-caption d-flex flex-column justify-content-center h-100"},Q={class:"container"},q={class:"row"},$={class:"col-md-6 text-start"},G={class:"display-4 fw-bold"},J={class:"lead"},Z=["href"];function Y(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("div",V,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.carouselItems,(e,t)=>((0,l.uX)(),(0,l.CE)("button",{key:"indicator-"+e.id,type:"button","data-bs-target":"#featuredCarousel","data-bs-slide-to":t,class:(0,F.C4)({active:0===t}),"aria-current":0===t?"true":"false","aria-label":"Slide "+(t+1)},null,10,R))),128))]),(0,l.Lk)("div",j,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.carouselItems,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:"slide-"+e.id,class:(0,F.C4)(["carousel-item",{active:0===t}]),style:(0,F.Tr)({backgroundImage:`url(${e.image})`})},[(0,l.Lk)("div",H,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",q,[(0,l.Lk)("div",$,[(0,l.Lk)("h2",G,(0,F.v_)(e.title),1),(0,l.Lk)("p",J,(0,F.v_)(e.subtitle),1),(0,l.Lk)("a",{href:e.buttonLink,class:"btn btn-lg btn-primary"},(0,F.v_)(e.buttonText),9,Z)])])])])],6))),128))]),t[0]||(t[0]=(0,l.Fv)('<button class="carousel-control-prev" type="button" data-bs-target="#featuredCarousel" data-bs-slide="prev" data-v-43772a99><span class="carousel-control-prev-icon" aria-hidden="true" data-v-43772a99></span><span class="visually-hidden" data-v-43772a99>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#featuredCarousel" data-bs-slide="next" data-v-43772a99><span class="carousel-control-next-icon" aria-hidden="true" data-v-43772a99></span><span class="visually-hidden" data-v-43772a99>Next</span></button>',2))])}const z=[{id:1,name:"Điện thoại Samsung Galaxy S23",description:"Điện thoại Samsung Galaxy S23 mới nhất với camera 108MP",price:1899e4,discountPrice:175e5,sellerId:2,sellerName:"Trần Thị B",category:"Điện thoại",status:"approved",commission_rate:5,images:["https://via.placeholder.com/300x300.png?text=Samsung+S23"],createdAt:"2023-06-10T08:30:00Z",updatedAt:"2023-06-15T10:15:00Z",stock:25},{id:2,name:"Laptop Dell XPS 15",description:"Laptop Dell XPS 15 với màn hình 4K, chip Intel i9",price:42e6,discountPrice:null,sellerId:5,sellerName:"Hoàng E",category:"Laptop",status:"approved",commission_rate:3,images:["https://via.placeholder.com/300x300.png?text=Dell+XPS+15"],createdAt:"2023-06-12T09:45:00Z",updatedAt:"2023-06-12T09:45:00Z",stock:10},{id:3,name:"Tai nghe Apple AirPods Pro",description:"Tai nghe Apple AirPods Pro với khả năng chống ồn chủ động",price:599e4,discountPrice:55e5,sellerId:2,sellerName:"Trần Thị B",category:"Phụ kiện",status:"pending",commission_rate:8,images:["https://via.placeholder.com/300x300.png?text=AirPods+Pro"],createdAt:"2023-06-14T14:20:00Z",updatedAt:"2023-06-14T14:20:00Z",stock:30},{id:4,name:"iPad Pro 12.9 inch",description:"iPad Pro 12.9 inch với chip M2, màn hình Liquid Retina XDR",price:2899e4,discountPrice:275e5,sellerId:5,sellerName:"Hoàng E",category:"Máy tính bảng",status:"approved",commission_rate:4,images:["https://via.placeholder.com/300x300.png?text=iPad+Pro"],createdAt:"2023-06-15T11:10:00Z",updatedAt:"2023-06-16T09:30:00Z",stock:15},{id:5,name:"Đồng hồ thông minh Apple Watch Series 8",description:"Apple Watch Series 8 với tính năng đo ECG, SpO2",price:1099e4,discountPrice:null,sellerId:2,sellerName:"Trần Thị B",category:"Đồng hồ thông minh",status:"pending",commission_rate:6,images:["https://via.placeholder.com/300x300.png?text=Apple+Watch"],createdAt:"2023-06-18T15:45:00Z",updatedAt:"2023-06-18T15:45:00Z",stock:20}],ee=[{id:1,name:"Premium Wireless Headphones",price:299e4,originalPrice:459e4,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.8,reviews:245,discount:35,category:"Electronics",commission_rate:7},{id:2,name:"Smart Watch Series 5",price:689e4,originalPrice:805e4,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.6,reviews:189,discount:14,category:"Electronics",commission_rate:5},{id:3,name:"Ergonomic Office Chair",price:459e4,originalPrice:575e4,image:"https://images.unsplash.com/photo-1505843513577-22bb7d21e455?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.5,reviews:120,discount:20,category:"Furniture",commission_rate:8},{id:4,name:"Professional DSLR Camera",price:2069e4,originalPrice:2529e4,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.9,reviews:310,discount:18,category:"Electronics",commission_rate:6}],te=[{id:101,name:"Wireless Bluetooth Earbuds",price:115e4,originalPrice:207e4,image:"https://images.unsplash.com/photo-1606220588913-b3aacb4d2f46?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.5,reviews:132,discount:44,category:"Electronics",timeLeft:"8h 45m",commission_rate:10},{id:102,name:"Smart Security Camera",price:184e4,originalPrice:345e4,image:"https://images.unsplash.com/photo-1557438159-51eec7a6c9e8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",rating:4.7,reviews:98,discount:47,category:"Electronics",timeLeft:"3h 20m",commission_rate:9}];var se={name:"FeaturedCarousel",data(){return{carouselItems:a.carouselItems}}};const ae=(0,c.A)(se,[["render",Y],["__scopeId","data-v-43772a99"]]);var re=ae;const ne={class:"container mb-5"},le={class:"row row-cols-2 row-cols-md-4 g-3"},ie=["href"],oe={class:"category-item"},de=["src","alt"],ce={class:"category-name"};function ue(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",ne,[t[0]||(t[0]=(0,l.Lk)("div",{class:"d-flex justify-content-between align-items-center mb-4"},[(0,l.Lk)("h2",{class:"section-title"},"Mua sắm theo danh mục")],-1)),(0,l.Lk)("div",le,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.categories,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"col"},[(0,l.Lk)("a",{href:e.link,class:"text-decoration-none"},[(0,l.Lk)("div",oe,[(0,l.Lk)("img",{src:e.image,alt:e.name},null,8,de),(0,l.Lk)("div",ce,(0,F.v_)(e.name),1)])],8,ie)]))),128))])])}var me={name:"CategoryGrid",data(){return{categories:A}}};const ge=(0,c.A)(me,[["render",ue],["__scopeId","data-v-202b5862"]]);var pe=ge;const fe={class:"container mb-5"},he={class:"d-flex justify-content-between align-items-center mb-4"},be={class:"section-title"},xe={class:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4"};function ve(e,t,s,a,r,n){const i=(0,l.g2)("product-card");return(0,l.uX)(),(0,l.CE)("div",fe,[(0,l.Lk)("div",he,[(0,l.Lk)("h2",be,(0,F.v_)(s.title),1),t[0]||(t[0]=(0,l.Lk)("a",{href:"#",class:"btn btn-outline-primary"},"View All",-1))]),(0,l.Lk)("div",xe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.products,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"col"},[(0,l.bF)(i,{product:e},null,8,["product"])]))),128))])])}const ye={class:"card product-card h-100"},ke=["src","alt"],Le={class:"card-body d-flex flex-column"},we={class:"card-title text-truncate"},Ce={class:"d-flex align-items-center mb-2"},_e={class:"product-price me-2"},Fe={key:0,class:"product-discount text-decoration-line-through"},Se={class:"d-flex align-items-center mb-2"},Ie={class:"me-2"},Te={class:"text-muted small"},Ee={key:0,class:"badge bg-danger mb-2"},Pe={key:1,class:"badge bg-warning text-dark mb-2"},De={key:2,class:"badge bg-info text-white mb-2"};function Me(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",ye,[(0,l.Lk)("img",{src:s.product.image,class:"card-img-top",alt:s.product.name},null,8,ke),(0,l.Lk)("div",Le,[(0,l.Lk)("h5",we,(0,F.v_)(s.product.name),1),(0,l.Lk)("div",Ce,[(0,l.Lk)("div",_e,(0,F.v_)(n.formatCurrency(s.product.price)),1),s.product.originalPrice?((0,l.uX)(),(0,l.CE)("div",Fe,(0,F.v_)(n.formatCurrency(s.product.originalPrice)),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Se,[(0,l.Lk)("div",Ie,[t[0]||(t[0]=(0,l.Lk)("i",{class:"fas fa-star text-warning"},null,-1)),(0,l.eW)(" "+(0,F.v_)(s.product.rating),1)]),(0,l.Lk)("div",Te,"("+(0,F.v_)(s.product.reviews)+" reviews)",1)]),s.product.discount?((0,l.uX)(),(0,l.CE)("div",Ee,"Discount "+(0,F.v_)(s.product.discount)+"%",1)):(0,l.Q3)("",!0),s.product.timeLeft?((0,l.uX)(),(0,l.CE)("div",Pe,[t[1]||(t[1]=(0,l.Lk)("i",{class:"fas fa-clock me-1"},null,-1)),(0,l.eW)(" Time left: "+(0,F.v_)(s.product.timeLeft),1)])):(0,l.Q3)("",!0),s.product.commission_rate?((0,l.uX)(),(0,l.CE)("div",De,[t[2]||(t[2]=(0,l.Lk)("i",{class:"fas fa-percentage me-1"},null,-1)),(0,l.eW)(" Commission: "+(0,F.v_)(s.product.commission_rate)+"% ",1)])):(0,l.Q3)("",!0),t[3]||(t[3]=(0,l.Lk)("div",{class:"mt-auto"},[(0,l.Lk)("button",{class:"btn btn-primary w-100"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart me-1"}),(0,l.eW)(" Add to Cart ")])],-1))])])}var Ae={name:"ProductCard",props:{product:{type:Object,required:!0}},methods:{formatCurrency(e){const t=e/23e3;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}}};const Ue=(0,c.A)(Ae,[["render",Me],["__scopeId","data-v-d2059fa4"]]);var Ne=Ue,We={name:"ProductGrid",components:{ProductCard:Ne},props:{title:{type:String,required:!0},products:{type:Array,required:!0}}};const Xe=(0,c.A)(We,[["render",ve],["__scopeId","data-v-0bf72b0d"]]);var Be=Xe;const Oe={class:"lucky-spin-section py-5"},Ke={class:"container"},Ve={class:"row"},Re={class:"col-md-6 mb-4 mb-md-0"},je={class:"d-flex flex-column align-items-center"},He=["disabled"],Qe={class:"col-md-6"};function qe(e,t,s,a,r,n){const i=(0,l.g2)("lucky-wheel"),o=(0,l.g2)("spin-history"),d=(0,l.g2)("reward-popup");return(0,l.uX)(),(0,l.CE)("section",Oe,[(0,l.Lk)("div",Ke,[t[1]||(t[1]=(0,l.Lk)("div",{class:"text-center mb-5"},[(0,l.Lk)("h2",{class:"display-5 fw-bold"},"Try Your Luck!"),(0,l.Lk)("p",{class:"lead"},"Spin the wheel and win exciting prizes")],-1)),(0,l.Lk)("div",Ve,[(0,l.Lk)("div",Re,[(0,l.Lk)("div",je,[(0,l.bF)(i,{ref:"wheel",onSpinComplete:n.onSpinComplete},null,8,["onSpinComplete"]),(0,l.Lk)("button",{class:"spin-button mt-4",onClick:t[0]||(t[0]=(...e)=>n.spinWheel&&n.spinWheel(...e)),disabled:r.isSpinning},(0,F.v_)(r.isSpinning?"Spinning...":"Spin Now"),9,He)])]),(0,l.Lk)("div",Qe,[(0,l.bF)(o,{ref:"history"},null,512)])])]),(0,l.bF)(d,{show:r.showReward,reward:r.selectedReward,onClose:n.closeReward},null,8,["show","reward","onClose"])])}const $e={class:"spin-wheel-container"},Ge={class:"spin-wheel",ref:"wheel"},Je={ref:"wheelCanvas",width:"300",height:"300"};function Ze(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",$e,[t[0]||(t[0]=(0,l.Lk)("div",{class:"wheel-pointer"},null,-1)),(0,l.Lk)("div",Ge,[(0,l.Lk)("canvas",Je,null,512)],512)])}const Ye=[{id:1,label:"Voucher $2",type:"voucher",value:5e4,probability:15,color:"#FF5733",icon:"ticket"},{id:2,label:"Voucher $4",type:"voucher",value:1e5,probability:10,color:"#33FF57",icon:"ticket"},{id:3,label:"Voucher $8",type:"voucher",value:2e5,probability:5,color:"#3357FF",icon:"ticket"},{id:4,label:"Free Shipping",type:"freeship",value:0,probability:20,color:"#FF33A8",icon:"truck"},{id:5,label:"5% Off",type:"discount",value:5,probability:15,color:"#33FFF6",icon:"percent"},{id:6,label:"10% Off",type:"discount",value:10,probability:10,color:"#F6FF33",icon:"percent"},{id:7,label:"15% Off",type:"discount",value:15,probability:5,color:"#FF33F6",icon:"percent"},{id:8,label:"Better luck next time",type:"none",value:0,probability:20,color:"#CCCCCC",icon:"frown"}],ze=[{userId:1,spinsRemaining:3,history:[{date:"2023-07-10T10:30:00Z",itemId:4,itemLabel:"Free Shipping"},{date:"2023-07-12T15:45:00Z",itemId:8,itemLabel:"Better luck next time"}]},{userId:4,spinsRemaining:1,history:[{date:"2023-07-11T09:15:00Z",itemId:5,itemLabel:"5% Off"}]}];var et={name:"LuckyWheel",data(){return{rewards:Ye,isSpinning:!1,selectedReward:null,canvas:null,ctx:null,currentRotation:0}},mounted(){this.canvas=this.$refs.wheelCanvas,this.ctx=this.canvas.getContext("2d"),this.drawWheel()},methods:{drawWheel(){const e=this.ctx,t=this.canvas,s=t.width/2,a=t.height/2,r=t.width/2-10,n=this.rewards,l=n.length,i=2*Math.PI/l;e.clearRect(0,0,t.width,t.height);for(let o=0;o<l;o++){const t=o*i;e.beginPath(),e.fillStyle=n[o].color,e.moveTo(s,a),e.arc(s,a,r,t,t+i),e.lineTo(s,a),e.fill(),e.lineWidth=2,e.strokeStyle="#ffffff",e.stroke(),e.save(),e.translate(s,a),e.rotate(t+i/2),e.textAlign="right",e.fillStyle="#000",e.font="bold 14px Arial",e.fillText(n[o].label,r-20,5),e.restore()}e.beginPath(),e.fillStyle="#fff",e.arc(s,a,20,0,2*Math.PI),e.fill(),e.lineWidth=2,e.strokeStyle="#000",e.stroke()},spinWheel(){if(this.isSpinning)return;this.isSpinning=!0;const e=Math.random();let t=0,s=0;for(let l=0;l<this.rewards.length;l++)if(t+=this.rewards[l].probability,e<t){s=l;break}this.selectedReward=this.rewards[s];const a=this.rewards.length,r=360/a;this.currentRotation+=1800+(a-s-1)*r;const n=this.$refs.wheel;n.style.transform=`rotate(${this.currentRotation}deg)`,setTimeout(()=>{this.isSpinning=!1,this.$emit("spin-complete",this.selectedReward)},5e3)}}};const tt=(0,c.A)(et,[["render",Ze],["__scopeId","data-v-73f51113"]]);var st=tt;const at={class:"spin-history"},rt={key:0,class:"text-center py-3"},nt={key:1},lt={class:"fw-bold"},it={class:"small"};function ot(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",at,[t[1]||(t[1]=(0,l.Lk)("h4",{class:"mb-3"},"Spin History",-1)),0===r.history.length?((0,l.uX)(),(0,l.CE)("div",rt," No spin history yet. Try your luck! ")):((0,l.uX)(),(0,l.CE)("div",nt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.history,(e,s)=>((0,l.uX)(),(0,l.CE)("div",{key:s,class:"spin-history-item d-flex justify-content-between align-items-center"},[(0,l.Lk)("div",null,[(0,l.Lk)("div",lt,(0,F.v_)(e.itemLabel),1),(0,l.Lk)("div",it,(0,F.v_)(n.formatDate(e.date)),1)]),t[0]||(t[0]=(0,l.Lk)("div",null,[(0,l.Lk)("span",{class:"badge bg-success"},"Available")],-1))]))),128))]))])}var dt={name:"SpinHistory",data(){return{history:ze.length>0?ze[0].history:[]}},methods:{formatDate(e){const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},addToHistory(e){if(!e)return;console.log("Adding to history:",e);const t={date:(new Date).toISOString(),itemId:e.id,itemLabel:e.label};this.history.unshift(t),this.history.length>5&&(this.history=this.history.slice(0,5))}}};const ct=(0,c.A)(dt,[["render",ot],["__scopeId","data-v-2e9d2ce6"]]);var ut=ct;const mt={key:0,class:"reward-popup"},gt={class:"reward-icon"},pt={key:0,class:"reward-title"},ft={key:1,class:"reward-title"},ht={key:2,class:"reward-description"},bt={key:3,class:"reward-description"};function xt(e,t,s,a,n,i){return(0,l.uX)(),(0,l.Wv)(r.eB,{name:"fade"},{default:(0,l.k6)(()=>[s.show&&s.reward?((0,l.uX)(),(0,l.CE)("div",mt,[(0,l.Lk)("div",{class:(0,F.C4)(["reward-content",{"no-prize":"No Prize"===s.reward.name}])},[(0,l.Lk)("div",gt,[(0,l.Lk)("i",{class:(0,F.C4)(s.reward.icon)},null,2)]),"No Prize"===s.reward.name?((0,l.uX)(),(0,l.CE)("h2",pt,"Sorry!")):((0,l.uX)(),(0,l.CE)("h2",ft,"Congratulations!")),"No Prize"===s.reward.name?((0,l.uX)(),(0,l.CE)("p",ht," You didn't win this time ")):((0,l.uX)(),(0,l.CE)("p",bt," You won: "+(0,F.v_)(s.reward.name),1)),(0,l.Lk)("p",null,(0,F.v_)(s.reward.description),1),"No Prize"===s.reward.name?((0,l.uX)(),(0,l.CE)("button",{key:4,class:"close-reward",onClick:t[0]||(t[0]=(...e)=>i.closePopup&&i.closePopup(...e))}," Try Again ")):((0,l.uX)(),(0,l.CE)("button",{key:5,class:"close-reward",onClick:t[1]||(t[1]=(...e)=>i.closePopup&&i.closePopup(...e))}," Claim Reward "))],2)])):(0,l.Q3)("",!0)]),_:1})}var vt={name:"RewardPopup",props:{show:{type:Boolean,default:!1},reward:{type:Object,default:()=>({})}},methods:{closePopup(){this.$emit("close")}}};const yt=(0,c.A)(vt,[["render",xt],["__scopeId","data-v-1e85f82f"]]);var kt=yt,Lt={name:"LuckySpinSection",components:{LuckyWheel:st,SpinHistory:ut,RewardPopup:kt},data(){return{isSpinning:!1,showReward:!1,selectedReward:null}},methods:{spinWheel(){this.isSpinning||(this.isSpinning=!0,this.$refs.wheel.spinWheel())},onSpinComplete(e){console.log("Spin complete!",e),this.selectedReward=e,this.showReward=!0,this.isSpinning=!1},closeReward(){this.showReward=!1,this.selectedReward&&this.$refs.history&&this.$refs.history.addToHistory(this.selectedReward)}}};const wt=(0,c.A)(Lt,[["render",qe],["__scopeId","data-v-6ef999ac"]]);var Ct=wt,_t={name:"HomeView",components:{SiteHeader:O,FeaturedCarousel:re,CategoryGrid:pe,ProductGrid:Be,LuckySpinSection:Ct},data(){return{featuredProducts:ee,dailyDeals:te}}};const Ft=(0,c.A)(_t,[["render",v]]);var St=Ft;const It={class:"min-h-screen bg-gray-100 flex items-center justify-center px-4 py-12"},Tt={class:"max-w-md w-full bg-white rounded-lg shadow-lg overflow-hidden"},Et={class:"p-6"},Pt={key:0,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},Dt={class:"mb-4"},Mt={class:"mb-6"},At={class:"flex items-center justify-between"},Ut=["disabled"],Nt={key:0,class:"inline-block animate-spin h-4 w-4 border-t-2 border-white rounded-full mr-2"},Wt={class:"mt-6 text-center"};function Xt(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",It,[(0,l.Lk)("div",Tt,[t[8]||(t[8]=(0,l.Lk)("div",{class:"bg-indigo-600 py-4"},[(0,l.Lk)("h2",{class:"text-center text-white text-2xl font-bold"},"Admin Login")],-1)),(0,l.Lk)("div",Et,[a.error?((0,l.uX)(),(0,l.CE)("div",Pt,(0,F.v_)(a.error),1)):(0,l.Q3)("",!0),(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)((...e)=>a.handleLogin&&a.handleLogin(...e),["prevent"]))},[(0,l.Lk)("div",Dt,[t[3]||(t[3]=(0,l.Lk)("label",{for:"username",class:"block text-gray-700 text-sm font-bold mb-2"},"Tên đăng nhập",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Nhập tên đăng nhập"},null,512),[[r.Jo,a.username]])]),(0,l.Lk)("div",Mt,[t[4]||(t[4]=(0,l.Lk)("label",{for:"password",class:"block text-gray-700 text-sm font-bold mb-2"},"Mật khẩu",-1)),(0,l.bo)((0,l.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Nhập mật khẩu"},null,512),[[r.Jo,a.password]])]),(0,l.Lk)("div",At,[(0,l.Lk)("button",{type:"submit",class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:a.loading},[a.loading?((0,l.uX)(),(0,l.CE)("span",Nt)):(0,l.Q3)("",!0),t[5]||(t[5]=(0,l.eW)(" Đăng nhập "))],8,Ut)])],32),(0,l.Lk)("div",Wt,[(0,l.bF)(o,{to:"/",class:"text-indigo-600 hover:text-indigo-800 text-sm"},{default:(0,l.k6)(()=>t[6]||(t[6]=[(0,l.Lk)("i",{class:"fas fa-arrow-left mr-1"},null,-1),(0,l.eW)(" Quay lại trang chủ ")])),_:1,__:[6]})]),t[7]||(t[7]=(0,l.Lk)("div",{class:"mt-4 text-center text-gray-500 text-xs"},[(0,l.Lk)("p",null,"Tài khoản demo: admin / admin123"),(0,l.Lk)("p",null,"Tài khoản sub-admin: subadmin / subadmin123")],-1))])])])}s(4114);var Bt=s(144),Ot=(s(8111),s(2489),s(116),s(4373));const Kt=[{id:1,username:"nguyenvan",fullName:"Nguyễn Văn A",email:"nguyenvana@example.com",phone:"0901234567",address:"123 Đường Lê Lợi, Quận 1, TP.HCM",registeredDate:"2023-01-15",status:"active",role:"user",orders:5,managed_by:null},{id:2,username:"tranthib",fullName:"Trần Thị B",email:"tranthib@example.com",phone:"0912345678",address:"456 Đường Nguyễn Huệ, Quận 1, TP.HCM",registeredDate:"2023-02-20",status:"active",role:"seller",orders:3,managed_by:3},{id:3,username:"subadmin",fullName:"Lê Quang C",email:"lequangc@example.com",phone:"0923456789",address:"789 Đường Trần Hưng Đạo, Quận 5, TP.HCM",registeredDate:"2023-03-10",status:"active",role:"sub_admin",orders:0,managed_by:6},{id:4,username:"phamthid",fullName:"Phạm Thị D",email:"phamthid@example.com",phone:"0934567890",address:"101 Đường Võ Văn Tần, Quận 3, TP.HCM",registeredDate:"2023-04-05",status:"active",role:"user",orders:8,managed_by:null},{id:5,username:"hoange",fullName:"Hoàng E",email:"hoange@example.com",phone:"0945678901",address:"202 Đường Điện Biên Phủ, Quận Bình Thạnh, TP.HCM",registeredDate:"2023-05-12",status:"active",role:"seller",orders:2,managed_by:3},{id:6,username:"admin",fullName:"Admin User",email:"admin@example.com",phone:"0909123456",address:"123 Admin Street",registeredDate:"2022-01-01",status:"active",role:"admin",orders:0,managed_by:null}],Vt=[{id:6,username:"admin",password:"admin123",fullName:"Admin User",email:"admin@example.com",role:"admin"},{id:3,username:"subadmin",password:"subadmin123",fullName:"Lê Quang C",email:"lequangc@example.com",role:"sub_admin"}],Rt=(e,t)=>{const s=Vt.find(s=>s.username===e&&s.password===t);return s?{token:"admin-token-"+Date.now(),user:{id:s.id,username:s.username,fullName:s.fullName,email:s.email,role:s.role}}:null},jt=[{id:"ORD-001",userId:1,userName:"Nguyễn Văn A",sellerId:2,sellerName:"Trần Thị B",items:[{productId:1,productName:"Tai Nghe Không Dây Cao Cấp",price:299e4,quantity:1,subtotal:299e4},{productId:5,productName:"Kính Mát Thời Trang",price:138e4,quantity:1,subtotal:138e4}],total:44e5,status:"completed",paymentStatus:"paid",paymentMethod:"credit_card",shippingAddress:"123 Đường Lê Lợi, Quận 1, TP.HCM",createdAt:"2023-07-05T09:30:00Z",updatedAt:"2023-07-07T14:20:00Z"},{id:"ORD-002",userId:4,userName:"Phạm Thị D",sellerId:5,sellerName:"Hoàng E",items:[{productId:2,productName:"Đồng Hồ Thông Minh Series 5",price:689e4,quantity:1,subtotal:689e4}],total:689e4,status:"processing",paymentStatus:"paid",paymentMethod:"bank_transfer",shippingAddress:"101 Đường Võ Văn Tần, Quận 3, TP.HCM",createdAt:"2023-07-08T11:45:00Z",updatedAt:"2023-07-08T11:45:00Z"},{id:"ORD-003",userId:1,userName:"Nguyễn Văn A",sellerId:2,sellerName:"Trần Thị B",items:[{productId:3,productName:"Ghế Văn Phòng Công Thái Học",price:459e4,quantity:1,subtotal:459e4}],total:459e4,status:"shipped",paymentStatus:"paid",paymentMethod:"momo",shippingAddress:"123 Đường Lê Lợi, Quận 1, TP.HCM",createdAt:"2023-07-10T15:20:00Z",updatedAt:"2023-07-11T09:10:00Z"},{id:"ORD-004",userId:4,userName:"Phạm Thị D",sellerId:5,sellerName:"Hoàng E",items:[{productId:4,productName:"Máy Ảnh DSLR Chuyên Nghiệp",price:2069e4,quantity:1,subtotal:2069e4}],total:2069e4,status:"completed",paymentStatus:"paid",paymentMethod:"credit_card",shippingAddress:"101 Đường Võ Văn Tần, Quận 3, TP.HCM",createdAt:"2023-07-12T10:30:00Z",updatedAt:"2023-07-14T16:45:00Z"},{id:"ORD-005",userId:1,userName:"Nguyễn Văn A",sellerId:2,sellerName:"Trần Thị B",items:[{productId:6,productName:"Loa Bluetooth Di Động",price:184e4,quantity:1,subtotal:184e4}],total:184e4,status:"pending",paymentStatus:"pending",paymentMethod:"cod",shippingAddress:"123 Đường Lê Lợi, Quận 1, TP.HCM",createdAt:"2023-07-15T14:15:00Z",updatedAt:"2023-07-15T14:15:00Z"}],Ht=[{value:"pending",label:"Chờ xử lý",color:"warning"},{value:"processing",label:"Đang xử lý",color:"info"},{value:"shipped",label:"Đã giao hàng",color:"primary"},{value:"completed",label:"Hoàn thành",color:"success"},{value:"cancelled",label:"Đã hủy",color:"danger"}],Qt=[{value:"pending",label:"Chờ thanh toán",color:"warning"},{value:"paid",label:"Đã thanh toán",color:"success"},{value:"refunded",label:"Đã hoàn tiền",color:"info"},{value:"failed",label:"Thanh toán thất bại",color:"danger"}],qt=[{id:"comm-ORD-001",orderId:"ORD-001",sellerId:2,sellerName:"Trần Thị B",amount:875e3,status:"paid",createdAt:"2023-07-07T14:20:00Z",paidAt:"2023-07-08T10:00:00Z"},{id:"comm-ORD-002",orderId:"ORD-002",sellerId:5,sellerName:"Hoàng E",amount:126e4,status:"pending",createdAt:"2023-07-08T11:45:00Z",paidAt:null},{id:"comm-ORD-003",orderId:"ORD-003",sellerId:2,sellerName:"Trần Thị B",amount:44e4,status:"pending",createdAt:"2023-07-11T09:10:00Z",paidAt:null},{id:"comm-ORD-004",orderId:"ORD-004",sellerId:5,sellerName:"Hoàng E",amount:11e5,status:"paid",createdAt:"2023-07-14T16:45:00Z",paidAt:"2023-07-15T09:30:00Z"}],$t=[{sellerId:2,sellerName:"Trần Thị B",balance:1315e3,pendingBalance:44e4,currency:"VND",lastUpdated:"2023-07-15T09:30:00Z"},{sellerId:5,sellerName:"Hoàng E",balance:11e5,pendingBalance:126e4,currency:"VND",lastUpdated:"2023-07-15T09:30:00Z"}],Gt={totalUsers:5,totalSellers:2,totalOrders:5,todayRevenue:1099e4,topSellers:[{id:2,name:"Trần Thị B",sales:3399e4,orders:3},{id:5,name:"Hoàng E",sales:695e5,orders:2}],ordersByDay:[{date:"2023-07-09",count:0,revenue:0},{date:"2023-07-10",count:1,revenue:55e5},{date:"2023-07-11",count:0,revenue:0},{date:"2023-07-12",count:1,revenue:275e5},{date:"2023-07-13",count:0,revenue:0},{date:"2023-07-14",count:0,revenue:0},{date:"2023-07-15",count:1,revenue:1099e4}]},Jt=Ot.A.create({baseURL:"/",timeout:1e4});Jt.interceptors.request.use(e=>{const t=localStorage.getItem("adminToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Zt=e=>new Promise(t=>setTimeout(t,e)),Yt={login:async(e,t)=>(await Zt(500),Rt(e,t)),getUsers:async()=>(await Zt(300),{data:Kt}),getUserById:async e=>{await Zt(200);const t=Kt.find(t=>t.id===e);if(!t)throw new Error("User not found");return{data:t}},updateUser:async e=>(await Zt(400),{data:e,message:"User updated successfully"}),deleteUser:async()=>(await Zt(300),{message:"User deleted successfully"}),changeUserPassword:async e=>(await Zt(500),{success:!0,message:"Password changed successfully",data:{userId:e,passwordChanged:!0}}),getProducts:async()=>(await Zt(300),{data:z}),getProductById:async e=>{await Zt(200);const t=z.find(t=>t.id===e);if(!t)throw new Error("Product not found");return{data:t}},updateProduct:async e=>(await Zt(400),{data:e,message:"Product updated successfully"}),approveProduct:async()=>(await Zt(300),{message:"Product approved successfully"}),deleteProduct:async()=>(await Zt(300),{message:"Product deleted successfully"}),createProduct:async e=>(await Zt(500),{data:e,message:"Product created successfully"}),getOrders:async()=>(await Zt(300),{data:jt}),getOrderById:async e=>{await Zt(200);const t=jt.find(t=>t.id===e);if(!t)throw new Error("Order not found");return{data:t}},updateOrderStatus:async(e,t)=>(await Zt(400),{message:`Order status updated to ${t}`}),createOrder:async e=>{await Zt(500);const t={id:`ORD-${Date.now().toString().substring(7)}`,...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return{data:t,message:"Order created successfully"}},getSpinItems:async()=>(await Zt(300),{data:Ye}),updateSpinItem:async e=>(await Zt(400),{data:e,message:"Spin item updated successfully"}),getUserSpins:async e=>{await Zt(200);const t=ze.find(t=>t.userId===e);return{data:t||{userId:e,spinsRemaining:0,history:[]}}},addUserSpins:async(e,t)=>(await Zt(300),{message:`Added ${t} spins to user ${e}`}),getCommissions:async()=>(await Zt(300),{data:qt}),getWallets:async()=>(await Zt(300),{data:$t}),updateWalletBalance:async(e,t,s,a)=>{await Zt(400);const r=$t.find(t=>t.sellerId===e);if(!r)throw new Error("Wallet not found");if("add"===s)r.balance+=t;else if("subtract"===s){if(r.balance<t)throw new Error("Insufficient balance");r.balance-=t}r.lastUpdated=(new Date).toISOString();const n={id:`trans-${Date.now()}`,sellerId:e,amount:t,type:s,description:a,createdAt:(new Date).toISOString()};return{data:{wallet:r,transaction:n},message:`Wallet balance ${"add"===s?"increased":"decreased"} successfully`}},getDashboardData:async()=>(await Zt(500),{data:Gt})};var zt=Yt,es=s(4874),ts=s.n(es);const ss=(0,n.nY)("user",{state:()=>({isAuthenticated:!!localStorage.getItem("adminToken"),currentUser:JSON.parse(localStorage.getItem("adminUser")||"null"),users:[],loading:!1,error:null}),getters:{isAdmin(){return"admin"===this.currentUser?.role},isSubAdmin(){return"sub_admin"===this.currentUser?.role},hasAdminAccess(){return this.isAdmin||this.isSubAdmin},getUsersByRole:e=>t=>t?e.users.filter(e=>e.role===t):e.users},actions:{async login(e,t){this.loading=!0,this.error=null;try{const s=await zt.login(e,t);return s?(this.isAuthenticated=!0,this.currentUser=s.user,localStorage.setItem("adminToken",s.token),localStorage.setItem("adminUser",JSON.stringify(s.user)),!0):(this.error="Tên đăng nhập hoặc mật khẩu không đúng",!1)}catch(s){return this.error=s.message||"Đã xảy ra lỗi khi đăng nhập",!1}finally{this.loading=!1}},logout(){this.isAuthenticated=!1,this.currentUser=null,localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser")},async fetchUsers(){this.loading=!0;try{const e=await zt.getUsers();this.users=e.data}catch(e){this.error=e.message||"Failed to fetch users",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async getUserById(e){try{const t=await zt.getUserById(e);return t.data}catch(t){return this.error=t.message||"Failed to fetch user",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}},async updateUser(e){this.loading=!0;try{const t=await zt.updateUser(e),s=this.users.findIndex(t=>t.id===e.id);return-1!==s&&(this.users[s]={...this.users[s],...e}),ts().fire({title:"Success!",text:"User updated successfully",icon:"success",confirmButtonText:"OK"}),t.data}catch(t){return this.error=t.message||"Failed to update user",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await zt.deleteUser(e),this.users=this.users.filter(t=>t.id!==e),ts().fire({title:"Success!",text:"User deleted successfully",icon:"success",confirmButtonText:"OK"}),!0}catch(t){return this.error=t.message||"Failed to delete user",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}},async changeUserPassword(e,t){this.loading=!0;try{return await zt.changeUserPassword(e,t),ts().fire({title:"Thành công!",text:"Mật khẩu đã được cập nhật thành công",icon:"success",confirmButtonText:"OK"}),!0}catch(s){return this.error=s.message||"Không thể cập nhật mật khẩu",ts().fire({title:"Lỗi!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}}}});var as={name:"AdminLogin",setup(){const e=(0,g.rd)(),t=ss(),s=(0,Bt.KR)(""),a=(0,Bt.KR)(""),r=(0,l.EW)(()=>t.loading),n=(0,l.EW)(()=>t.error),i=async()=>{const r=await t.login(s.value,a.value);r&&e.push("/admin")};return{username:s,password:a,handleLogin:i,loading:r,error:n}}};const rs=(0,c.A)(as,[["render",Xt]]);var ns=rs;const ls={class:"admin-dashboard"},is={class:"bg-indigo-700 text-white shadow-lg"},os={class:"container mx-auto px-4"},ds={class:"flex justify-between items-center py-3"},cs={class:"hidden md:flex items-center space-x-4"},us={class:"flex items-center space-x-1"},ms={class:"text-white"},gs={class:"text-xs px-2 py-1 bg-indigo-800 rounded-full"},ps={class:"flex min-h-screen bg-gray-100"},fs={class:"w-64 bg-white shadow-md hidden md:block"},hs={class:"p-4"},bs={class:"p-4 border-b flex justify-between items-center"},xs={class:"p-4"},vs={class:"mt-4 pt-4 border-t"},ys={class:"flex items-center mb-2"},ks={class:"flex-1 p-6"};function Ls(e,t,s,a,n,i){const o=(0,l.g2)("router-link"),d=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",ls,[(0,l.Lk)("nav",is,[(0,l.Lk)("div",os,[(0,l.Lk)("div",ds,[(0,l.bF)(o,{class:"text-xl font-bold flex items-center",to:"/admin"},{default:(0,l.k6)(()=>t[6]||(t[6]=[(0,l.Lk)("i",{class:"fas fa-store mr-2"},null,-1),(0,l.eW)(" ShopVN Admin ")])),_:1,__:[6]}),(0,l.Lk)("button",{class:"md:hidden focus:outline-none",type:"button",onClick:t[0]||(t[0]=(...e)=>a.toggleMobileMenu&&a.toggleMobileMenu(...e))},t[7]||(t[7]=[(0,l.Lk)("i",{class:"fas fa-bars text-xl"},null,-1)])),(0,l.Lk)("div",cs,[(0,l.Lk)("div",us,[(0,l.Lk)("span",ms,[t[8]||(t[8]=(0,l.Lk)("i",{class:"fas fa-user-circle mr-1"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.currentUser?.fullName),1)]),(0,l.Lk)("span",gs,(0,F.v_)(a.currentUser?.role),1)]),(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"px-3 py-1 bg-indigo-800 hover:bg-indigo-900 rounded text-sm"},t[9]||(t[9]=[(0,l.Lk)("i",{class:"fas fa-sign-out-alt mr-1"},null,-1),(0,l.eW)(" Đăng xuất ")]))])])])]),(0,l.Lk)("div",ps,[(0,l.Lk)("div",fs,[(0,l.Lk)("div",hs,[(0,l.bF)(o,{to:"/admin/dashboard",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"dashboard"===e.$route.name,"hover:bg-gray-100":"dashboard"!==e.$route.name}])},{default:(0,l.k6)(()=>t[10]||(t[10]=[(0,l.Lk)("i",{class:"fas fa-tachometer-alt w-6"},null,-1),(0,l.Lk)("span",null,"Dashboard",-1)])),_:1,__:[10]},8,["class"]),(0,l.bF)(o,{to:"/admin/users",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"userManagement"===e.$route.name,"hover:bg-gray-100":"userManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[11]||(t[11]=[(0,l.Lk)("i",{class:"fas fa-users w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý người dùng",-1)])),_:1,__:[11]},8,["class"]),(0,l.bF)(o,{to:"/admin/products",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"productManagement"===e.$route.name,"hover:bg-gray-100":"productManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[12]||(t[12]=[(0,l.Lk)("i",{class:"fas fa-box w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý sản phẩm",-1)])),_:1,__:[12]},8,["class"]),(0,l.bF)(o,{to:"/admin/orders",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"orderManagement"===e.$route.name,"hover:bg-gray-100":"orderManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[13]||(t[13]=[(0,l.Lk)("i",{class:"fas fa-shopping-cart w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý đơn hàng",-1)])),_:1,__:[13]},8,["class"]),a.isAdmin?((0,l.uX)(),(0,l.Wv)(o,{key:0,to:"/admin/spins",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"spinManagement"===e.$route.name,"hover:bg-gray-100":"spinManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[14]||(t[14]=[(0,l.Lk)("i",{class:"fas fa-dharmachakra w-6"},null,-1),(0,l.Lk)("span",null,"Vòng quay may mắn",-1)])),_:1,__:[14]},8,["class"])):(0,l.Q3)("",!0),(0,l.bF)(o,{to:"/admin/commissions",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"commissionManagement"===e.$route.name,"hover:bg-gray-100":"commissionManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[15]||(t[15]=[(0,l.Lk)("i",{class:"fas fa-money-bill-wave w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý hoa hồng",-1)])),_:1,__:[15]},8,["class"]),a.isAdmin?((0,l.uX)(),(0,l.Wv)(o,{key:1,to:"/admin/wallets",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"walletManagement"===e.$route.name,"hover:bg-gray-100":"walletManagement"!==e.$route.name}])},{default:(0,l.k6)(()=>t[16]||(t[16]=[(0,l.Lk)("i",{class:"fas fa-wallet w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý ví người dùng",-1)])),_:1,__:[16]},8,["class"])):(0,l.Q3)("",!0)])]),a.mobileMenuOpen?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"fixed inset-0 z-50 bg-gray-800 bg-opacity-50",onClick:t[5]||(t[5]=(...e)=>a.toggleMobileMenu&&a.toggleMobileMenu(...e))},[(0,l.Lk)("div",{class:"w-64 h-full bg-white shadow-lg",onClick:t[4]||(t[4]=(0,r.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",bs,[t[18]||(t[18]=(0,l.Lk)("span",{class:"font-bold"},"Menu",-1)),(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.toggleMobileMenu&&a.toggleMobileMenu(...e)),class:"text-gray-500 hover:text-gray-700"},t[17]||(t[17]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,l.Lk)("div",xs,[(0,l.bF)(o,{to:"/admin/dashboard",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"dashboard"===e.$route.name,"hover:bg-gray-100":"dashboard"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[19]||(t[19]=[(0,l.Lk)("i",{class:"fas fa-tachometer-alt w-6"},null,-1),(0,l.Lk)("span",null,"Dashboard",-1)])),_:1,__:[19]},8,["class","onClick"]),(0,l.bF)(o,{to:"/admin/users",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"userManagement"===e.$route.name,"hover:bg-gray-100":"userManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[20]||(t[20]=[(0,l.Lk)("i",{class:"fas fa-users w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý người dùng",-1)])),_:1,__:[20]},8,["class","onClick"]),(0,l.bF)(o,{to:"/admin/products",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"productManagement"===e.$route.name,"hover:bg-gray-100":"productManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[21]||(t[21]=[(0,l.Lk)("i",{class:"fas fa-box w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý sản phẩm",-1)])),_:1,__:[21]},8,["class","onClick"]),(0,l.bF)(o,{to:"/admin/orders",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"orderManagement"===e.$route.name,"hover:bg-gray-100":"orderManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[22]||(t[22]=[(0,l.Lk)("i",{class:"fas fa-shopping-cart w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý đơn hàng",-1)])),_:1,__:[22]},8,["class","onClick"]),a.isAdmin?((0,l.uX)(),(0,l.Wv)(o,{key:0,to:"/admin/spins",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"spinManagement"===e.$route.name,"hover:bg-gray-100":"spinManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[23]||(t[23]=[(0,l.Lk)("i",{class:"fas fa-dharmachakra w-6"},null,-1),(0,l.Lk)("span",null,"Vòng quay may mắn",-1)])),_:1,__:[23]},8,["class","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(o,{to:"/admin/commissions",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"commissionManagement"===e.$route.name,"hover:bg-gray-100":"commissionManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[24]||(t[24]=[(0,l.Lk)("i",{class:"fas fa-money-bill-wave w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý hoa hồng",-1)])),_:1,__:[24]},8,["class","onClick"]),a.isAdmin?((0,l.uX)(),(0,l.Wv)(o,{key:1,to:"/admin/wallets",class:(0,F.C4)(["flex items-center p-2 rounded-lg mb-1",{"bg-indigo-100 text-indigo-700":"walletManagement"===e.$route.name,"hover:bg-gray-100":"walletManagement"!==e.$route.name}]),onClick:a.toggleMobileMenu},{default:(0,l.k6)(()=>t[25]||(t[25]=[(0,l.Lk)("i",{class:"fas fa-wallet w-6"},null,-1),(0,l.Lk)("span",null,"Quản lý ví người dùng",-1)])),_:1,__:[25]},8,["class","onClick"])):(0,l.Q3)("",!0),(0,l.Lk)("div",vs,[(0,l.Lk)("div",ys,[t[26]||(t[26]=(0,l.Lk)("i",{class:"fas fa-user-circle mr-2"},null,-1)),(0,l.Lk)("span",null,(0,F.v_)(a.currentUser?.fullName),1)]),(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.handleLogout&&a.handleLogout(...e)),class:"w-full px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded"},t[27]||(t[27]=[(0,l.Lk)("i",{class:"fas fa-sign-out-alt mr-1"},null,-1),(0,l.eW)(" Đăng xuất ")]))])])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ks,[(0,l.bF)(d)])])])}var ws={name:"AdminDashboard",setup(){const e=(0,g.rd)(),t=ss(),s=(0,Bt.KR)(!1),a=(0,l.EW)(()=>t.currentUser),r=(0,l.EW)(()=>t.isAdmin),n=()=>{s.value=!s.value},i=()=>{t.logout(),e.push("/admin/login")};return{currentUser:a,isAdmin:r,mobileMenuOpen:s,toggleMobileMenu:n,handleLogout:i}}};const Cs=(0,c.A)(ws,[["render",Ls],["__scopeId","data-v-cab83cb2"]]);var _s=Cs;const Fs={class:"bg-white rounded-lg shadow p-6 mb-6"},Ss={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Is={class:"relative"},Ts={key:0,class:"flex justify-center my-8"},Es={key:1,class:"bg-white rounded-lg shadow p-8 text-center"},Ps={key:2,class:"bg-white rounded-lg shadow overflow-hidden"},Ds={class:"min-w-full divide-y divide-gray-200"},Ms={class:"bg-white divide-y divide-gray-200"},As={class:"px-6 py-4 whitespace-nowrap"},Us={class:"flex items-center"},Ns={class:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center"},Ws={class:"text-indigo-700 font-medium"},Xs={class:"ml-4"},Bs={class:"text-sm font-medium text-gray-900"},Os={class:"text-sm text-gray-500"},Ks={class:"px-6 py-4 whitespace-nowrap"},Vs={class:"text-sm text-gray-900"},Rs={class:"text-sm text-gray-500"},js={class:"px-6 py-4 whitespace-nowrap"},Hs={class:"px-6 py-4 whitespace-nowrap"},Qs={class:"px-6 py-4 whitespace-nowrap"},qs={key:0,class:"text-sm text-gray-900"},$s={key:1,class:"text-sm text-gray-500"},Gs={class:"px-6 py-4 whitespace-nowrap"},Js={class:"text-sm text-gray-900"},Zs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ys=["onClick"],zs=["onClick"],ea=["onClick"],ta=["onClick"],sa={key:3,class:"fixed inset-0 z-50 overflow-y-auto"},aa={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ra={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},na={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},la={class:"flex justify-between items-start"},ia={key:0,class:"mt-4"},oa={class:"flex items-center mb-4"},da={class:"h-16 w-16 bg-indigo-100 rounded-full flex items-center justify-center"},ca={class:"text-indigo-700 text-xl font-medium"},ua={class:"ml-4"},ma={class:"text-lg font-medium"},ga={class:"text-gray-500"},pa={class:"grid grid-cols-2 gap-4 mb-4"},fa={class:"font-medium"},ha={class:"font-medium"},ba={class:"font-medium"},xa={class:"font-medium"},va={class:"font-medium"},ya={class:"font-medium"},ka={class:"col-span-2"},La={class:"font-medium"},wa={key:0,class:"col-span-2"},Ca={class:"font-medium"},_a={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Fa={key:4,class:"fixed inset-0 z-50 overflow-y-auto"},Sa={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ia={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ta={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ea={class:"flex justify-between items-start"},Pa={key:0,class:"mt-4"},Da={class:"flex items-center mb-4"},Ma={class:"h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center"},Aa={class:"text-indigo-700 font-medium"},Ua={class:"ml-4"},Na={class:"text-lg font-medium"},Wa={class:"text-gray-500"},Xa={class:"space-y-4"},Ba={class:"relative"},Oa=["type"],Ka={class:"relative"},Va=["type"],Ra={key:0,class:"mt-1 text-sm text-red-600"},ja={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ha=["disabled"],Qa={key:5,class:"fixed inset-0 z-50 overflow-y-auto"},qa={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},$a={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ga={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ja={class:"text-lg font-medium text-gray-900 mb-4"},Za={class:"grid grid-cols-1 gap-4"},Ya={key:0},za=["value"],er={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},tr={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"};function sr(e,t,s,a,n,i){return(0,l.uX)(),(0,l.CE)("div",null,[t[69]||(t[69]=(0,l.Lk)("h1",{class:"text-2xl font-bold mb-6"},"Quản lý người dùng",-1)),(0,l.Lk)("div",Fs,[(0,l.Lk)("div",Ss,[(0,l.Lk)("div",null,[t[27]||(t[27]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Vai trò",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.roleFilter=e),class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[26]||(t[26]=[(0,l.Fv)('<option value="">Tất cả vai trò</option><option value="admin">Admin</option><option value="sub_admin">Sub Admin</option><option value="seller">Người bán</option><option value="user">Người dùng</option>',5)]),512),[[r.u1,a.roleFilter]])]),(0,l.Lk)("div",null,[t[29]||(t[29]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.statusFilter=e),class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[28]||(t[28]=[(0,l.Lk)("option",{value:""},"Tất cả trạng thái",-1),(0,l.Lk)("option",{value:"active"},"Hoạt động",-1),(0,l.Lk)("option",{value:"inactive"},"Không hoạt động",-1)]),512),[[r.u1,a.statusFilter]])]),(0,l.Lk)("div",null,[t[31]||(t[31]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tìm kiếm",-1)),(0,l.Lk)("div",Is,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.searchQuery=e),placeholder:"Tìm kiếm theo tên, email...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.searchQuery]]),t[30]||(t[30]=(0,l.Lk)("i",{class:"fas fa-search absolute left-3 top-3 text-gray-400"},null,-1))])])])]),a.loading?((0,l.uX)(),(0,l.CE)("div",Ts,t[32]||(t[32]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"},null,-1)]))):0===a.filteredUsers.length?((0,l.uX)(),(0,l.CE)("div",Es,t[33]||(t[33]=[(0,l.Lk)("div",{class:"text-gray-500 text-6xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-users"})],-1),(0,l.Lk)("h2",{class:"text-xl font-semibold mb-2"},"Không tìm thấy người dùng nào",-1),(0,l.Lk)("p",{class:"text-gray-500"},"Thử thay đổi bộ lọc hoặc tìm kiếm với từ khóa khác",-1)]))):((0,l.uX)(),(0,l.CE)("div",Ps,[(0,l.Lk)("table",Ds,[t[38]||(t[38]=(0,l.Lk)("thead",{class:"bg-gray-50"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Người dùng "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Liên hệ "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vai trò "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trạng thái "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quản lý bởi "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ngày đăng ký "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thao tác ")])],-1)),(0,l.Lk)("tbody",Ms,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredUsers,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",As,[(0,l.Lk)("div",Us,[(0,l.Lk)("div",Ns,[(0,l.Lk)("span",Ws,(0,F.v_)(a.getInitials(e.fullName)),1)]),(0,l.Lk)("div",Xs,[(0,l.Lk)("div",Bs,(0,F.v_)(e.fullName),1),(0,l.Lk)("div",Os,"@"+(0,F.v_)(e.username),1)])])]),(0,l.Lk)("td",Ks,[(0,l.Lk)("div",Vs,(0,F.v_)(e.email),1),(0,l.Lk)("div",Rs,(0,F.v_)(e.phone),1)]),(0,l.Lk)("td",js,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-purple-100 text-purple-800":"admin"===e.role,"bg-indigo-100 text-indigo-800":"sub_admin"===e.role,"bg-green-100 text-green-800":"seller"===e.role,"bg-blue-100 text-blue-800":"user"===e.role}])},(0,F.v_)(a.getRoleLabel(e.role)),3)]),(0,l.Lk)("td",Hs,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":"active"===e.status,"bg-red-100 text-red-800":"inactive"===e.status}])},(0,F.v_)("active"===e.status?"Hoạt động":"Không hoạt động"),3)]),(0,l.Lk)("td",Qs,[e.managed_by?((0,l.uX)(),(0,l.CE)("div",qs,(0,F.v_)(a.getManagerName(e.managed_by)),1)):((0,l.uX)(),(0,l.CE)("div",$s,"-"))]),(0,l.Lk)("td",Gs,[(0,l.Lk)("div",Js,(0,F.v_)(a.formatDate(e.registeredDate)),1)]),(0,l.Lk)("td",Zs,[(0,l.Lk)("button",{onClick:t=>a.viewUserDetails(e),class:"text-indigo-600 hover:text-indigo-900 mr-2"},t[34]||(t[34]=[(0,l.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,Ys),(0,l.Lk)("button",{onClick:t=>a.openEditModal(e),class:"text-blue-600 hover:text-blue-900 mr-2",title:"Chỉnh sửa thông tin"},t[35]||(t[35]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,zs),(0,l.Lk)("button",{onClick:t=>a.openPasswordModal(e),class:"text-green-600 hover:text-green-900 mr-2",title:"Đổi mật khẩu"},t[36]||(t[36]=[(0,l.Lk)("i",{class:"fas fa-key"},null,-1)]),8,ea),(0,l.Lk)("button",{onClick:t=>a.confirmDeleteUser(e.id),class:"text-red-600 hover:text-red-900",title:"Xóa người dùng"},t[37]||(t[37]=[(0,l.Lk)("i",{class:"fas fa-trash-alt"},null,-1)]),8,ta)])]))),128))])])])),a.showUserDetailsModal?((0,l.uX)(),(0,l.CE)("div",sa,[(0,l.Lk)("div",aa,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[3]||(t[3]=e=>a.showUserDetailsModal=!1)},t[39]||(t[39]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),(0,l.Lk)("div",ra,[(0,l.Lk)("div",na,[(0,l.Lk)("div",la,[t[41]||(t[41]=(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-900"},"Chi tiết người dùng",-1)),(0,l.Lk)("button",{onClick:t[4]||(t[4]=e=>a.showUserDetailsModal=!1),class:"text-gray-400 hover:text-gray-500"},t[40]||(t[40]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))]),a.selectedUser?((0,l.uX)(),(0,l.CE)("div",ia,[(0,l.Lk)("div",oa,[(0,l.Lk)("div",da,[(0,l.Lk)("span",ca,(0,F.v_)(a.getInitials(a.selectedUser.fullName)),1)]),(0,l.Lk)("div",ua,[(0,l.Lk)("h4",ma,(0,F.v_)(a.selectedUser.fullName),1),(0,l.Lk)("p",ga,"@"+(0,F.v_)(a.selectedUser.username),1)])]),(0,l.Lk)("div",pa,[(0,l.Lk)("div",null,[t[42]||(t[42]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Email",-1)),(0,l.Lk)("p",fa,(0,F.v_)(a.selectedUser.email),1)]),(0,l.Lk)("div",null,[t[43]||(t[43]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Số điện thoại",-1)),(0,l.Lk)("p",ha,(0,F.v_)(a.selectedUser.phone),1)]),(0,l.Lk)("div",null,[t[44]||(t[44]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Vai trò",-1)),(0,l.Lk)("p",ba,(0,F.v_)(a.getRoleLabel(a.selectedUser.role)),1)]),(0,l.Lk)("div",null,[t[45]||(t[45]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Trạng thái",-1)),(0,l.Lk)("p",xa,(0,F.v_)("active"===a.selectedUser.status?"Hoạt động":"Không hoạt động"),1)]),(0,l.Lk)("div",null,[t[46]||(t[46]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Ngày đăng ký",-1)),(0,l.Lk)("p",va,(0,F.v_)(a.formatDate(a.selectedUser.registeredDate)),1)]),(0,l.Lk)("div",null,[t[47]||(t[47]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Số đơn hàng",-1)),(0,l.Lk)("p",ya,(0,F.v_)(a.selectedUser.orders),1)]),(0,l.Lk)("div",ka,[t[48]||(t[48]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Địa chỉ",-1)),(0,l.Lk)("p",La,(0,F.v_)(a.selectedUser.address),1)]),a.selectedUser.managed_by?((0,l.uX)(),(0,l.CE)("div",wa,[t[49]||(t[49]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Quản lý bởi",-1)),(0,l.Lk)("p",Ca,(0,F.v_)(a.getManagerName(a.selectedUser.managed_by)),1)])):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",_a,[(0,l.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>a.openEditModal(a.selectedUser)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Chỉnh sửa "),(0,l.Lk)("button",{type:"button",onClick:t[6]||(t[6]=e=>a.showUserDetailsModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Đóng ")])])])])):(0,l.Q3)("",!0),a.showPasswordModal?((0,l.uX)(),(0,l.CE)("div",Fa,[(0,l.Lk)("div",Sa,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[7]||(t[7]=e=>a.showPasswordModal=!1)},t[50]||(t[50]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),(0,l.Lk)("div",Ia,[(0,l.Lk)("form",{onSubmit:t[14]||(t[14]=(0,r.D$)((...e)=>a.changePassword&&a.changePassword(...e),["prevent"]))},[(0,l.Lk)("div",Ta,[(0,l.Lk)("div",Ea,[t[52]||(t[52]=(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-900"},"Đổi mật khẩu người dùng",-1)),(0,l.Lk)("button",{onClick:t[8]||(t[8]=e=>a.showPasswordModal=!1),class:"text-gray-400 hover:text-gray-500"},t[51]||(t[51]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))]),a.passwordUser?((0,l.uX)(),(0,l.CE)("div",Pa,[(0,l.Lk)("div",Da,[(0,l.Lk)("div",Ma,[(0,l.Lk)("span",Aa,(0,F.v_)(a.getInitials(a.passwordUser.fullName)),1)]),(0,l.Lk)("div",Ua,[(0,l.Lk)("h4",Na,(0,F.v_)(a.passwordUser.fullName),1),(0,l.Lk)("p",Wa,"@"+(0,F.v_)(a.passwordUser.username),1)])]),(0,l.Lk)("div",Xa,[(0,l.Lk)("div",null,[t[54]||(t[54]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mật khẩu mới",-1)),(0,l.Lk)("div",Ba,[t[53]||(t[53]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-lock text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.passwordForm.newPassword=e),type:a.showPassword?"text":"password",required:"",minlength:"6",class:"w-full pl-10 pr-10 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Nhập mật khẩu mới"},null,8,Oa),[[r.hp,a.passwordForm.newPassword]]),(0,l.Lk)("button",{type:"button",onClick:t[10]||(t[10]=e=>a.showPassword=!a.showPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[(0,l.Lk)("i",{class:(0,F.C4)([a.showPassword?"fas fa-eye-slash":"fas fa-eye","text-gray-400"])},null,2)])])]),(0,l.Lk)("div",null,[t[56]||(t[56]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Xác nhận mật khẩu mới",-1)),(0,l.Lk)("div",Ka,[t[55]||(t[55]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-lock text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>a.passwordForm.confirmPassword=e),type:a.showConfirmPassword?"text":"password",required:"",minlength:"6",class:(0,F.C4)(["w-full pl-10 pr-10 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",{"border-red-500":a.passwordError}]),placeholder:"Xác nhận mật khẩu mới"},null,10,Va),[[r.hp,a.passwordForm.confirmPassword]]),(0,l.Lk)("button",{type:"button",onClick:t[12]||(t[12]=e=>a.showConfirmPassword=!a.showConfirmPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[(0,l.Lk)("i",{class:(0,F.C4)([a.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye","text-gray-400"])},null,2)])]),a.passwordError?((0,l.uX)(),(0,l.CE)("p",Ra,(0,F.v_)(a.passwordError),1)):(0,l.Q3)("",!0)])])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ja,[(0,l.Lk)("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",disabled:a.loading||a.passwordForm.newPassword!==a.passwordForm.confirmPassword}," Cập nhật mật khẩu ",8,Ha),(0,l.Lk)("button",{type:"button",onClick:t[13]||(t[13]=e=>a.showPasswordModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Hủy ")])],32)])])])):(0,l.Q3)("",!0),a.showEditModal?((0,l.uX)(),(0,l.CE)("div",Qa,[(0,l.Lk)("div",qa,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[15]||(t[15]=e=>a.showEditModal=!1)},t[57]||(t[57]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),(0,l.Lk)("div",$a,[(0,l.Lk)("form",{onSubmit:t[25]||(t[25]=(0,r.D$)((...e)=>a.saveUser&&a.saveUser(...e),["prevent"]))},[(0,l.Lk)("div",Ga,[(0,l.Lk)("h3",Ja,(0,F.v_)(a.editingUser?"Chỉnh sửa người dùng":"Thêm người dùng mới"),1),(0,l.Lk)("div",Za,[(0,l.Lk)("div",null,[t[58]||(t[58]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Họ tên",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>a.editForm.fullName=e),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.editForm.fullName]])]),(0,l.Lk)("div",null,[t[59]||(t[59]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tên đăng nhập",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>a.editForm.username=e),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.editForm.username]])]),(0,l.Lk)("div",null,[t[60]||(t[60]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>a.editForm.email=e),type:"email",required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.editForm.email]])]),(0,l.Lk)("div",null,[t[61]||(t[61]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số điện thoại",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>a.editForm.phone=e),type:"text",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.editForm.phone]])]),(0,l.Lk)("div",null,[t[63]||(t[63]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Vai trò",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[20]||(t[20]=e=>a.editForm.role=e),required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[62]||(t[62]=[(0,l.Lk)("option",{value:"user"},"Người dùng",-1),(0,l.Lk)("option",{value:"seller"},"Người bán",-1),(0,l.Lk)("option",{value:"sub_admin"},"Sub Admin",-1),(0,l.Lk)("option",{value:"admin"},"Admin",-1)]),512),[[r.u1,a.editForm.role]])]),(0,l.Lk)("div",null,[t[65]||(t[65]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[21]||(t[21]=e=>a.editForm.status=e),required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[64]||(t[64]=[(0,l.Lk)("option",{value:"active"},"Hoạt động",-1),(0,l.Lk)("option",{value:"inactive"},"Không hoạt động",-1)]),512),[[r.u1,a.editForm.status]])]),"seller"===a.editForm.role||"sub_admin"===a.editForm.role?((0,l.uX)(),(0,l.CE)("div",Ya,[t[67]||(t[67]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quản lý bởi",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[22]||(t[22]=e=>a.editForm.managed_by=e),class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t[66]||(t[66]=(0,l.Lk)("option",{value:null},"Không có",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.adminUsers,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.fullName),9,za))),128))],512),[[r.u1,a.editForm.managed_by]])])):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[t[68]||(t[68]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Địa chỉ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[23]||(t[23]=e=>a.editForm.address=e),rows:"2",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.editForm.address]])])])]),(0,l.Lk)("div",er,[(0,l.Lk)("button",tr,(0,F.v_)(a.editingUser?"Cập nhật":"Thêm mới"),1),(0,l.Lk)("button",{type:"button",onClick:t[24]||(t[24]=e=>a.showEditModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Hủy ")])],32)])])])):(0,l.Q3)("",!0)])}s(1701);var ar={name:"UserManagement",setup(){const e=ss(),t=(0,Bt.KR)(""),s=(0,Bt.KR)(""),a=(0,Bt.KR)(""),r=(0,Bt.KR)(!1),n=(0,Bt.KR)(!1),i=(0,Bt.KR)(!1),o=(0,Bt.KR)(null),d=(0,Bt.KR)(null),c=(0,Bt.KR)(null),u=(0,Bt.KR)(!1),m=(0,Bt.KR)(!1),g=(0,Bt.KR)(""),p=(0,Bt.KR)({newPassword:"",confirmPassword:""}),f=(0,Bt.KR)({fullName:"",username:"",email:"",phone:"",role:"user",status:"active",address:"",managed_by:null}),h=(0,l.EW)(()=>e.loading),b=(0,l.EW)(()=>e.users),x=(0,l.EW)(()=>b.value.filter(e=>"admin"===e.role||"sub_admin"===e.role)),v=(0,l.EW)(()=>{let e=b.value;if(s.value&&(e=e.filter(e=>e.role===s.value)),a.value&&(e=e.filter(e=>e.status===a.value)),t.value){const s=t.value.toLowerCase();e=e.filter(e=>e.fullName.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.username.toLowerCase().includes(s))}return e}),y=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?",k=e=>{switch(e){case"admin":return"Admin";case"sub_admin":return"Sub Admin";case"seller":return"Người bán";case"user":return"Người dùng";default:return e}},L=e=>{const t=b.value.find(t=>t.id===e);return t?t.fullName:"Unknown"},w=e=>{const t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},C=e=>{o.value=e,r.value=!0},_=e=>{e?(d.value=e,f.value={...e}):(d.value=null,f.value={fullName:"",username:"",email:"",phone:"",role:"user",status:"active",address:"",managed_by:null}),n.value=!0},F=e=>{c.value=e,p.value={newPassword:"",confirmPassword:""},g.value="",u.value=!1,m.value=!1,i.value=!0},S=async()=>{if(p.value.newPassword===p.value.confirmPassword)if(p.value.newPassword.length<6)g.value="Mật khẩu phải có ít nhất 6 ký tự";else{g.value="";try{const t=await e.changeUserPassword(c.value.id,p.value.newPassword);t&&(i.value=!1)}catch(t){console.error("Error changing password:",t)}}else g.value="Mật khẩu xác nhận không khớp"},I=async()=>{try{d.value&&(await e.updateUser(f.value),o.value&&o.value.id===d.value.id&&(o.value={...f.value})),n.value=!1}catch(t){console.error("Error saving user:",t)}},T=e=>{ts().fire({title:"Xác nhận xóa?",text:"Bạn có chắc chắn muốn xóa người dùng này?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Xóa",cancelButtonText:"Hủy"}).then(t=>{t.isConfirmed&&E(e)})},E=async t=>{try{await e.deleteUser(t),o.value&&o.value.id===t&&(r.value=!1),d.value&&d.value.id===t&&(n.value=!1)}catch(s){console.error("Error deleting user:",s)}};return(0,l.sV)(async()=>{await e.fetchUsers()}),{loading:h,users:b,adminUsers:x,searchQuery:t,roleFilter:s,statusFilter:a,filteredUsers:v,showUserDetailsModal:r,showEditModal:n,showPasswordModal:i,selectedUser:o,editingUser:d,passwordUser:c,editForm:f,passwordForm:p,passwordError:g,showPassword:u,showConfirmPassword:m,getInitials:y,getRoleLabel:k,getManagerName:L,formatDate:w,viewUserDetails:C,openEditModal:_,openPasswordModal:F,saveUser:I,changePassword:S,confirmDeleteUser:T}}};const rr=(0,c.A)(ar,[["render",sr]]);var nr=rr;const lr={class:"bg-gray-50 min-h-screen pb-10"},ir={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},or={class:"flex items-center justify-between mb-8"},dr={class:"bg-white rounded-xl shadow-md p-6 mb-6"},cr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ur=["value"],mr=["value"],gr={class:"relative"},pr={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},fr={key:1,class:"bg-white rounded-xl shadow-md p-8 text-center"},hr={class:"mt-6"},br={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},xr={class:"overflow-x-auto"},vr={class:"min-w-full divide-y divide-gray-200"},yr={class:"bg-white divide-y divide-gray-200"},kr={class:"px-6 py-4 whitespace-nowrap"},Lr={class:"text-sm font-medium text-gray-900"},wr={class:"px-6 py-4 whitespace-nowrap"},Cr={class:"text-sm font-medium text-gray-900"},_r={class:"text-sm text-gray-500"},Fr={class:"px-6 py-4 whitespace-nowrap"},Sr={class:"text-sm font-medium text-gray-900"},Ir={class:"text-sm text-gray-500"},Tr={class:"px-6 py-4 whitespace-nowrap"},Er={class:"text-sm text-gray-900"},Pr={class:"px-6 py-4 whitespace-nowrap"},Dr={class:"text-sm font-medium text-gray-900"},Mr={class:"px-6 py-4 whitespace-nowrap"},Ar={class:"px-6 py-4 whitespace-nowrap"},Ur={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Nr=["onClick"],Wr=["onClick"],Xr=["onClick"],Br={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Or={class:"flex justify-between items-center"},Kr={class:"text-sm text-gray-700"},Vr={class:"font-medium"},Rr={class:"font-medium"},jr={key:3,class:"fixed inset-0 z-50 overflow-y-auto"},Hr={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Qr={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},qr={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},$r={class:"flex justify-between items-start"},Gr={class:"text-lg font-medium text-gray-900"},Jr={key:0,class:"mt-4"},Zr={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Yr={class:"bg-gray-50 p-4 rounded-lg"},zr={class:"text-sm mb-1"},en={class:"text-sm mb-1"},tn={class:"text-sm"},sn={class:"bg-gray-50 p-4 rounded-lg"},an={class:"text-sm mb-1"},rn={class:"text-sm mb-1"},nn={class:"text-sm mb-1"},ln={class:"text-sm"},on={class:"bg-gray-50 rounded-lg overflow-hidden"},dn={class:"min-w-full divide-y divide-gray-200"},cn={class:"bg-white divide-y divide-gray-200"},un={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},mn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},gn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-center"},pn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},fn={class:"px-6 py-3 text-right text-sm font-bold text-gray-900"},hn={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},bn={key:4,class:"fixed inset-0 z-50 overflow-y-auto"},xn={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},vn={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},yn={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},kn={class:"text-lg font-medium text-gray-900 mb-4"},Ln={class:"grid grid-cols-1 gap-4"},wn=["value"],Cn=["value"],_n={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"};function Fn(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",lr,[(0,l.Lk)("div",ir,[(0,l.Lk)("div",or,[t[14]||(t[14]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart mr-3 text-indigo-600"}),(0,l.eW)(" Quản lý đơn hàng ")],-1)),(0,l.Lk)("div",null,[(0,l.bF)(o,{to:"/admin/orders/create",class:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium"},{default:(0,l.k6)(()=>t[13]||(t[13]=[(0,l.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,l.eW)(" Tạo đơn hàng mới ")])),_:1,__:[13]})])]),(0,l.Lk)("div",dr,[(0,l.Lk)("div",cr,[(0,l.Lk)("div",null,[t[16]||(t[16]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái đơn hàng",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.statusFilter=e),class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t[15]||(t[15]=(0,l.Lk)("option",{value:""},"Tất cả trạng thái",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.orderStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,ur))),128))],512),[[r.u1,a.statusFilter]])]),(0,l.Lk)("div",null,[t[18]||(t[18]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái thanh toán",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.paymentStatusFilter=e),class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t[17]||(t[17]=(0,l.Lk)("option",{value:""},"Tất cả trạng thái",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.paymentStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,mr))),128))],512),[[r.u1,a.paymentStatusFilter]])]),(0,l.Lk)("div",null,[t[20]||(t[20]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tìm kiếm",-1)),(0,l.Lk)("div",gr,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.searchQuery=e),placeholder:"Tìm kiếm theo mã đơn hàng, khách hàng...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.searchQuery]]),t[19]||(t[19]=(0,l.Lk)("i",{class:"fas fa-search absolute left-3 top-3 text-gray-400"},null,-1))])])])]),a.loading?((0,l.uX)(),(0,l.CE)("div",pr,t[21]||(t[21]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang tải dữ liệu...",-1)]))):0===a.filteredOrders.length?((0,l.uX)(),(0,l.CE)("div",fr,[t[23]||(t[23]=(0,l.Lk)("div",{class:"text-gray-500 text-6xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart"})],-1)),t[24]||(t[24]=(0,l.Lk)("h2",{class:"text-xl font-semibold mb-2"},"Không tìm thấy đơn hàng nào",-1)),t[25]||(t[25]=(0,l.Lk)("p",{class:"text-gray-500"},"Thử thay đổi bộ lọc hoặc tìm kiếm với từ khóa khác",-1)),(0,l.Lk)("div",hr,[(0,l.bF)(o,{to:"/admin/orders/create",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium inline-flex items-center"},{default:(0,l.k6)(()=>t[22]||(t[22]=[(0,l.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,l.eW)(" Tạo đơn hàng mới ")])),_:1,__:[22]})])])):((0,l.uX)(),(0,l.CE)("div",br,[(0,l.Lk)("div",xr,[(0,l.Lk)("table",vr,[t[29]||(t[29]=(0,l.Lk)("thead",{class:"bg-gray-50"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mã đơn hàng "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Khách hàng "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Người bán "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ngày đặt "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tổng tiền "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trạng thái "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thanh toán "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thao tác ")])],-1)),(0,l.Lk)("tbody",yr,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredOrders,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id,class:"hover:bg-gray-50"},[(0,l.Lk)("td",kr,[(0,l.Lk)("div",Lr,(0,F.v_)(e.id),1)]),(0,l.Lk)("td",wr,[(0,l.Lk)("div",Cr,(0,F.v_)(e.userName),1),(0,l.Lk)("div",_r,"ID: "+(0,F.v_)(e.userId),1)]),(0,l.Lk)("td",Fr,[(0,l.Lk)("div",Sr,(0,F.v_)(e.sellerName),1),(0,l.Lk)("div",Ir,"ID: "+(0,F.v_)(e.sellerId),1)]),(0,l.Lk)("td",Tr,[(0,l.Lk)("div",Er,(0,F.v_)(a.formatDate(e.createdAt)),1)]),(0,l.Lk)("td",Pr,[(0,l.Lk)("div",Dr,(0,F.v_)(a.formatCurrency(e.total)),1)]),(0,l.Lk)("td",Mr,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":"pending"===e.status,"bg-blue-100 text-blue-800":"processing"===e.status,"bg-indigo-100 text-indigo-800":"shipped"===e.status,"bg-green-100 text-green-800":"completed"===e.status,"bg-red-100 text-red-800":"cancelled"===e.status}])},(0,F.v_)(a.getOrderStatusLabel(e.status)),3)]),(0,l.Lk)("td",Ar,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":"pending"===e.paymentStatus,"bg-green-100 text-green-800":"paid"===e.paymentStatus,"bg-blue-100 text-blue-800":"refunded"===e.paymentStatus,"bg-red-100 text-red-800":"failed"===e.paymentStatus}])},(0,F.v_)(a.getPaymentStatusLabel(e.paymentStatus)),3)]),(0,l.Lk)("td",Ur,[(0,l.Lk)("button",{onClick:t=>a.viewOrderDetails(e),class:"text-indigo-600 hover:text-indigo-900 mr-2"},t[26]||(t[26]=[(0,l.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,Nr),(0,l.Lk)("button",{onClick:t=>a.openUpdateModal(e),class:"text-blue-600 hover:text-blue-900 mr-2"},t[27]||(t[27]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Wr),"pending"===e.status?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>a.confirmCancelOrder(e.id),class:"text-red-600 hover:text-red-900"},t[28]||(t[28]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Xr)):(0,l.Q3)("",!0)])]))),128))])])]),(0,l.Lk)("div",Br,[(0,l.Lk)("div",Or,[(0,l.Lk)("div",Kr,[t[30]||(t[30]=(0,l.eW)(" Hiển thị ")),(0,l.Lk)("span",Vr,(0,F.v_)(a.filteredOrders.length),1),t[31]||(t[31]=(0,l.eW)(" trên ")),(0,l.Lk)("span",Rr,(0,F.v_)(a.orders.length),1),t[32]||(t[32]=(0,l.eW)(" đơn hàng "))]),t[33]||(t[33]=(0,l.Fv)('<div data-v-e0d13000><nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination" data-v-e0d13000><a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50" data-v-e0d13000><span class="sr-only" data-v-e0d13000>Previous</span><i class="fas fa-chevron-left" data-v-e0d13000></i></a><a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600 hover:bg-indigo-100" data-v-e0d13000> 1 </a><a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50" data-v-e0d13000> 2 </a><a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50" data-v-e0d13000><span class="sr-only" data-v-e0d13000>Next</span><i class="fas fa-chevron-right" data-v-e0d13000></i></a></nav></div>',1))])])])),a.showOrderDetailsModal?((0,l.uX)(),(0,l.CE)("div",jr,[(0,l.Lk)("div",Hr,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[3]||(t[3]=e=>a.showOrderDetailsModal=!1)},t[34]||(t[34]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),(0,l.Lk)("div",Qr,[(0,l.Lk)("div",qr,[(0,l.Lk)("div",$r,[(0,l.Lk)("h3",Gr,"Chi tiết đơn hàng #"+(0,F.v_)(a.selectedOrder?.id),1),(0,l.Lk)("button",{onClick:t[4]||(t[4]=e=>a.showOrderDetailsModal=!1),class:"text-gray-400 hover:text-gray-500"},t[35]||(t[35]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))]),a.selectedOrder?((0,l.uX)(),(0,l.CE)("div",Jr,[(0,l.Lk)("div",Zr,[(0,l.Lk)("div",null,[t[39]||(t[39]=(0,l.Lk)("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Thông tin khách hàng",-1)),(0,l.Lk)("div",Yr,[(0,l.Lk)("p",zr,[t[36]||(t[36]=(0,l.Lk)("span",{class:"font-medium"},"Tên:",-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedOrder.userName),1)]),(0,l.Lk)("p",en,[t[37]||(t[37]=(0,l.Lk)("span",{class:"font-medium"},"ID:",-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedOrder.userId),1)]),(0,l.Lk)("p",tn,[t[38]||(t[38]=(0,l.Lk)("span",{class:"font-medium"},"Địa chỉ:",-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedOrder.shippingAddress),1)])])]),(0,l.Lk)("div",null,[t[44]||(t[44]=(0,l.Lk)("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Thông tin đơn hàng",-1)),(0,l.Lk)("div",sn,[(0,l.Lk)("p",an,[t[40]||(t[40]=(0,l.Lk)("span",{class:"font-medium"},"Ngày đặt:",-1)),(0,l.eW)(" "+(0,F.v_)(a.formatDate(a.selectedOrder.createdAt)),1)]),(0,l.Lk)("p",rn,[t[41]||(t[41]=(0,l.Lk)("span",{class:"font-medium"},"Cập nhật:",-1)),(0,l.eW)(" "+(0,F.v_)(a.formatDate(a.selectedOrder.updatedAt)),1)]),(0,l.Lk)("p",nn,[t[42]||(t[42]=(0,l.Lk)("span",{class:"font-medium"},"Trạng thái:",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full ml-1",{"bg-yellow-100 text-yellow-800":"pending"===a.selectedOrder.status,"bg-blue-100 text-blue-800":"processing"===a.selectedOrder.status,"bg-indigo-100 text-indigo-800":"shipped"===a.selectedOrder.status,"bg-green-100 text-green-800":"completed"===a.selectedOrder.status,"bg-red-100 text-red-800":"cancelled"===a.selectedOrder.status}])},(0,F.v_)(a.getOrderStatusLabel(a.selectedOrder.status)),3)]),(0,l.Lk)("p",ln,[t[43]||(t[43]=(0,l.Lk)("span",{class:"font-medium"},"Thanh toán:",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full ml-1",{"bg-yellow-100 text-yellow-800":"pending"===a.selectedOrder.paymentStatus,"bg-green-100 text-green-800":"paid"===a.selectedOrder.paymentStatus,"bg-blue-100 text-blue-800":"refunded"===a.selectedOrder.paymentStatus,"bg-red-100 text-red-800":"failed"===a.selectedOrder.paymentStatus}])},(0,F.v_)(a.getPaymentStatusLabel(a.selectedOrder.paymentStatus)),3)])])])]),t[47]||(t[47]=(0,l.Lk)("h4",{class:"text-sm font-medium text-gray-500 mb-2"},"Sản phẩm",-1)),(0,l.Lk)("div",on,[(0,l.Lk)("table",dn,[t[46]||(t[46]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-3 bg-gray-100 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sản phẩm "),(0,l.Lk)("th",{class:"px-6 py-3 bg-gray-100 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Đơn giá "),(0,l.Lk)("th",{class:"px-6 py-3 bg-gray-100 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số lượng "),(0,l.Lk)("th",{class:"px-6 py-3 bg-gray-100 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thành tiền ")])],-1)),(0,l.Lk)("tbody",cn,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.selectedOrder.items,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.productId},[(0,l.Lk)("td",un,(0,F.v_)(e.productName),1),(0,l.Lk)("td",mn,(0,F.v_)(a.formatCurrency(e.price)),1),(0,l.Lk)("td",gn,(0,F.v_)(e.quantity),1),(0,l.Lk)("td",pn,(0,F.v_)(a.formatCurrency(e.subtotal)),1)]))),128))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[t[45]||(t[45]=(0,l.Lk)("td",{colspan:"3",class:"px-6 py-3 text-right text-sm font-medium text-gray-900"}," Tổng cộng: ",-1)),(0,l.Lk)("td",fn,(0,F.v_)(a.formatCurrency(a.selectedOrder.total)),1)])])])])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",hn,[(0,l.Lk)("button",{type:"button",onClick:t[5]||(t[5]=e=>a.openUpdateModal(a.selectedOrder)),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Cập nhật trạng thái "),(0,l.Lk)("button",{type:"button",onClick:t[6]||(t[6]=e=>a.showOrderDetailsModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Đóng ")])])])])):(0,l.Q3)("",!0),a.showUpdateModal?((0,l.uX)(),(0,l.CE)("div",bn,[(0,l.Lk)("div",xn,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[7]||(t[7]=e=>a.showUpdateModal=!1)},t[48]||(t[48]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),(0,l.Lk)("div",vn,[(0,l.Lk)("form",{onSubmit:t[12]||(t[12]=(0,r.D$)((...e)=>a.saveStatusChanges&&a.saveStatusChanges(...e),["prevent"]))},[(0,l.Lk)("div",yn,[(0,l.Lk)("h3",kn," Cập nhật trạng thái đơn hàng #"+(0,F.v_)(a.selectedOrder?.id),1),(0,l.Lk)("div",Ln,[(0,l.Lk)("div",null,[t[49]||(t[49]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái đơn hàng",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>a.updatedOrderStatus=e),required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.orderStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,wn))),128))],512),[[r.u1,a.updatedOrderStatus]])]),(0,l.Lk)("div",null,[t[50]||(t[50]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trạng thái thanh toán",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.updatedPaymentStatus=e),required:"",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.paymentStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,Cn))),128))],512),[[r.u1,a.updatedPaymentStatus]])]),(0,l.Lk)("div",null,[t[51]||(t[51]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ghi chú",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.updateNote=e),rows:"3",placeholder:"Nhập ghi chú về việc cập nhật trạng thái (nếu có)",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.updateNote]])])])]),(0,l.Lk)("div",_n,[t[52]||(t[52]=(0,l.Lk)("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm"}," Lưu thay đổi ",-1)),(0,l.Lk)("button",{type:"button",onClick:t[11]||(t[11]=e=>a.showUpdateModal=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Hủy ")])],32)])])])):(0,l.Q3)("",!0)])])}const Sn=(0,n.nY)("order",{state:()=>({orders:[],loading:!1,error:null}),getters:{getOrdersByStatus:e=>t=>t?e.orders.filter(e=>e.status===t):e.orders,getOrdersByDate:e=>t=>t?e.orders.filter(e=>e.createdAt.startsWith(t)):e.orders,getOrdersBySeller:e=>t=>t?e.orders.filter(e=>e.sellerId===t):e.orders,getOrdersByUser:e=>t=>t?e.orders.filter(e=>e.userId===t):e.orders},actions:{async fetchOrders(){this.loading=!0;try{const e=await zt.getOrders();this.orders=e.data}catch(e){this.error=e.message||"Failed to fetch orders",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async getOrderById(e){try{const t=await zt.getOrderById(e);return t.data}catch(t){return this.error=t.message||"Failed to fetch order",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}},async updateOrderStatus({orderId:e,status:t,paymentStatus:s}){this.loading=!0;try{await zt.updateOrderStatus(e,t);const a=this.orders.findIndex(t=>t.id===e);return-1!==a&&(this.orders[a].status=t,s&&(this.orders[a].paymentStatus=s),this.orders[a].updatedAt=(new Date).toISOString()),ts().fire({title:"Success!",text:"Order status updated successfully",icon:"success",confirmButtonText:"OK"}),!0}catch(a){return this.error=a.message||"Failed to update order status",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}},async createOrder(e){this.loading=!0;try{const t=await zt.createOrder(e);return this.orders.push(t.data),ts().fire({title:"Success!",text:"Order created successfully",icon:"success",confirmButtonText:"OK"}),t.data}catch(t){return this.error=t.message||"Failed to create order",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}finally{this.loading=!1}}}});var In={name:"OrderManagement",setup(){const e=Sn(),t=(0,Bt.KR)(""),s=(0,Bt.KR)(""),a=(0,Bt.KR)(""),r=(0,Bt.KR)(null),n=(0,Bt.KR)(""),i=(0,Bt.KR)(""),o=(0,Bt.KR)(""),d=(0,Bt.KR)(!1),c=(0,Bt.KR)(!1),u=(0,l.EW)(()=>e.loading),m=(0,l.EW)(()=>e.orders),g=(0,l.EW)(()=>{let e=m.value;if(s.value&&(e=e.filter(e=>e.status===s.value)),a.value&&(e=e.filter(e=>e.paymentStatus===a.value)),t.value){const s=t.value.toLowerCase();e=e.filter(e=>e.id.toLowerCase().includes(s)||e.userName.toLowerCase().includes(s)||e.sellerName.toLowerCase().includes(s))}return e}),p=e=>{r.value=e,d.value=!0},f=e=>{r.value=e,n.value=e.status,i.value=e.paymentStatus,o.value="",c.value=!0},h=async()=>{try{r.value&&(await e.updateOrderStatus({orderId:r.value.id,status:n.value,paymentStatus:i.value}),r.value.status=n.value,r.value.paymentStatus=i.value,c.value=!1)}catch(t){console.error("Error updating order status:",t)}},b=e=>{ts().fire({title:"Xác nhận hủy đơn hàng?",text:"Bạn có chắc chắn muốn hủy đơn hàng này?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hủy đơn hàng",cancelButtonText:"Không"}).then(t=>{t.isConfirmed&&x(e)})},x=async t=>{try{await e.updateOrderStatus({orderId:t,status:"cancelled",paymentStatus:"refunded"})}catch(s){console.error("Error cancelling order:",s)}},v=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),y=e=>{const t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},k=e=>{const t=Ht.find(t=>t.value===e);return t?t.label:e},L=e=>{const t=Qt.find(t=>t.value===e);return t?t.label:e};return(0,l.sV)(async()=>{await e.fetchOrders()}),{loading:u,orders:m,filteredOrders:g,searchQuery:t,statusFilter:s,paymentStatusFilter:a,selectedOrder:r,orderStatuses:Ht,paymentStatuses:Qt,updatedOrderStatus:n,updatedPaymentStatus:i,updateNote:o,showOrderDetailsModal:d,showUpdateModal:c,viewOrderDetails:p,openUpdateModal:f,saveStatusChanges:h,confirmCancelOrder:b,formatCurrency:v,formatDate:y,getOrderStatusLabel:k,getPaymentStatusLabel:L}}};const Tn=(0,c.A)(In,[["render",Fn],["__scopeId","data-v-e0d13000"]]);var En=Tn;const Pn={class:"bg-gray-50 min-h-screen pb-10"},Dn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Mn={class:"flex items-center justify-between mb-8"},An={class:"flex space-x-3"},Un={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},Nn={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Wn={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 lg:col-span-2 card-hover"},Xn={class:"p-6"},Bn={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},On={class:"mb-4"},Kn={class:"relative"},Vn=["value"],Rn={class:"mb-4"},jn={class:"relative"},Hn={class:"mb-4"},Qn={class:"relative"},qn=["value"],$n={class:"mb-4"},Gn={class:"relative"},Jn={class:"mb-4"},Zn={class:"relative"},Yn=["value"],zn={class:"mb-4"},el={class:"relative"},tl=["value"],sl={class:"bg-gray-50 p-4 rounded-lg mb-6"},al={class:"grid grid-cols-1 md:grid-cols-12 gap-4"},rl={class:"md:col-span-5"},nl={class:"relative"},ll=["onUpdate:modelValue","onChange"],il=["value"],ol={class:"md:col-span-2"},dl={class:"relative"},cl=["onUpdate:modelValue"],ul={class:"md:col-span-2"},ml={class:"relative"},gl=["onUpdate:modelValue","onChange"],pl={class:"md:col-span-2"},fl={class:"relative"},hl=["onUpdate:modelValue"],bl={class:"md:col-span-1 flex items-end"},xl=["onClick","disabled"],vl={class:"flex justify-between items-center mt-4"},yl={class:"text-right"},kl={class:"text-xl font-bold text-indigo-700"},Ll={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 card-hover"},wl={class:"p-6"},Cl={key:0,class:"text-center py-8"},_l={key:1},Fl={class:"mb-6 pb-6 border-b border-gray-200"},Sl={class:"bg-gray-50 p-4 rounded-lg"},Il={class:"text-sm mb-1"},Tl={class:"text-sm mb-1"},El={class:"text-sm"},Pl={class:"mb-6 pb-6 border-b border-gray-200"},Dl={class:"bg-gray-50 p-4 rounded-lg"},Ml={class:"text-sm mb-1"},Al={class:"text-sm"},Ul={class:"mb-6 pb-6 border-b border-gray-200"},Nl={class:"flex space-x-2"},Wl={class:"mb-6"},Xl={class:"bg-gray-50 rounded-lg overflow-hidden"},Bl={class:"flex justify-between items-start"},Ol={class:"text-sm font-medium"},Kl={class:"text-xs text-gray-500"},Vl={class:"text-sm font-semibold"},Rl={class:"bg-indigo-50 p-4 rounded-lg"},jl={class:"flex justify-between items-center"},Hl={class:"text-xl font-bold text-indigo-800"};function Ql(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Pn,[(0,l.Lk)("div",Dn,[(0,l.Lk)("div",Mn,[t[11]||(t[11]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart mr-3 text-indigo-600"}),(0,l.eW)(" Tạo đơn hàng mới ")],-1)),(0,l.Lk)("div",An,[(0,l.bF)(o,{to:"/admin/orders",class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium flex items-center"},{default:(0,l.k6)(()=>t[10]||(t[10]=[(0,l.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,l.eW)(" Quay lại ")])),_:1,__:[10]})])]),a.loading?((0,l.uX)(),(0,l.CE)("div",Un,t[12]||(t[12]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang xử lý...",-1)]))):((0,l.uX)(),(0,l.CE)("div",Nn,[(0,l.Lk)("div",Wn,[t[50]||(t[50]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-file-invoice mr-2"}),(0,l.eW)(" Thông tin đơn hàng ")])],-1)),(0,l.Lk)("div",Xn,[(0,l.Lk)("form",{onSubmit:t[9]||(t[9]=(0,r.D$)((...e)=>a.validateAndSubmit&&a.validateAndSubmit(...e),["prevent"]))},[(0,l.Lk)("div",Bn,[(0,l.Lk)("div",null,[t[19]||(t[19]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thông tin khách hàng",-1)),(0,l.Lk)("div",On,[t[16]||(t[16]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn người dùng",-1)),(0,l.Lk)("div",Kn,[t[14]||(t[14]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-user text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.orderForm.userId=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",onChange:t[1]||(t[1]=(...e)=>a.handleUserChange&&a.handleUserChange(...e))},[t[13]||(t[13]=(0,l.Lk)("option",{value:"",disabled:""},"Chọn người dùng",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.users,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.name)+" (ID: "+(0,F.v_)(e.id)+") ",9,Vn))),128))],544),[[r.u1,a.orderForm.userId]]),t[15]||(t[15]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",Rn,[t[18]||(t[18]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Địa chỉ giao hàng",-1)),(0,l.Lk)("div",jn,[t[17]||(t[17]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-map-marker-alt text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.orderForm.shippingAddress=e),required:"",rows:"3",placeholder:"Nhập địa chỉ giao hàng",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.orderForm.shippingAddress]])])])]),(0,l.Lk)("div",null,[t[34]||(t[34]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thông tin thanh toán",-1)),(0,l.Lk)("div",Hn,[t[23]||(t[23]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn người bán",-1)),(0,l.Lk)("div",Qn,[t[21]||(t[21]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-store text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.orderForm.sellerId=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",onChange:t[4]||(t[4]=(...e)=>a.handleSellerChange&&a.handleSellerChange(...e))},[t[20]||(t[20]=(0,l.Lk)("option",{value:"",disabled:""},"Chọn người bán",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.sellers,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.name)+" (ID: "+(0,F.v_)(e.id)+") ",9,qn))),128))],544),[[r.u1,a.orderForm.sellerId]]),t[22]||(t[22]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",$n,[t[27]||(t[27]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phương thức thanh toán",-1)),(0,l.Lk)("div",Gn,[t[25]||(t[25]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-credit-card text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.orderForm.paymentMethod=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},t[24]||(t[24]=[(0,l.Fv)('<option value="" disabled data-v-6fe740ee>Chọn phương thức thanh toán</option><option value="cod" data-v-6fe740ee>Thanh toán khi nhận hàng (COD)</option><option value="bank_transfer" data-v-6fe740ee>Chuyển khoản ngân hàng</option><option value="credit_card" data-v-6fe740ee>Thẻ tín dụng</option><option value="momo" data-v-6fe740ee>Ví MoMo</option>',5)]),512),[[r.u1,a.orderForm.paymentMethod]]),t[26]||(t[26]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",Jn,[t[30]||(t[30]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trạng thái đơn hàng",-1)),(0,l.Lk)("div",Zn,[t[28]||(t[28]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-tasks text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.orderForm.status=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.orderStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,Yn))),128))],512),[[r.u1,a.orderForm.status]]),t[29]||(t[29]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",zn,[t[33]||(t[33]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trạng thái thanh toán",-1)),(0,l.Lk)("div",el,[t[31]||(t[31]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-money-check-alt text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>a.orderForm.paymentStatus=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.paymentStatuses,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,F.v_)(e.label),9,tl))),128))],512),[[r.u1,a.orderForm.paymentStatus]]),t[32]||(t[32]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])])])]),t[48]||(t[48]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Sản phẩm",-1)),(0,l.Lk)("div",sl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.orderForm.items,(e,s)=>((0,l.uX)(),(0,l.CE)("div",{key:s,class:"mb-4 pb-4 border-b border-gray-200 last:border-0 last:mb-0 last:pb-0"},[(0,l.Lk)("div",al,[(0,l.Lk)("div",rl,[t[38]||(t[38]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sản phẩm",-1)),(0,l.Lk)("div",nl,[t[36]||(t[36]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-box text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t=>e.productId=t,required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",onChange:e=>a.handleProductChange(s)},[t[35]||(t[35]=(0,l.Lk)("option",{value:"",disabled:""},"Chọn sản phẩm",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.availableProducts,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.name)+" ("+(0,F.v_)(a.formatCurrency(e.price))+") ",9,il))),128))],40,ll),[[r.u1,e.productId]]),t[37]||(t[37]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",ol,[t[40]||(t[40]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Đơn giá",-1)),(0,l.Lk)("div",dl,[t[39]||(t[39]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-tag text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.price=t,required:"",min:"0",readonly:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"},null,8,cl),[[r.Jo,e.price]])])]),(0,l.Lk)("div",ul,[t[42]||(t[42]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Số lượng",-1)),(0,l.Lk)("div",ml,[t[41]||(t[41]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-sort-amount-up text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,required:"",min:"1",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:e=>a.updateSubtotal(s)},null,40,gl),[[r.Jo,e.quantity]])])]),(0,l.Lk)("div",pl,[t[44]||(t[44]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Thành tiền",-1)),(0,l.Lk)("div",fl,[t[43]||(t[43]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-calculator text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.subtotal=t,required:"",readonly:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"},null,8,hl),[[r.Jo,e.subtotal]])])]),(0,l.Lk)("div",bl,[(0,l.Lk)("button",{type:"button",onClick:e=>a.removeItem(s),class:"w-full py-3 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",disabled:a.orderForm.items.length<=1},t[45]||(t[45]=[(0,l.Lk)("i",{class:"fas fa-trash-alt"},null,-1)]),8,xl)])])]))),128)),(0,l.Lk)("div",vl,[(0,l.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>a.addItem&&a.addItem(...e)),class:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors font-medium"},t[46]||(t[46]=[(0,l.Lk)("i",{class:"fas fa-plus mr-1"},null,-1),(0,l.eW)(" Thêm sản phẩm ")])),(0,l.Lk)("div",yl,[t[47]||(t[47]=(0,l.Lk)("p",{class:"text-sm text-gray-600 mb-1"},"Tổng cộng:",-1)),(0,l.Lk)("p",kl,(0,F.v_)(a.formatCurrency(a.calculateTotal)),1)])])]),t[49]||(t[49]=(0,l.Lk)("div",{class:"flex justify-end"},[(0,l.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium"},[(0,l.Lk)("i",{class:"fas fa-save mr-2"}),(0,l.eW)(" Tạo đơn hàng ")])],-1))],32)])]),(0,l.Lk)("div",Ll,[t[62]||(t[62]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-receipt mr-2"}),(0,l.eW)(" Tóm tắt đơn hàng ")])],-1)),(0,l.Lk)("div",wl,[a.orderForm.userId&&a.orderForm.sellerId&&0!==a.orderForm.items.length&&a.orderForm.items[0].productId?((0,l.uX)(),(0,l.CE)("div",_l,[(0,l.Lk)("div",Fl,[t[55]||(t[55]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Thông tin khách hàng",-1)),(0,l.Lk)("div",Sl,[(0,l.Lk)("p",Il,[t[52]||(t[52]=(0,l.Lk)("span",{class:"font-medium"},"Tên:",-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedUser?a.selectedUser.name:""),1)]),(0,l.Lk)("p",Tl,[t[53]||(t[53]=(0,l.Lk)("span",{class:"font-medium"},"ID:",-1)),(0,l.eW)(" "+(0,F.v_)(a.orderForm.userId),1)]),(0,l.Lk)("p",El,[t[54]||(t[54]=(0,l.Lk)("span",{class:"font-medium"},"Địa chỉ:",-1)),(0,l.eW)(" "+(0,F.v_)(a.orderForm.shippingAddress),1)])])]),(0,l.Lk)("div",Pl,[t[58]||(t[58]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Thông tin người bán",-1)),(0,l.Lk)("div",Dl,[(0,l.Lk)("p",Ml,[t[56]||(t[56]=(0,l.Lk)("span",{class:"font-medium"},"Tên:",-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedSeller?a.selectedSeller.name:""),1)]),(0,l.Lk)("p",Al,[t[57]||(t[57]=(0,l.Lk)("span",{class:"font-medium"},"ID:",-1)),(0,l.eW)(" "+(0,F.v_)(a.orderForm.sellerId),1)])])]),(0,l.Lk)("div",Ul,[t[59]||(t[59]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Trạng thái đơn hàng",-1)),(0,l.Lk)("div",Nl,[(0,l.Lk)("span",{class:(0,F.C4)(["px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":"pending"===a.orderForm.status,"bg-blue-100 text-blue-800":"processing"===a.orderForm.status,"bg-indigo-100 text-indigo-800":"shipped"===a.orderForm.status,"bg-green-100 text-green-800":"completed"===a.orderForm.status,"bg-red-100 text-red-800":"cancelled"===a.orderForm.status}])},(0,F.v_)(a.getOrderStatusLabel(a.orderForm.status)),3),(0,l.Lk)("span",{class:(0,F.C4)(["px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":"pending"===a.orderForm.paymentStatus,"bg-green-100 text-green-800":"paid"===a.orderForm.paymentStatus,"bg-blue-100 text-blue-800":"refunded"===a.orderForm.paymentStatus,"bg-red-100 text-red-800":"failed"===a.orderForm.paymentStatus}])},(0,F.v_)(a.getPaymentStatusLabel(a.orderForm.paymentStatus)),3)])]),(0,l.Lk)("div",Wl,[t[60]||(t[60]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Sản phẩm",-1)),(0,l.Lk)("div",Xl,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.orderForm.items,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"p-3 border-b border-gray-200 last:border-0"},[(0,l.Lk)("div",Bl,[(0,l.Lk)("div",null,[(0,l.Lk)("p",Ol,(0,F.v_)(a.getProductName(e.productId)),1),(0,l.Lk)("p",Kl,(0,F.v_)(a.formatCurrency(e.price))+" x "+(0,F.v_)(e.quantity),1)]),(0,l.Lk)("p",Vl,(0,F.v_)(a.formatCurrency(e.subtotal)),1)])]))),128))])]),(0,l.Lk)("div",Rl,[(0,l.Lk)("div",jl,[t[61]||(t[61]=(0,l.Lk)("p",{class:"font-medium text-indigo-800"},"Tổng cộng:",-1)),(0,l.Lk)("p",Hl,(0,F.v_)(a.formatCurrency(a.calculateTotal)),1)])])])):((0,l.uX)(),(0,l.CE)("div",Cl,t[51]||(t[51]=[(0,l.Lk)("div",{class:"text-gray-400 text-5xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart"})],-1),(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-500 mb-2"},"Chưa có thông tin đơn hàng",-1),(0,l.Lk)("p",{class:"text-gray-400 text-sm"},"Vui lòng điền thông tin đơn hàng bên trái",-1)])))])])]))])])}s(7588),s(8237),s(3579);var ql={name:"CreateOrder",setup(){const e=(0,g.rd)(),t=Sn(),s=(0,Bt.KR)(!1),a=(0,Bt.KR)([]),r=(0,Bt.KR)([]),n=(0,Bt.KR)([]),i=(0,Bt.KR)(null),o=(0,Bt.KR)(null),d=(0,Bt.KR)({userId:"",userName:"",sellerId:"",sellerName:"",items:[{productId:"",productName:"",price:0,quantity:1,subtotal:0}],total:0,status:"pending",paymentStatus:"pending",paymentMethod:"",shippingAddress:""}),c=(0,l.EW)(()=>n.value.filter(e=>e.sellerId===parseInt(d.value.sellerId))),u=(0,l.EW)(()=>d.value.items.reduce((e,t)=>e+(t.subtotal||0),0)),m=async()=>{try{const e=await fetch("/api/users"),t=await e.json();a.value=t.data||[]}catch(e){console.error("Error fetching users:",e),a.value=[{id:1,name:"Nguyễn Văn A",address:"123 Đường Lê Lợi, Quận 1, TP.HCM"},{id:4,name:"Phạm Thị D",address:"101 Đường Võ Văn Tần, Quận 3, TP.HCM"}]}},p=async()=>{try{const e=await fetch("/api/sellers"),t=await e.json();r.value=t.data||[]}catch(e){console.error("Error fetching sellers:",e),r.value=[{id:2,name:"Trần Thị B"},{id:5,name:"Hoàng E"}]}},f=async()=>{try{const e=await fetch("/api/products"),t=await e.json();n.value=t.data||[]}catch(e){console.error("Error fetching products:",e),n.value=[{id:1,name:"Tai Nghe Không Dây Cao Cấp",price:299e4,sellerId:2},{id:2,name:"Đồng Hồ Thông Minh Series 5",price:689e4,sellerId:5},{id:3,name:"Ghế Văn Phòng Công Thái Học",price:459e4,sellerId:2},{id:4,name:"Máy Ảnh DSLR Chuyên Nghiệp",price:2069e4,sellerId:5},{id:5,name:"Kính Mát Thời Trang",price:138e4,sellerId:2},{id:6,name:"Loa Bluetooth Di Động",price:184e4,sellerId:2}]}},h=()=>{const e=a.value.find(e=>e.id===parseInt(d.value.userId));e&&(i.value=e,d.value.userName=e.name,d.value.shippingAddress=e.address||"")},b=()=>{const e=r.value.find(e=>e.id===parseInt(d.value.sellerId));e&&(o.value=e,d.value.sellerName=e.name,d.value.items.forEach(e=>{e.productId="",e.productName="",e.price=0,e.subtotal=0}))},x=e=>{const t=d.value.items[e],s=n.value.find(e=>e.id===parseInt(t.productId));s&&(t.productName=s.name,t.price=s.price,v(e))},v=e=>{const t=d.value.items[e];t.subtotal=t.price*t.quantity},y=()=>{d.value.items.push({productId:"",productName:"",price:0,quantity:1,subtotal:0})},k=e=>{d.value.items.length>1&&d.value.items.splice(e,1)},L=e=>{if(!e)return"";const t=n.value.find(t=>t.id===parseInt(e));return t?t.name:""},w=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),C=e=>{const t=Ht.find(t=>t.value===e);return t?t.label:e},_=e=>{const t=Qt.find(t=>t.value===e);return t?t.label:e},F=()=>{const e=d.value.items.some(e=>!e.productId);e?ts().fire({title:"Lỗi!",text:"Vui lòng chọn sản phẩm cho tất cả các mục",icon:"error",confirmButtonText:"OK"}):(d.value.total=u.value,S())},S=async()=>{s.value=!0;try{const s=await t.createOrder(d.value);s&&ts().fire({title:"Thành công!",text:"Đơn hàng đã được tạo thành công",icon:"success",confirmButtonText:"OK"}).then(()=>{e.push("/admin/orders")})}catch(a){console.error("Error creating order:",a),ts().fire({title:"Lỗi!",text:"Có lỗi xảy ra khi tạo đơn hàng",icon:"error",confirmButtonText:"OK"})}finally{s.value=!1}};return(0,l.sV)(async()=>{await Promise.all([m(),p(),f()])}),{loading:s,users:a,sellers:r,products:n,orderForm:d,orderStatuses:Ht,paymentStatuses:Qt,selectedUser:i,selectedSeller:o,availableProducts:c,calculateTotal:u,handleUserChange:h,handleSellerChange:b,handleProductChange:x,updateSubtotal:v,addItem:y,removeItem:k,getProductName:L,formatCurrency:w,getOrderStatusLabel:C,getPaymentStatusLabel:_,validateAndSubmit:F}}};const $l=(0,c.A)(ql,[["render",Ql],["__scopeId","data-v-6fe740ee"]]);var Gl=$l;const Jl={class:"bg-gray-50 min-h-screen pb-10"},Zl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yl={class:"flex items-center justify-between mb-8"},zl={class:"flex space-x-2 mb-6"},ei={class:"relative"},ti=["value"],si={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},ai={key:1,class:"bg-white rounded-xl shadow-md p-8 text-center"},ri={class:"mt-6"},ni={key:2,class:"bg-white rounded-xl shadow-md overflow-hidden"},li={class:"min-w-full divide-y divide-gray-200"},ii={class:"bg-white divide-y divide-gray-200"},oi={class:"px-6 py-4 whitespace-nowrap"},di={class:"flex items-center"},ci={class:"h-10 w-10 flex-shrink-0"},ui=["src"],mi={class:"ml-4"},gi={class:"text-sm font-medium text-gray-900"},pi={class:"text-sm text-gray-500"},fi={class:"px-6 py-4 whitespace-nowrap"},hi={class:"text-sm text-gray-900"},bi={key:0,class:"text-sm text-green-600"},xi={class:"px-6 py-4 whitespace-nowrap"},vi={class:"text-sm text-gray-900"},yi={class:"px-6 py-4 whitespace-nowrap"},ki={class:"text-sm text-gray-900"},Li={class:"px-6 py-4 whitespace-nowrap"},wi={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ci=["onClick"],_i=["onClick"];function Fi(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Jl,[(0,l.Lk)("div",Zl,[(0,l.Lk)("div",Yl,[t[4]||(t[4]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-box-open mr-3 text-indigo-600"}),(0,l.eW)(" Quản lý sản phẩm ")],-1)),(0,l.Lk)("div",null,[(0,l.bF)(o,{to:"/admin/products/create",class:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium"},{default:(0,l.k6)(()=>t[3]||(t[3]=[(0,l.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,l.eW)(" Thêm sản phẩm mới ")])),_:1,__:[3]})])]),(0,l.Lk)("div",zl,[(0,l.Lk)("div",ei,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),placeholder:"Tìm kiếm sản phẩm...",class:"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.searchQuery]]),t[5]||(t[5]=(0,l.Lk)("i",{class:"fas fa-search absolute left-3 top-3 text-gray-400"},null,-1))]),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.statusFilter=e),class:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[6]||(t[6]=[(0,l.Lk)("option",{value:""},"Tất cả trạng thái",-1),(0,l.Lk)("option",{value:"approved"},"Đã duyệt",-1),(0,l.Lk)("option",{value:"pending"},"Chờ duyệt",-1)]),512),[[r.u1,a.statusFilter]]),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.sellerFilter=e),class:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t[7]||(t[7]=(0,l.Lk)("option",{value:""},"Tất cả người bán",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.sellers,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.name),9,ti))),128))],512),[[r.u1,a.sellerFilter]])])]),a.loading?((0,l.uX)(),(0,l.CE)("div",si,t[8]||(t[8]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang tải dữ liệu...",-1)]))):0===a.filteredProducts.length?((0,l.uX)(),(0,l.CE)("div",ai,[t[10]||(t[10]=(0,l.Lk)("div",{class:"text-gray-500 text-6xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-box-open"})],-1)),t[11]||(t[11]=(0,l.Lk)("h2",{class:"text-xl font-semibold mb-2"},"Không tìm thấy sản phẩm nào",-1)),t[12]||(t[12]=(0,l.Lk)("p",{class:"text-gray-500"},"Thử thay đổi bộ lọc hoặc tìm kiếm với từ khóa khác",-1)),(0,l.Lk)("div",ri,[(0,l.bF)(o,{to:"/admin/products/create",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium inline-flex items-center"},{default:(0,l.k6)(()=>t[9]||(t[9]=[(0,l.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,l.eW)(" Thêm sản phẩm mới ")])),_:1,__:[9]})])])):((0,l.uX)(),(0,l.CE)("div",ni,[(0,l.Lk)("table",li,[t[15]||(t[15]=(0,l.Lk)("thead",{class:"bg-gray-50"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sản phẩm "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Giá "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Người bán "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Hoa hồng "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trạng thái "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thao tác ")])],-1)),(0,l.Lk)("tbody",ii,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredProducts,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",oi,[(0,l.Lk)("div",di,[(0,l.Lk)("div",ci,[(0,l.Lk)("img",{class:"h-10 w-10 rounded-full object-cover",src:e.images[0],alt:""},null,8,ui)]),(0,l.Lk)("div",mi,[(0,l.Lk)("div",gi,(0,F.v_)(e.name),1),(0,l.Lk)("div",pi,(0,F.v_)(e.category),1)])])]),(0,l.Lk)("td",fi,[(0,l.Lk)("div",hi,(0,F.v_)(a.formatCurrency(e.price)),1),e.discountPrice?((0,l.uX)(),(0,l.CE)("div",bi,(0,F.v_)(a.formatCurrency(e.discountPrice)),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",xi,[(0,l.Lk)("div",vi,(0,F.v_)(e.sellerName),1)]),(0,l.Lk)("td",yi,[(0,l.Lk)("div",ki,(0,F.v_)(e.commission_rate)+"%",1)]),(0,l.Lk)("td",Li,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":"approved"===e.status,"bg-yellow-100 text-yellow-800":"pending"===e.status}])},(0,F.v_)("approved"===e.status?"Đã duyệt":"Chờ duyệt"),3)]),(0,l.Lk)("td",wi,["pending"===e.status?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>a.approveProduct(e.id),class:"text-indigo-600 hover:text-indigo-900 mr-3"},t[13]||(t[13]=[(0,l.Lk)("i",{class:"fas fa-check mr-1"},null,-1),(0,l.eW)(" Duyệt ")]),8,Ci)):(0,l.Q3)("",!0),(0,l.Lk)("button",{onClick:t=>a.confirmDeleteProduct(e.id),class:"text-red-600 hover:text-red-900"},t[14]||(t[14]=[(0,l.Lk)("i",{class:"fas fa-trash-alt mr-1"},null,-1),(0,l.eW)(" Xóa ")]),8,_i)])]))),128))])])]))])}const Si=(0,n.nY)("product",{state:()=>({products:[],loading:!1,error:null,nextId:100}),getters:{getProductsBySeller:e=>t=>t?e.products.filter(e=>e.sellerId===t):e.products,getProductsByStatus:e=>t=>t?e.products.filter(e=>e.status===t):e.products,getPendingProducts:e=>e.products.filter(e=>"pending"===e.status),getApprovedProducts:e=>e.products.filter(e=>"approved"===e.status)},actions:{async fetchProducts(){this.loading=!0;try{const e=await zt.getProducts();this.products=e.data}catch(e){this.error=e.message||"Failed to fetch products",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async getProductById(e){try{const t=await zt.getProductById(e);return t.data}catch(t){return this.error=t.message||"Failed to fetch product",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}},async updateProduct(e){this.loading=!0;try{const t=await zt.updateProduct(e),s=this.products.findIndex(t=>t.id===e.id);return-1!==s&&(this.products[s]={...this.products[s],...e}),ts().fire({title:"Success!",text:"Product updated successfully",icon:"success",confirmButtonText:"OK"}),t.data}catch(t){return this.error=t.message||"Failed to update product",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}finally{this.loading=!1}},async approveProduct(e){this.loading=!0;try{await zt.approveProduct(e);const t=this.products.findIndex(t=>t.id===e);return-1!==t&&(this.products[t].status="approved"),ts().fire({title:"Success!",text:"Product approved successfully",icon:"success",confirmButtonText:"OK"}),!0}catch(t){return this.error=t.message||"Failed to approve product",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}},async deleteProduct(e){this.loading=!0;try{return await zt.deleteProduct(e),this.products=this.products.filter(t=>t.id!==e),ts().fire({title:"Success!",text:"Product deleted successfully",icon:"success",confirmButtonText:"OK"}),!0}catch(t){return this.error=t.message||"Failed to delete product",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}},async createProduct(e){this.loading=!0;try{const t=this.nextId++,s={id:t,...e},a=await zt.createProduct(s);return this.products.push(a.data),ts().fire({title:"Success!",text:"Product created successfully",icon:"success",confirmButtonText:"OK"}),a.data}catch(t){return this.error=t.message||"Failed to create product",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}finally{this.loading=!1}}}});var Ii={name:"ProductManagement",setup(){const e=Si(),t=(0,Bt.KR)(""),s=(0,Bt.KR)(""),a=(0,Bt.KR)(""),r=(0,l.EW)(()=>e.loading),n=(0,l.EW)(()=>e.products),i=(0,l.EW)(()=>{const e=new Map;return n.value.forEach(t=>{e.has(t.sellerId)||e.set(t.sellerId,{id:t.sellerId,name:t.sellerName})}),Array.from(e.values())}),o=(0,l.EW)(()=>{let e=n.value;if(s.value&&(e=e.filter(e=>e.status===s.value)),a.value&&(e=e.filter(e=>e.sellerId===parseInt(a.value))),t.value){const s=t.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(s)||e.category.toLowerCase().includes(s))}return e}),d=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),c=async t=>{try{await e.approveProduct(t)}catch(s){console.error("Error approving product:",s)}},u=e=>{ts().fire({title:"Xác nhận xóa?",text:"Bạn có chắc chắn muốn xóa sản phẩm này?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Xóa",cancelButtonText:"Hủy"}).then(t=>{t.isConfirmed&&m(e)})},m=async t=>{try{await e.deleteProduct(t)}catch(s){console.error("Error deleting product:",s)}};return(0,l.sV)(async()=>{await e.fetchProducts()}),{loading:r,products:n,sellers:i,searchQuery:t,statusFilter:s,sellerFilter:a,filteredProducts:o,formatCurrency:d,approveProduct:c,confirmDeleteProduct:u}}};const Ti=(0,c.A)(Ii,[["render",Fi],["__scopeId","data-v-02962a4c"]]);var Ei=Ti;const Pi={class:"bg-gray-50 min-h-screen pb-10"},Di={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Mi={class:"flex items-center justify-between mb-8"},Ai={class:"flex space-x-3"},Ui={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},Ni={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Wi={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 lg:col-span-2 card-hover"},Xi={class:"p-6"},Bi={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Oi={class:"mb-4"},Ki={class:"relative"},Vi={class:"mb-4"},Ri={class:"relative"},ji={class:"mb-4"},Hi={class:"relative"},Qi={class:"mb-4"},qi={class:"relative"},$i={class:"mb-4"},Gi={class:"relative"},Ji={key:0,class:"mt-1 text-sm text-green-600"},Zi={class:"mb-4"},Yi={class:"relative"},zi={class:"mb-4"},eo={class:"relative"},to={class:"bg-gray-50 p-4 rounded-lg mb-6"},so={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ao={class:"relative"},ro=["value"],no={class:"relative"},lo={class:"bg-gray-50 p-4 rounded-lg mb-6"},io={class:"mb-4"},oo={class:"relative"},co={class:"flex justify-end mt-2"},uo=["disabled"],mo={key:0,class:"text-center py-8"},go={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},po=["src"],fo=["onClick"],ho={class:"flex justify-end"},bo=["disabled"],xo={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 card-hover"},vo={class:"p-6"},yo={key:0,class:"text-center py-8"},ko={key:1},Lo={class:"border border-gray-200 rounded-lg overflow-hidden mb-6"},wo={class:"relative"},Co=["src"],_o={key:0,class:"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded"},Fo={class:"absolute top-2 right-2"},So={class:"p-4"},Io={class:"font-bold text-gray-900 mb-1"},To={class:"text-sm text-gray-500 mb-2"},Eo={class:"flex items-baseline mb-2"},Po={class:"text-lg font-bold text-indigo-600 mr-2"},Do={key:0,class:"text-sm text-gray-500 line-through"},Mo={class:"text-sm text-gray-600 line-clamp-2 mb-3"},Ao={class:"flex justify-between items-center"},Uo={class:"text-xs text-gray-500"},No={class:"text-xs text-gray-500"},Wo={class:"space-y-4"},Xo={class:"bg-gray-50 p-3 rounded-lg"},Bo={class:"flex items-center"},Oo={class:"text-lg font-semibold text-indigo-600"},Ko={class:"text-sm text-gray-500 ml-2"},Vo={class:"bg-gray-50 p-3 rounded-lg"},Ro={class:"flex flex-wrap gap-2"},jo=["src"],Ho={key:0,class:"w-14 h-14 bg-gray-200 rounded-md flex items-center justify-center text-gray-500"};function Qo(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",Pi,[(0,l.Lk)("div",Di,[(0,l.Lk)("div",Mi,[t[14]||(t[14]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-box-open mr-3 text-indigo-600"}),(0,l.eW)(" Thêm sản phẩm mới ")],-1)),(0,l.Lk)("div",Ai,[(0,l.bF)(o,{to:"/admin/products",class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium flex items-center"},{default:(0,l.k6)(()=>t[13]||(t[13]=[(0,l.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,l.eW)(" Quay lại ")])),_:1,__:[13]})])]),a.loading?((0,l.uX)(),(0,l.CE)("div",Ui,t[15]||(t[15]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang xử lý...",-1)]))):((0,l.uX)(),(0,l.CE)("div",Ni,[(0,l.Lk)("div",Wi,[t[50]||(t[50]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-info-circle mr-2"}),(0,l.eW)(" Thông tin sản phẩm ")])],-1)),(0,l.Lk)("div",Xi,[(0,l.Lk)("form",{onSubmit:t[12]||(t[12]=(0,r.D$)((...e)=>a.validateAndSubmit&&a.validateAndSubmit(...e),["prevent"]))},[(0,l.Lk)("div",Bi,[(0,l.Lk)("div",null,[t[24]||(t[24]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thông tin cơ bản",-1)),(0,l.Lk)("div",Oi,[t[17]||(t[17]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên sản phẩm",-1)),(0,l.Lk)("div",Ki,[t[16]||(t[16]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-tag text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.productForm.name=e),type:"text",required:"",placeholder:"Nhập tên sản phẩm",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.name]])])]),(0,l.Lk)("div",Vi,[t[21]||(t[21]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Danh mục",-1)),(0,l.Lk)("div",Ri,[t[19]||(t[19]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-folder text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.productForm.category=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},t[18]||(t[18]=[(0,l.Fv)('<option value="" disabled data-v-7ca6230a>Chọn danh mục</option><option value="Điện thoại" data-v-7ca6230a>Điện thoại</option><option value="Laptop" data-v-7ca6230a>Laptop</option><option value="Máy tính bảng" data-v-7ca6230a>Máy tính bảng</option><option value="Phụ kiện" data-v-7ca6230a>Phụ kiện</option><option value="Đồng hồ thông minh" data-v-7ca6230a>Đồng hồ thông minh</option><option value="Điện tử" data-v-7ca6230a>Điện tử</option><option value="Nội thất" data-v-7ca6230a>Nội thất</option>',8)]),512),[[r.u1,a.productForm.category]]),t[20]||(t[20]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",ji,[t[23]||(t[23]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mô tả sản phẩm",-1)),(0,l.Lk)("div",Hi,[t[22]||(t[22]=(0,l.Lk)("div",{class:"absolute top-3 left-3 flex items-start pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-align-left text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.productForm.description=e),required:"",rows:"4",placeholder:"Nhập mô tả sản phẩm",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.description]])])])]),(0,l.Lk)("div",null,[t[33]||(t[33]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Giá và tồn kho",-1)),(0,l.Lk)("div",Qi,[t[26]||(t[26]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Giá bán (VNĐ)",-1)),(0,l.Lk)("div",qi,[t[25]||(t[25]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.productForm.price=e),type:"number",required:"",min:"0",placeholder:"Nhập giá bán",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.price]])])]),(0,l.Lk)("div",$i,[t[28]||(t[28]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Giá khuyến mãi (VNĐ)",-1)),(0,l.Lk)("div",Gi,[t[27]||(t[27]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-tags text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.productForm.discountPrice=e),type:"number",min:"0",placeholder:"Nhập giá khuyến mãi (nếu có)",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.discountPrice]])]),a.discountPercentage?((0,l.uX)(),(0,l.CE)("div",Ji," Giảm "+(0,F.v_)(a.discountPercentage)+"% so với giá gốc ",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Zi,[t[30]||(t[30]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Số lượng tồn kho",-1)),(0,l.Lk)("div",Yi,[t[29]||(t[29]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-cubes text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.productForm.stock=e),type:"number",required:"",min:"0",placeholder:"Nhập số lượng tồn kho",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.stock]])])]),(0,l.Lk)("div",zi,[t[32]||(t[32]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tỷ lệ hoa hồng (%)",-1)),(0,l.Lk)("div",eo,[t[31]||(t[31]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-percentage text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.productForm.commission_rate=e),type:"number",required:"",min:"0",max:"100",placeholder:"Nhập tỷ lệ hoa hồng",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.productForm.commission_rate]])])])])]),t[48]||(t[48]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thông tin người bán",-1)),(0,l.Lk)("div",to,[(0,l.Lk)("div",so,[(0,l.Lk)("div",null,[t[37]||(t[37]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Chọn người bán",-1)),(0,l.Lk)("div",ao,[t[35]||(t[35]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-store text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>a.productForm.sellerId=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none",onChange:t[8]||(t[8]=(...e)=>a.handleSellerChange&&a.handleSellerChange(...e))},[t[34]||(t[34]=(0,l.Lk)("option",{value:"",disabled:""},"Chọn người bán",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.sellers,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,F.v_)(e.name)+" (ID: "+(0,F.v_)(e.id)+") ",9,ro))),128))],544),[[r.u1,a.productForm.sellerId]]),t[36]||(t[36]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),(0,l.Lk)("div",null,[t[41]||(t[41]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trạng thái sản phẩm",-1)),(0,l.Lk)("div",no,[t[39]||(t[39]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-check-circle text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.productForm.status=e),required:"",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},t[38]||(t[38]=[(0,l.Lk)("option",{value:"pending"},"Chờ duyệt",-1),(0,l.Lk)("option",{value:"approved"},"Đã duyệt",-1)]),512),[[r.u1,a.productForm.status]]),t[40]||(t[40]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])])])]),t[49]||(t[49]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Hình ảnh sản phẩm",-1)),(0,l.Lk)("div",lo,[(0,l.Lk)("div",io,[t[44]||(t[44]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL hình ảnh",-1)),(0,l.Lk)("div",oo,[t[42]||(t[42]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-image text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.imageUrl=e),type:"text",placeholder:"Nhập URL hình ảnh",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.imageUrl]])]),(0,l.Lk)("div",co,[(0,l.Lk)("button",{type:"button",onClick:t[11]||(t[11]=(...e)=>a.addImage&&a.addImage(...e)),class:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100 transition-colors font-medium",disabled:!a.imageUrl},t[43]||(t[43]=[(0,l.Lk)("i",{class:"fas fa-plus mr-1"},null,-1),(0,l.eW)(" Thêm hình ảnh ")]),8,uo)])]),0===a.productForm.images.length?((0,l.uX)(),(0,l.CE)("div",mo,t[45]||(t[45]=[(0,l.Lk)("div",{class:"text-gray-400 text-5xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-images"})],-1),(0,l.Lk)("p",{class:"text-gray-500"},"Chưa có hình ảnh nào",-1),(0,l.Lk)("p",{class:"text-gray-400 text-sm"},"Thêm ít nhất một hình ảnh cho sản phẩm",-1)]))):((0,l.uX)(),(0,l.CE)("div",go,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.productForm.images,(e,s)=>((0,l.uX)(),(0,l.CE)("div",{key:s,class:"relative group"},[(0,l.Lk)("img",{src:e,alt:"Product image",class:"w-full h-32 object-cover rounded-lg border border-gray-200"},null,8,po),(0,l.Lk)("button",{type:"button",onClick:e=>a.removeImage(s),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},t[46]||(t[46]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]),8,fo)]))),128))]))]),(0,l.Lk)("div",ho,[(0,l.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium",disabled:0===a.productForm.images.length},t[47]||(t[47]=[(0,l.Lk)("i",{class:"fas fa-save mr-2"},null,-1),(0,l.eW)(" Tạo sản phẩm ")]),8,bo)])],32)])]),(0,l.Lk)("div",xo,[t[56]||(t[56]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-eye mr-2"}),(0,l.eW)(" Xem trước sản phẩm ")])],-1)),(0,l.Lk)("div",vo,[a.productForm.name?((0,l.uX)(),(0,l.CE)("div",ko,[(0,l.Lk)("div",Lo,[(0,l.Lk)("div",wo,[(0,l.Lk)("img",{src:a.productForm.images[0]||"https://via.placeholder.com/300x300.png?text=No+Image",alt:"Product preview",class:"w-full h-48 object-cover"},null,8,Co),a.productForm.discountPrice&&a.productForm.price>a.productForm.discountPrice?((0,l.uX)(),(0,l.CE)("div",_o," -"+(0,F.v_)(a.discountPercentage)+"% ",1)):(0,l.Q3)("",!0),(0,l.Lk)("div",Fo,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":"approved"===a.productForm.status,"bg-yellow-100 text-yellow-800":"pending"===a.productForm.status}])},(0,F.v_)("approved"===a.productForm.status?"Đã duyệt":"Chờ duyệt"),3)])]),(0,l.Lk)("div",So,[(0,l.Lk)("h3",Io,(0,F.v_)(a.productForm.name),1),(0,l.Lk)("p",To,(0,F.v_)(a.productForm.category),1),(0,l.Lk)("div",Eo,[(0,l.Lk)("span",Po,(0,F.v_)(a.formatCurrency(a.productForm.discountPrice||a.productForm.price)),1),a.productForm.discountPrice&&a.productForm.price>a.productForm.discountPrice?((0,l.uX)(),(0,l.CE)("span",Do,(0,F.v_)(a.formatCurrency(a.productForm.price)),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("p",Mo,(0,F.v_)(a.productForm.description),1),(0,l.Lk)("div",Ao,[(0,l.Lk)("span",Uo,[t[52]||(t[52]=(0,l.Lk)("i",{class:"fas fa-store mr-1"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.selectedSeller?a.selectedSeller.name:""),1)]),(0,l.Lk)("span",No,[t[53]||(t[53]=(0,l.Lk)("i",{class:"fas fa-cubes mr-1"},null,-1)),(0,l.eW)(" Còn "+(0,F.v_)(a.productForm.stock)+" sản phẩm ",1)])])])]),(0,l.Lk)("div",Wo,[(0,l.Lk)("div",Xo,[t[54]||(t[54]=(0,l.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"Hoa hồng",-1)),(0,l.Lk)("div",Bo,[(0,l.Lk)("span",Oo,(0,F.v_)(a.productForm.commission_rate)+"%",1),(0,l.Lk)("span",Ko," ("+(0,F.v_)(a.formatCurrency((a.productForm.discountPrice||a.productForm.price)*a.productForm.commission_rate/100))+") ",1)])]),(0,l.Lk)("div",Vo,[t[55]||(t[55]=(0,l.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-1"},"Hình ảnh",-1)),(0,l.Lk)("div",Ro,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.productForm.images.slice(0,4),(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"w-14 h-14 rounded-md overflow-hidden"},[(0,l.Lk)("img",{src:e,alt:"Product thumbnail",class:"w-full h-full object-cover"},null,8,jo)]))),128)),a.productForm.images.length>4?((0,l.uX)(),(0,l.CE)("div",Ho," +"+(0,F.v_)(a.productForm.images.length-4),1)):(0,l.Q3)("",!0)])])])])):((0,l.uX)(),(0,l.CE)("div",yo,t[51]||(t[51]=[(0,l.Lk)("div",{class:"text-gray-400 text-5xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-box-open"})],-1),(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-500 mb-2"},"Chưa có thông tin sản phẩm",-1),(0,l.Lk)("p",{class:"text-gray-400 text-sm"},"Vui lòng điền thông tin sản phẩm bên trái",-1)])))])])]))])])}var qo={name:"CreateProduct",setup(){const e=(0,g.rd)(),t=Si(),s=(0,Bt.KR)(!1),a=(0,Bt.KR)([]),r=(0,Bt.KR)(null),n=(0,Bt.KR)(""),i=(0,Bt.KR)({name:"",description:"",price:"",discountPrice:"",sellerId:"",sellerName:"",category:"",status:"pending",commission_rate:5,images:[],stock:1}),o=(0,l.EW)(()=>{if(i.value.discountPrice&&i.value.price>i.value.discountPrice){const e=(i.value.price-i.value.discountPrice)/i.value.price*100;return Math.round(e)}return null}),d=async()=>{try{const e=await fetch("/api/sellers"),t=await e.json();a.value=t.data||[]}catch(e){console.error("Error fetching sellers:",e),a.value=[{id:2,name:"Trần Thị B"},{id:5,name:"Hoàng E"}]}},c=()=>{const e=a.value.find(e=>e.id===parseInt(i.value.sellerId));e&&(r.value=e,i.value.sellerName=e.name)},u=()=>{n.value&&!i.value.images.includes(n.value)&&(i.value.images.push(n.value),n.value="")},m=e=>{i.value.images.splice(e,1)},p=e=>e?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e):"0 ₫",f=()=>{0!==i.value.images.length?i.value.discountPrice&&parseFloat(i.value.discountPrice)>=parseFloat(i.value.price)?ts().fire({title:"Lỗi!",text:"Giá khuyến mãi phải nhỏ hơn giá gốc",icon:"error",confirmButtonText:"OK"}):h():ts().fire({title:"Lỗi!",text:"Vui lòng thêm ít nhất một hình ảnh cho sản phẩm",icon:"error",confirmButtonText:"OK"})},h=async()=>{s.value=!0;try{const s=(new Date).toISOString(),a={...i.value,createdAt:s,updatedAt:s,price:parseFloat(i.value.price),discountPrice:i.value.discountPrice?parseFloat(i.value.discountPrice):null,sellerId:parseInt(i.value.sellerId),commission_rate:parseFloat(i.value.commission_rate),stock:parseInt(i.value.stock)},r=await t.createProduct(a);r&&ts().fire({title:"Thành công!",text:"Sản phẩm đã được tạo thành công",icon:"success",confirmButtonText:"OK"}).then(()=>{e.push("/admin/products")})}catch(a){console.error("Error creating product:",a),ts().fire({title:"Lỗi!",text:"Có lỗi xảy ra khi tạo sản phẩm",icon:"error",confirmButtonText:"OK"})}finally{s.value=!1}};return(0,l.sV)(async()=>{await d()}),{loading:s,sellers:a,productForm:i,selectedSeller:r,imageUrl:n,discountPercentage:o,handleSellerChange:c,addImage:u,removeImage:m,formatCurrency:p,validateAndSubmit:f}}};const $o=(0,c.A)(qo,[["render",Qo],["__scopeId","data-v-7ca6230a"]]);var Go=$o;const Jo={class:"bg-gray-50 min-h-screen pb-10"},Zo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yo={class:"flex items-center justify-between mb-8"},zo={class:"bg-white px-4 py-2 rounded-lg shadow-sm border border-indigo-100"},ed={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},td={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},sd={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 card-hover"},ad={class:"p-6"},rd={class:"relative w-full aspect-square max-w-sm mx-auto wheel-container"},nd={class:"absolute inset-0 rounded-full overflow-hidden shadow-xl wheel",ref:"wheel"},ld={id:"wheelCanvas",ref:"wheelCanvas",width:"400",height:"400",class:"w-full h-full"},id=["disabled"],od={class:"mt-8 bg-gray-50 p-4 rounded-lg border border-gray-200"},dd={class:"flex justify-between items-center mb-2"},cd={class:"w-full bg-gray-200 rounded-full h-4 overflow-hidden"},ud={class:"flex items-center mt-2"},md={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 lg:col-span-2 card-hover"},gd={class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4 flex justify-between items-center"},pd={class:"overflow-x-auto"},fd={class:"min-w-full divide-y divide-gray-200"},hd={class:"bg-white divide-y divide-gray-200"},bd={class:"px-6 py-4 whitespace-nowrap"},xd={class:"flex items-center"},vd={class:"font-medium text-gray-900 text-base"},yd={class:"px-6 py-4 whitespace-nowrap"},kd={class:"px-6 py-4 whitespace-nowrap"},Ld={class:"text-base font-medium"},wd={class:"px-6 py-4 whitespace-nowrap"},Cd={class:"flex items-center"},_d={class:"w-24 bg-gray-200 rounded-full h-3 mr-3 overflow-hidden shadow-inner"},Fd={class:"font-medium text-base"},Sd={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Id=["onClick"],Td=["onClick"],Ed={key:0},Pd={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 lg:col-span-3 card-hover"},Dd={class:"p-6"},Md={class:"md:col-span-1"},Ad={class:"relative"},Ud={class:"md:col-span-1"},Nd={class:"relative"},Wd={class:"md:col-span-2 flex items-end"},Xd=["disabled"],Bd={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Od={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Kd={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Vd={class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},Rd={class:"text-xl font-bold text-white flex items-center"},jd={class:"bg-white px-6 pt-6 pb-4"},Hd={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qd={class:"md:col-span-2 bg-gray-50 p-4 rounded-lg border border-gray-200 mb-2"},qd={class:"flex items-center"},$d={class:"font-bold text-lg"},Gd={class:"flex items-center"},Jd={class:"text-sm text-gray-600"},Zd={class:"relative"},Yd={class:"relative"},zd={key:0},ec={class:"block text-sm font-medium text-gray-700 mb-2"},tc={class:"relative"},sc={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ac=["placeholder"],rc={class:"relative"},nc={class:"mt-1 flex"},lc={class:"w-full bg-gray-200 rounded-full h-2"},ic={class:"grid grid-cols-6 gap-2 mb-2"},oc=["onClick"],dc={class:"relative"},cc={class:"grid grid-cols-5 gap-2 mt-2"},uc=["onClick"],mc={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},gc={type:"submit",class:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 font-medium shadow-md transition-colors"};function pc(e,t,s,a,n,i){return(0,l.uX)(),(0,l.CE)("div",Jo,[(0,l.Lk)("div",Zo,[(0,l.Lk)("div",Yo,[t[15]||(t[15]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-dharmachakra mr-3 text-indigo-600"}),(0,l.eW)(" Quản lý vòng quay may mắn ")],-1)),(0,l.Lk)("div",zo,[t[14]||(t[14]=(0,l.Lk)("span",{class:"text-sm font-medium text-gray-600"},"Trạng thái:",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["ml-2 font-semibold",{"text-green-600":100===a.totalProbability,"text-red-600":100!==a.totalProbability}])},(0,F.v_)(100===a.totalProbability?"Sẵn sàng":"Cần cấu hình"),3)])]),a.loading?((0,l.uX)(),(0,l.CE)("div",ed,t[16]||(t[16]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang tải dữ liệu...",-1)]))):((0,l.uX)(),(0,l.CE)("div",td,[(0,l.Lk)("div",sd,[t[21]||(t[21]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-eye mr-2"}),(0,l.eW)(" Xem trước vòng quay ")])],-1)),(0,l.Lk)("div",ad,[(0,l.Lk)("div",rd,[t[18]||(t[18]=(0,l.Lk)("div",{class:"absolute inset-0 rounded-full bg-gradient-to-r from-indigo-700 to-purple-700 shadow-2xl",style:{transform:"scale(1.05)"}},null,-1)),t[19]||(t[19]=(0,l.Lk)("div",{class:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2 z-20 wheel-pointer"},[(0,l.Lk)("div",{class:"w-0 h-0",style:{"border-left":"15px solid transparent","border-right":"15px solid transparent","border-top":"30px solid #ef4444",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))"}})],-1)),(0,l.Lk)("div",nd,[(0,l.Lk)("canvas",ld,null,512)],512),(0,l.Lk)("button",{type:"button",class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-16 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow-lg hover:from-indigo-700 hover:to-purple-700 focus:outline-none transition-all duration-300 font-bold",onClick:t[0]||(t[0]=(...e)=>a.spinWheel&&a.spinWheel(...e)),disabled:a.isSpinning,style:{"box-shadow":"0 4px 15px rgba(79, 70, 229, 0.4)"}},[t[17]||(t[17]=(0,l.Lk)("i",{class:"fas fa-play-circle mr-2"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.isSpinning?"Đang quay...":"Quay thử"),1)],8,id)]),(0,l.Lk)("div",od,[(0,l.Lk)("div",dd,[t[20]||(t[20]=(0,l.Lk)("h3",{class:"font-semibold text-gray-700"},"Tổng xác suất:",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["font-bold text-lg",{"text-red-600":100!==a.totalProbability,"text-green-600":100===a.totalProbability}])},(0,F.v_)(a.totalProbability)+"% ",3)]),(0,l.Lk)("div",cd,[(0,l.Lk)("div",{class:(0,F.C4)(["h-4 rounded-full transition-all duration-500 ease-out",{"bg-red-500":a.totalProbability>100,"bg-yellow-500":a.totalProbability<100,"bg-green-500":100===a.totalProbability}]),style:(0,F.Tr)({width:`${Math.min(a.totalProbability,100)}%`})},null,6)]),(0,l.Lk)("div",ud,[(0,l.Lk)("i",{class:(0,F.C4)({"fas fa-exclamation-triangle text-red-500":100!==a.totalProbability,"fas fa-check-circle text-green-500":100===a.totalProbability})},null,2),(0,l.Lk)("p",{class:(0,F.C4)(["text-sm ml-2",{"text-red-500":100!==a.totalProbability,"text-green-500":100===a.totalProbability}])},(0,F.v_)(100===a.totalProbability?"Xác suất hợp lệ":"Tổng xác suất phải bằng 100%"),3)])])])]),(0,l.Lk)("div",md,[(0,l.Lk)("div",gd,[t[23]||(t[23]=(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-gift mr-2"}),(0,l.eW)(" Danh sách phần thưởng ")],-1)),(0,l.Lk)("button",{onClick:t[1]||(t[1]=e=>a.openEditModal(null)),class:"px-4 py-2 bg-white text-indigo-600 rounded-lg shadow hover:bg-indigo-50 transition-colors font-medium"},t[22]||(t[22]=[(0,l.Lk)("i",{class:"fas fa-plus mr-1"},null,-1),(0,l.eW)(" Thêm mới ")]))]),(0,l.Lk)("div",pd,[(0,l.Lk)("table",fd,[t[27]||(t[27]=(0,l.Lk)("thead",{class:"bg-gray-50"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phần thưởng "),(0,l.Lk)("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Loại "),(0,l.Lk)("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Giá trị "),(0,l.Lk)("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Xác suất (%) "),(0,l.Lk)("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thao tác ")])],-1)),(0,l.Lk)("tbody",hd,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.spinItems,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id,class:"hover:bg-gray-50 transition-colors"},[(0,l.Lk)("td",bd,[(0,l.Lk)("div",xd,[(0,l.Lk)("div",{class:"w-10 h-10 rounded-full mr-3 flex items-center justify-center text-white shadow-md transform transition-transform hover:scale-110",style:(0,F.Tr)({background:`linear-gradient(135deg, ${e.color}, ${a.adjustColor(e.color,-30)})`})},[(0,l.Lk)("i",{class:(0,F.C4)(`fas fa-${e.icon} text-lg`),style:{"text-shadow":"0 1px 2px rgba(0,0,0,0.3)"}},null,2)],4),(0,l.Lk)("div",vd,(0,F.v_)(e.label),1)])]),(0,l.Lk)("td",yd,[(0,l.Lk)("span",{class:(0,F.C4)(["px-3 py-1.5 inline-flex text-xs leading-5 font-semibold rounded-full shadow-sm",{"bg-gradient-to-r from-green-100 to-green-200 text-green-800":"voucher"===e.type,"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800":"freeship"===e.type,"bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800":"discount"===e.type,"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800":"none"===e.type}])},[(0,l.Lk)("i",{class:(0,F.C4)({"fas fa-ticket-alt mr-1":"voucher"===e.type,"fas fa-truck mr-1":"freeship"===e.type,"fas fa-percent mr-1":"discount"===e.type,"fas fa-times-circle mr-1":"none"===e.type})},null,2),(0,l.eW)(" "+(0,F.v_)(a.getTypeLabel(e.type)),1)],2)]),(0,l.Lk)("td",kd,[(0,l.Lk)("div",Ld,(0,F.v_)(a.formatValue(e)),1)]),(0,l.Lk)("td",wd,[(0,l.Lk)("div",Cd,[(0,l.Lk)("div",_d,[(0,l.Lk)("div",{class:(0,F.C4)(["h-3 rounded-full transition-all duration-500 ease-out",{"bg-gradient-to-r from-green-400 to-green-500":e.probability>50,"bg-gradient-to-r from-yellow-400 to-yellow-500":e.probability>20&&e.probability<=50,"bg-gradient-to-r from-red-400 to-red-500":e.probability<=20}]),style:(0,F.Tr)({width:`${e.probability}%`})},null,6)]),(0,l.Lk)("div",Fd,(0,F.v_)(e.probability)+"%",1)])]),(0,l.Lk)("td",Sd,[(0,l.Lk)("button",{onClick:t=>a.openEditModal(e),class:"text-indigo-600 hover:text-indigo-900 bg-indigo-50 hover:bg-indigo-100 p-2.5 rounded-lg mr-2 transition-all hover:shadow-md",title:"Chỉnh sửa"},t[24]||(t[24]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Id),(0,l.Lk)("button",{onClick:t=>a.confirmDeleteItem(e.id),class:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 p-2.5 rounded-lg transition-all hover:shadow-md",title:"Xóa"},t[25]||(t[25]=[(0,l.Lk)("i",{class:"fas fa-trash-alt"},null,-1)]),8,Td)])]))),128)),0===a.spinItems.length?((0,l.uX)(),(0,l.CE)("tr",Ed,t[26]||(t[26]=[(0,l.Lk)("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-500"},[(0,l.Lk)("i",{class:"fas fa-info-circle mr-2"}),(0,l.eW)(" Chưa có phần thưởng nào. Hãy thêm phần thưởng mới để bắt đầu. ")],-1)]))):(0,l.Q3)("",!0)])])])]),(0,l.Lk)("div",Pd,[t[33]||(t[33]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-user-plus mr-2"}),(0,l.eW)(" Cấp lượt quay cho người dùng ")])],-1)),(0,l.Lk)("div",Dd,[(0,l.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)((...e)=>a.addSpinsToUser&&a.addSpinsToUser(...e),["prevent"])),class:"grid grid-cols-1 md:grid-cols-4 gap-6"},[(0,l.Lk)("div",Md,[t[29]||(t[29]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ID người dùng",-1)),(0,l.Lk)("div",Ad,[t[28]||(t[28]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-user text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.addSpinsForm.userId=e),type:"number",required:"",placeholder:"Nhập ID người dùng",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.addSpinsForm.userId]])])]),(0,l.Lk)("div",Ud,[t[31]||(t[31]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Số lượt quay",-1)),(0,l.Lk)("div",Nd,[t[30]||(t[30]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-sync-alt text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.addSpinsForm.count=e),type:"number",min:"1",required:"",placeholder:"Nhập số lượt",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.addSpinsForm.count]])])]),(0,l.Lk)("div",Wd,[(0,l.Lk)("button",{type:"submit",class:"w-full px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium",disabled:a.addingSpins},[t[32]||(t[32]=(0,l.Lk)("i",{class:"fas fa-plus-circle mr-2"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.addingSpins?"Đang xử lý...":"Cấp lượt quay"),1)],8,Xd)])],32)])])]))]),a.showEditModal?((0,l.uX)(),(0,l.CE)("div",Bd,[(0,l.Lk)("div",Od,[(0,l.Lk)("div",{class:"fixed inset-0 transition-opacity",onClick:t[5]||(t[5]=e=>a.showEditModal=!1)},t[34]||(t[34]=[(0,l.Lk)("div",{class:"absolute inset-0 bg-gray-800 opacity-75"},null,-1)])),(0,l.Lk)("div",Kd,[(0,l.Lk)("form",{onSubmit:t[13]||(t[13]=(0,r.D$)((...e)=>a.saveSpinItem&&a.saveSpinItem(...e),["prevent"]))},[(0,l.Lk)("div",Vd,[(0,l.Lk)("h3",Rd,[t[35]||(t[35]=(0,l.Lk)("i",{class:"fas fa-gift mr-2"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.editingItem?"Chỉnh sửa phần thưởng":"Thêm phần thưởng mới"),1)])]),(0,l.Lk)("div",jd,[(0,l.Lk)("div",Hd,[(0,l.Lk)("div",Qd,[(0,l.Lk)("div",qd,[(0,l.Lk)("div",{class:"w-12 h-12 rounded-full mr-4 flex items-center justify-center text-white text-xl",style:(0,F.Tr)({backgroundColor:a.editForm.color})},[(0,l.Lk)("i",{class:(0,F.C4)(`fas fa-${a.editForm.icon}`)},null,2)],4),(0,l.Lk)("div",null,[(0,l.Lk)("h4",$d,(0,F.v_)(a.editForm.label||"Tên phần thưởng"),1),(0,l.Lk)("div",Gd,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full mr-2",{"bg-green-100 text-green-800":"voucher"===a.editForm.type,"bg-blue-100 text-blue-800":"freeship"===a.editForm.type,"bg-purple-100 text-purple-800":"discount"===a.editForm.type,"bg-gray-100 text-gray-800":"none"===a.editForm.type}])},(0,F.v_)(a.getTypeLabel(a.editForm.type)),3),(0,l.Lk)("span",Jd,(0,F.v_)(a.editForm.probability)+"% xác suất ",1)])])])]),(0,l.Lk)("div",null,[t[37]||(t[37]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tên phần thưởng",-1)),(0,l.Lk)("div",Zd,[t[36]||(t[36]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-tag text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.editForm.label=e),type:"text",required:"",placeholder:"Nhập tên phần thưởng",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.editForm.label]])])]),(0,l.Lk)("div",null,[t[41]||(t[41]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Loại phần thưởng",-1)),(0,l.Lk)("div",Yd,[t[39]||(t[39]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-list text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>a.editForm.type=e),required:"",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},t[38]||(t[38]=[(0,l.Lk)("option",{value:"voucher"},"Voucher",-1),(0,l.Lk)("option",{value:"discount"},"Giảm giá %",-1),(0,l.Lk)("option",{value:"freeship"},"Miễn phí vận chuyển",-1),(0,l.Lk)("option",{value:"none"},"Không trúng thưởng",-1)]),512),[[r.u1,a.editForm.type]]),t[40]||(t[40]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))])]),"freeship"!==a.editForm.type&&"none"!==a.editForm.type?((0,l.uX)(),(0,l.CE)("div",zd,[(0,l.Lk)("label",ec,(0,F.v_)("voucher"===a.editForm.type?"Giá trị voucher (VND)":"Phần trăm giảm giá (%)"),1),(0,l.Lk)("div",tc,[(0,l.Lk)("div",sc,[(0,l.Lk)("i",{class:(0,F.C4)(`fas fa-${"voucher"===a.editForm.type?"money-bill-wave":"percent"} text-gray-400`)},null,2)]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>a.editForm.value=e),type:"number",min:"0",required:"",placeholder:"voucher"===a.editForm.type?"Nhập giá trị":"Nhập phần trăm",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,8,ac),[[r.Jo,a.editForm.value]])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[t[43]||(t[43]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Xác suất (%)",-1)),(0,l.Lk)("div",rc,[t[42]||(t[42]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chart-pie text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.editForm.probability=e),type:"number",min:"1",max:"100",required:"",placeholder:"Nhập xác suất",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.editForm.probability]])]),(0,l.Lk)("div",nc,[(0,l.Lk)("div",lc,[(0,l.Lk)("div",{class:"bg-indigo-600 h-2 rounded-full",style:(0,F.Tr)({width:`${a.editForm.probability}%`})},null,4)])])]),(0,l.Lk)("div",null,[t[44]||(t[44]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Màu sắc",-1)),(0,l.Lk)("div",ic,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["#FF5733","#33FF57","#3357FF","#F033FF","#FF33F0","#33FFF0"],e=>(0,l.Lk)("button",{key:e,type:"button",class:(0,F.C4)(["w-8 h-8 rounded-full border-2 focus:outline-none",{"border-gray-800":a.editForm.color===e,"border-transparent":a.editForm.color!==e}]),style:(0,F.Tr)({backgroundColor:e}),onClick:t=>a.editForm.color=e},null,14,oc)),64))]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.editForm.color=e),type:"color",required:"",class:"w-full h-10 px-1 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.editForm.color]])]),(0,l.Lk)("div",null,[t[48]||(t[48]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Icon",-1)),(0,l.Lk)("div",dc,[t[46]||(t[46]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-icons text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>a.editForm.icon=e),required:"",class:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none"},t[45]||(t[45]=[(0,l.Fv)('<option value="ticket" data-v-dedcb44a>Ticket</option><option value="percent" data-v-dedcb44a>Percent</option><option value="truck" data-v-dedcb44a>Truck</option><option value="gift" data-v-dedcb44a>Gift</option><option value="frown" data-v-dedcb44a>Frown</option>',5)]),512),[[r.u1,a.editForm.icon]]),t[47]||(t[47]=(0,l.Lk)("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-chevron-down text-gray-400"})],-1))]),(0,l.Lk)("div",cc,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["ticket","percent","truck","gift","frown"],e=>(0,l.Lk)("button",{key:e,type:"button",class:(0,F.C4)(["w-10 h-10 rounded-lg flex items-center justify-center focus:outline-none",{"bg-indigo-100 text-indigo-600 border border-indigo-300":a.editForm.icon===e,"bg-gray-100 text-gray-600 border border-transparent hover:bg-gray-200":a.editForm.icon!==e}]),onClick:t=>a.editForm.icon=e},[(0,l.Lk)("i",{class:(0,F.C4)(`fas fa-${e}`)},null,2)],10,uc)),64))])])])]),(0,l.Lk)("div",mc,[(0,l.Lk)("button",{type:"button",onClick:t[12]||(t[12]=e=>a.showEditModal=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 font-medium transition-colors"},t[49]||(t[49]=[(0,l.Lk)("i",{class:"fas fa-times mr-1"},null,-1),(0,l.eW)(" Hủy ")])),(0,l.Lk)("button",gc,[t[50]||(t[50]=(0,l.Lk)("i",{class:"fas fa-save mr-1"},null,-1)),(0,l.eW)(" "+(0,F.v_)(a.editingItem?"Cập nhật":"Thêm mới"),1)])])],32)])])])):(0,l.Q3)("",!0)])}const fc=(0,n.nY)("spin",{state:()=>({spinItems:[],userSpins:[],loading:!1,error:null}),getters:{getSpinItemById:e=>t=>e.spinItems.find(e=>e.id===t),getUserSpinById:e=>t=>e.userSpins.find(e=>e.userId===t),getTotalProbability:e=>e.spinItems.reduce((e,t)=>e+t.probability,0)},actions:{async fetchSpinItems(){this.loading=!0;try{const e=await zt.getSpinItems();this.spinItems=e.data}catch(e){this.error=e.message||"Failed to fetch spin items",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async updateSpinItem(e){this.loading=!0;try{const t=await zt.updateSpinItem(e),s=this.spinItems.findIndex(t=>t.id===e.id);return-1!==s&&(this.spinItems[s]={...this.spinItems[s],...e}),ts().fire({title:"Success!",text:"Spin item updated successfully",icon:"success",confirmButtonText:"OK"}),t.data}catch(t){return this.error=t.message||"Failed to update spin item",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}finally{this.loading=!1}},async fetchUserSpins(e){try{const t=await zt.getUserSpins(e),s=this.userSpins.findIndex(t=>t.userId===e);return-1!==s?this.userSpins[s]=t.data:this.userSpins.push(t.data),t.data}catch(t){return this.error=t.message||"Failed to fetch user spins",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),null}},async addUserSpins(e,t){this.loading=!0;try{await zt.addUserSpins(e,t);const s=this.userSpins.findIndex(t=>t.userId===e);if(-1!==s)this.userSpins[s].spinsRemaining+=t;else{await this.fetchUserSpins(e);const s=this.userSpins.findIndex(t=>t.userId===e);-1!==s&&(this.userSpins[s].spinsRemaining+=t)}return ts().fire({title:"Success!",text:`Added ${t} spins to user`,icon:"success",confirmButtonText:"OK"}),!0}catch(s){return this.error=s.message||"Failed to add user spins",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}}}});var hc={name:"SpinManagement",setup(){const e=fc(),t=(0,Bt.KR)(!1),s=(0,Bt.KR)(null),a=(0,Bt.KR)(!1),r=(0,Bt.KR)({label:"",type:"voucher",value:0,probability:5,color:"#FF5733",icon:"ticket"}),n=(0,Bt.KR)({userId:"",count:1}),i=(0,l.EW)(()=>e.loading),o=(0,l.EW)(()=>e.spinItems),d=(0,l.EW)(()=>e.getTotalProbability),c=(0,Bt.KR)(!1),u=(0,Bt.KR)(5e3),m=(0,Bt.KR)(0),g=(0,Bt.KR)(null),p=(0,Bt.KR)(null),f=()=>{if(!g.value||!p.value||0===o.value.length)return;const e=g.value,t=p.value,s=e.width/2,a=e.height/2,r=e.width/2-20,n=o.value,l=n.length,i=2*Math.PI/l;t.clearRect(0,0,e.width,e.height);for(let o=0;o<l;o++){const e=o*i,l=n[o];t.beginPath(),t.fillStyle=l.color,t.moveTo(s,a),t.arc(s,a,r,e,e+i),t.lineTo(s,a),t.fill();const d=t.createRadialGradient(s,a,0,s,a,r);d.addColorStop(0,"rgba(255, 255, 255, 0.2)"),d.addColorStop(1,"rgba(0, 0, 0, 0.1)"),t.beginPath(),t.fillStyle=d,t.moveTo(s,a),t.arc(s,a,r,e,e+i),t.lineTo(s,a),t.fill(),t.beginPath(),t.lineWidth=2,t.strokeStyle="#ffffff",t.moveTo(s,a),t.arc(s,a,r,e,e+i),t.lineTo(s,a),t.stroke(),t.save(),t.translate(s,a),t.rotate(e+i/2),t.textAlign="right",t.fillStyle="#ffffff",t.font="bold 16px Arial",t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=4,t.shadowOffsetX=1,t.shadowOffsetY=1,t.fillText(l.label,r-30,5),t.fillText(String.fromCharCode(parseInt("f"+h(l.icon),16)),r-50,5),t.restore()}t.beginPath(),t.fillStyle="#ffffff",t.arc(s,a,30,0,2*Math.PI),t.fill();const d=t.createLinearGradient(s-30,a-30,s+30,a+30);d.addColorStop(0,"#6366f1"),d.addColorStop(1,"#a855f7"),t.beginPath(),t.fillStyle=d,t.arc(s,a,25,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.font='bold 20px "Font Awesome 5 Free"',t.textAlign="center",t.textBaseline="middle",t.fillText(String.fromCharCode(parseInt("f5e1",16)),s,a)},h=e=>{const t={ticket:"3ff",percent:"295",truck:"f0d1",gift:"f06b",frown:"f119"};return t[e]||"06b"},b=()=>{if(c.value||0===o.value.length)return;c.value=!0;const e=document.querySelector(".wheel");if(!e)return void(c.value=!1);const t=Math.random();let s=0,a=0;for(let l=0;l<o.value.length;l++)if(s+=o.value[l].probability/100,t<s){a=l;break}const r=o.value.length,n=360/r;m.value+=1800+(r-a-1)*n,e.style.transition=`transform ${u.value/1e3}s cubic-bezier(0.17, 0.67, 0.83, 0.67)`,e.style.transform=`rotate(${m.value}deg)`,setTimeout(()=>{const t=o.value[a];t&&ts().fire({title:"Chúc mừng!",html:`\n              <div class="flex flex-col items-center">\n                <div class="w-24 h-24 rounded-full mb-6 flex items-center justify-center text-white text-3xl relative" \n                  style="background: linear-gradient(135deg, ${t.color}, ${y(t.color,-30)}); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);">\n                  <i class="fas fa-${t.icon}" style="text-shadow: 0 2px 4px rgba(0,0,0,0.3);"></i>\n                  <div class="absolute inset-0 rounded-full" style="background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 70%);"></div>\n                </div>\n                <h3 class="text-2xl font-bold mb-3 text-gray-800" style="text-shadow: 0 1px 2px rgba(0,0,0,0.1);">${t.label}</h3>\n                <div class="px-4 py-2 rounded-full mb-3 inline-flex items-center justify-center text-sm font-semibold"\n                  style="background: linear-gradient(to right, ${"voucher"===t.type?"#10B981, #059669":"freeship"===t.type?"#3B82F6, #2563EB":"discount"===t.type?"#8B5CF6, #7C3AED":"#9CA3AF, #6B7280"}); color: white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">\n                  <i class="fas fa-${"voucher"===t.type?"ticket-alt":"freeship"===t.type?"truck":"discount"===t.type?"percent":"times-circle"} mr-2"></i>\n                  ${x(t.type)}\n                </div>\n                <p class="text-2xl font-bold mt-2 gradient-text" style="font-size: 28px;">${v(t)}</p>\n                <div class="mt-4 w-full max-w-xs">\n                  <div class="w-full h-1.5 bg-gray-200 rounded-full overflow-hidden">\n                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full animate-pulse" style="width: 100%;"></div>\n                  </div>\n                </div>\n              </div>\n            `,showConfirmButton:!0,confirmButtonText:'<i class="fas fa-check-circle mr-2"></i>Nhận thưởng',confirmButtonColor:"#4F46E5",showCancelButton:!0,cancelButtonText:"Đóng",cancelButtonColor:"#9CA3AF",background:"rgba(255, 255, 255, 0.95)",backdrop:'\n              rgba(0,0,123,0.4)\n              url("/images/confetti.gif")\n              left top\n              no-repeat\n            ',customClass:{popup:"animated bounceIn"}}),c.value=!1,e.style.transition="none",e.style.transform="rotate(0deg)"},u.value+500)},x=e=>{switch(e){case"voucher":return"Voucher";case"discount":return"Giảm giá %";case"freeship":return"Miễn phí vận chuyển";case"none":return"Không trúng thưởng";default:return e}},v=e=>{switch(e.type){case"voucher":return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.value);case"discount":return`${e.value}%`;case"freeship":return"Miễn phí vận chuyển";case"none":return"-";default:return e.value}},y=(e,t)=>{let s=parseInt(e.substring(1,3),16),a=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return s=Math.max(0,Math.min(255,s+t)),a=Math.max(0,Math.min(255,a+t)),r=Math.max(0,Math.min(255,r+t)),`#${((1<<24)+(s<<16)+(a<<8)+r).toString(16).slice(1)}`},k=e=>{e?(s.value=e,r.value={...e}):(s.value=null,r.value={label:"",type:"voucher",value:0,probability:5,color:"#FF5733",icon:"ticket"}),t.value=!0},L=async()=>{try{const a={...r.value};s.value?(a.id=s.value.id,await e.updateSpinItem(a)):(a.id=Date.now(),await e.updateSpinItem(a)),t.value=!1}catch(a){console.error("Error saving spin item:",a)}},w=t=>{ts().fire({title:"Xác nhận xóa?",text:"Bạn có chắc chắn muốn xóa phần thưởng này?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Xóa",cancelButtonText:"Hủy"}).then(s=>{s.isConfirmed&&(e.spinItems=e.spinItems.filter(e=>e.id!==t),ts().fire("Đã xóa!","Phần thưởng đã được xóa.","success"))})},C=async()=>{a.value=!0;try{await e.addUserSpins(parseInt(n.value.userId),parseInt(n.value.count)),n.value={userId:"",count:1}}catch(t){console.error("Error adding spins:",t)}finally{a.value=!1}};return(0,l.sV)(async()=>{await e.fetchSpinItems(),(0,l.dY)(()=>{document.querySelector(".wheel")&&(g.value=document.querySelector("#wheelCanvas"),g.value&&(p.value=g.value.getContext("2d"),f()))})}),{loading:i,spinItems:o,totalProbability:d,showEditModal:t,editingItem:s,editForm:r,addSpinsForm:n,addingSpins:a,isSpinning:c,canvas:g,ctx:p,currentRotation:m,getTypeLabel:x,formatValue:v,adjustColor:y,drawWheel:f,getIconCode:h,openEditModal:k,saveSpinItem:L,confirmDeleteItem:w,addSpinsToUser:C,spinWheel:b}}};const bc=(0,c.A)(hc,[["render",pc],["__scopeId","data-v-dedcb44a"]]);var xc=bc;const vc={class:"bg-gray-50 min-h-screen pb-10"},yc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},kc={class:"flex items-center justify-between mb-8"},Lc={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},wc={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Cc={class:"col-span-1 lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},_c={class:"bg-white rounded-lg shadow p-6"},Fc={class:"flex items-center"},Sc={class:"ml-4"},Ic={class:"text-2xl font-semibold"},Tc={class:"bg-white rounded-lg shadow p-6"},Ec={class:"flex items-center"},Pc={class:"ml-4"},Dc={class:"text-2xl font-semibold"},Mc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"flex items-center"},Uc={class:"ml-4"},Nc={class:"text-2xl font-semibold"},Wc={class:"bg-white rounded-lg shadow col-span-1"},Xc={class:"p-4"},Bc={class:"mb-4"},Oc={key:0,class:"text-center py-4 text-gray-500"},Kc={key:1},Vc=["onClick"],Rc={class:"flex justify-between items-center"},jc={class:"font-medium"},Hc={class:"text-sm text-gray-500"},Qc={class:"text-right"},qc={class:"font-semibold"},$c={key:0,class:"text-xs text-yellow-600"},Gc={class:"bg-white rounded-lg shadow col-span-1 lg:col-span-2"},Jc={class:"p-4 border-b flex justify-between items-center"},Zc={class:"flex space-x-2"},Yc={class:"overflow-x-auto"},zc={class:"min-w-full divide-y divide-gray-200"},eu={class:"bg-white divide-y divide-gray-200"},tu={key:0},su={class:"px-6 py-4 whitespace-nowrap"},au={class:"text-sm font-medium text-indigo-600"},ru={class:"px-6 py-4 whitespace-nowrap"},nu={class:"text-sm text-gray-900"},lu={class:"text-xs text-gray-500"},iu={class:"px-6 py-4 whitespace-nowrap"},ou={class:"text-sm font-medium text-gray-900"},du={class:"px-6 py-4 whitespace-nowrap"},cu={class:"px-6 py-4 whitespace-nowrap"},uu={class:"text-sm text-gray-900"},mu={key:0,class:"text-xs text-gray-500"};function gu(e,t,s,a,n,i){const o=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",vc,[(0,l.Lk)("div",yc,[(0,l.Lk)("div",kc,[t[4]||(t[4]=(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave mr-3 text-indigo-600"}),(0,l.eW)(" Quản lý hoa hồng ")],-1)),(0,l.Lk)("div",null,[(0,l.bF)(o,{to:"/admin/wallets",class:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 shadow-md transition-all font-medium"},{default:(0,l.k6)(()=>t[3]||(t[3]=[(0,l.Lk)("i",{class:"fas fa-wallet mr-2"},null,-1),(0,l.eW)(" Quản lý ví người dùng ")])),_:1,__:[3]})])]),a.loading?((0,l.uX)(),(0,l.CE)("div",Lc,t[5]||(t[5]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang tải dữ liệu...",-1)]))):((0,l.uX)(),(0,l.CE)("div",wc,[(0,l.Lk)("div",Cc,[(0,l.Lk)("div",_c,[(0,l.Lk)("div",Fc,[t[7]||(t[7]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-indigo-100 text-indigo-500"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave text-xl"})],-1)),(0,l.Lk)("div",Sc,[t[6]||(t[6]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Tổng hoa hồng đã trả",-1)),(0,l.Lk)("p",Ic,(0,F.v_)(a.formatCurrency(a.totalPaidCommissions)),1)])])]),(0,l.Lk)("div",Tc,[(0,l.Lk)("div",Ec,[t[9]||(t[9]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-500"},[(0,l.Lk)("i",{class:"fas fa-clock text-xl"})],-1)),(0,l.Lk)("div",Pc,[t[8]||(t[8]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Hoa hồng đang chờ",-1)),(0,l.Lk)("p",Dc,(0,F.v_)(a.formatCurrency(a.totalPendingCommissions)),1)])])]),(0,l.Lk)("div",Mc,[(0,l.Lk)("div",Ac,[t[11]||(t[11]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-green-100 text-green-500"},[(0,l.Lk)("i",{class:"fas fa-store text-xl"})],-1)),(0,l.Lk)("div",Uc,[t[10]||(t[10]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Số người bán",-1)),(0,l.Lk)("p",Nc,(0,F.v_)(a.wallets.length),1)])])])]),(0,l.Lk)("div",Wc,[t[12]||(t[12]=(0,l.Lk)("div",{class:"p-4 border-b"},[(0,l.Lk)("h2",{class:"text-lg font-semibold"},"Ví người bán")],-1)),(0,l.Lk)("div",Xc,[(0,l.Lk)("div",Bc,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.sellerSearchQuery=e),placeholder:"Tìm kiếm người bán...",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[r.Jo,a.sellerSearchQuery]])]),0===a.filteredWallets.length?((0,l.uX)(),(0,l.CE)("div",Oc," Không tìm thấy người bán nào ")):((0,l.uX)(),(0,l.CE)("div",Kc,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredWallets,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.sellerId,class:(0,F.C4)(["border-b last:border-0 py-3 cursor-pointer hover:bg-gray-50",{"bg-indigo-50":a.selectedSellerId===e.sellerId}]),onClick:t=>a.selectSeller(e.sellerId)},[(0,l.Lk)("div",Rc,[(0,l.Lk)("div",null,[(0,l.Lk)("p",jc,(0,F.v_)(e.sellerName),1),(0,l.Lk)("p",Hc,"ID: "+(0,F.v_)(e.sellerId),1)]),(0,l.Lk)("div",Qc,[(0,l.Lk)("p",qc,(0,F.v_)(a.formatCurrency(e.balance)),1),e.pendingBalance>0?((0,l.uX)(),(0,l.CE)("p",$c," + "+(0,F.v_)(a.formatCurrency(e.pendingBalance))+" đang chờ ",1)):(0,l.Q3)("",!0)])])],10,Vc))),128))]))])]),(0,l.Lk)("div",Gc,[(0,l.Lk)("div",Jc,[t[14]||(t[14]=(0,l.Lk)("h2",{class:"text-lg font-semibold"},"Lịch sử hoa hồng",-1)),(0,l.Lk)("div",Zc,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.statusFilter=e),class:"px-3 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"},t[13]||(t[13]=[(0,l.Lk)("option",{value:""},"Tất cả trạng thái",-1),(0,l.Lk)("option",{value:"paid"},"Đã thanh toán",-1),(0,l.Lk)("option",{value:"pending"},"Đang chờ",-1)]),512),[[r.u1,a.statusFilter]]),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.orderSearchQuery=e),placeholder:"Tìm theo mã đơn...",class:"px-3 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"},null,512),[[r.Jo,a.orderSearchQuery]])])]),(0,l.Lk)("div",Yc,[(0,l.Lk)("table",zc,[t[16]||(t[16]=(0,l.Lk)("thead",{class:"bg-gray-50"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Mã đơn hàng "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Người bán "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số tiền "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trạng thái "),(0,l.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ngày tạo ")])],-1)),(0,l.Lk)("tbody",eu,[0===a.filteredCommissions.length?((0,l.uX)(),(0,l.CE)("tr",tu,t[15]||(t[15]=[(0,l.Lk)("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"}," Không có dữ liệu hoa hồng ",-1)]))):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredCommissions,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",su,[(0,l.Lk)("div",au,(0,F.v_)(e.orderId),1)]),(0,l.Lk)("td",ru,[(0,l.Lk)("div",nu,(0,F.v_)(e.sellerName),1),(0,l.Lk)("div",lu,"ID: "+(0,F.v_)(e.sellerId),1)]),(0,l.Lk)("td",iu,[(0,l.Lk)("div",ou,(0,F.v_)(a.formatCurrency(e.amount)),1)]),(0,l.Lk)("td",du,[(0,l.Lk)("span",{class:(0,F.C4)(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":"paid"===e.status,"bg-yellow-100 text-yellow-800":"pending"===e.status}])},(0,F.v_)("paid"===e.status?"Đã thanh toán":"Đang chờ"),3)]),(0,l.Lk)("td",cu,[(0,l.Lk)("div",uu,(0,F.v_)(a.formatDate(e.createdAt)),1),e.paidAt?((0,l.uX)(),(0,l.CE)("div",mu," Thanh toán: "+(0,F.v_)(a.formatDate(e.paidAt)),1)):(0,l.Q3)("",!0)])]))),128))])])])])]))])])}const pu=(0,n.nY)("commission",{state:()=>({commissions:[],wallets:[],loading:!1,error:null}),getters:{getCommissionsBySeller:e=>t=>t?e.commissions.filter(e=>e.sellerId===t):e.commissions,getCommissionsByOrder:e=>t=>t?e.commissions.filter(e=>e.orderId===t):e.commissions,getWalletBySeller:e=>t=>e.wallets.find(e=>e.sellerId===t),getTotalCommissions:e=>e.commissions.reduce((e,t)=>"paid"===t.status?e+t.amount:e,0),getTotalPendingCommissions:e=>e.commissions.reduce((e,t)=>"pending"===t.status?e+t.amount:e,0)},actions:{async fetchCommissions(){this.loading=!0;try{const e=await zt.getCommissions();this.commissions=e.data}catch(e){this.error=e.message||"Failed to fetch commissions",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async fetchWallets(){this.loading=!0;try{const e=await zt.getWallets();this.wallets=e.data}catch(e){this.error=e.message||"Failed to fetch wallets",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}},async updateWalletBalance({sellerId:e,amount:t,type:s,description:a}){this.loading=!0;try{const r=await zt.updateWalletBalance(e,t,s,a),n=this.wallets.findIndex(t=>t.sellerId===e);return-1!==n&&("add"===s?this.wallets[n].balance+=t:"subtract"===s&&(this.wallets[n].balance-=t),this.wallets[n].lastUpdated=(new Date).toISOString()),r.data.transaction,ts().fire({title:"Thành công!",text:`Đã ${"add"===s?"cộng":"trừ"} ${new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)} vào ví của người bán`,icon:"success",confirmButtonText:"OK"}),!0}catch(r){return this.error=r.message||"Failed to update wallet balance",ts().fire({title:"Lỗi!",text:this.error,icon:"error",confirmButtonText:"OK"}),!1}finally{this.loading=!1}}}});var fu={name:"CommissionManagement",setup(){const e=pu(),t=(0,Bt.KR)(""),s=(0,Bt.KR)(""),a=(0,Bt.KR)(""),r=(0,Bt.KR)(null),n=(0,l.EW)(()=>e.loading),i=(0,l.EW)(()=>e.commissions),o=(0,l.EW)(()=>e.wallets),d=(0,l.EW)(()=>e.getTotalCommissions),c=(0,l.EW)(()=>e.getTotalPendingCommissions),u=(0,l.EW)(()=>{if(!t.value)return o.value;const e=t.value.toLowerCase();return o.value.filter(t=>t.sellerName.toLowerCase().includes(e)||t.sellerId.toString().includes(e))}),m=(0,l.EW)(()=>{let e=i.value;if(r.value&&(e=e.filter(e=>e.sellerId===r.value)),a.value&&(e=e.filter(e=>e.status===a.value)),s.value){const t=s.value.toLowerCase();e=e.filter(e=>e.orderId.toLowerCase().includes(t))}return e}),g=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),p=e=>{const t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},f=e=>{r.value===e?r.value=null:r.value=e};return(0,l.wB)(t,()=>{r.value=null}),(0,l.sV)(async()=>{await Promise.all([e.fetchCommissions(),e.fetchWallets()])}),{loading:n,commissions:i,wallets:o,sellerSearchQuery:t,orderSearchQuery:s,statusFilter:a,selectedSellerId:r,totalPaidCommissions:d,totalPendingCommissions:c,filteredWallets:u,filteredCommissions:m,formatCurrency:g,formatDate:p,selectSeller:f}}};const hu=(0,c.A)(fu,[["render",gu],["__scopeId","data-v-fe4b0320"]]);var bu=hu;const xu={class:"bg-gray-50 min-h-screen pb-10"},vu={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},yu={key:0,class:"flex flex-col items-center justify-center my-12 py-12"},ku={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Lu={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 card-hover"},wu={class:"p-4"},Cu={class:"mb-4"},_u={class:"relative"},Fu={key:0,class:"text-center py-8"},Su={key:1,class:"space-y-2"},Iu=["onClick"],Tu={class:"flex justify-between items-center"},Eu={class:"font-medium text-gray-900"},Pu={class:"text-sm text-gray-500"},Du={class:"text-right"},Mu={class:"font-semibold text-indigo-600"},Au={key:0,class:"text-xs text-yellow-600"},Uu={class:"bg-white rounded-xl shadow-md overflow-hidden col-span-1 lg:col-span-2 card-hover"},Nu={class:"p-6"},Wu={key:0,class:"text-center py-12"},Xu={key:1},Bu={class:"bg-indigo-50 rounded-xl p-6 mb-8"},Ou={class:"flex items-center justify-between mb-4"},Ku={class:"text-xl font-bold text-gray-800"},Vu={class:"text-gray-500"},Ru={class:"text-right"},ju={class:"text-sm font-medium"},Hu={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qu={class:"bg-white rounded-lg p-4 shadow-sm"},qu={class:"text-2xl font-bold text-indigo-600"},$u={class:"bg-white rounded-lg p-4 shadow-sm"},Gu={class:"text-2xl font-bold text-yellow-600"},Ju={class:"mb-8"},Zu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Yu={class:"border border-green-200 rounded-lg p-4 bg-green-50"},zu={class:"mb-4"},em={class:"relative"},tm={class:"mb-4"},sm={class:"relative"},am=["disabled"],rm={class:"border border-red-200 rounded-lg p-4 bg-red-50"},nm={class:"mb-4"},lm={class:"relative"},im=["max"],om={class:"text-xs text-gray-500 mt-1"},dm={class:"mb-4"},cm={class:"relative"},um=["disabled"];function mm(e,t,s,a,n,i){return(0,l.uX)(),(0,l.CE)("div",xu,[(0,l.Lk)("div",vu,[t[30]||(t[30]=(0,l.Lk)("div",{class:"flex items-center justify-between mb-8"},[(0,l.Lk)("h1",{class:"text-3xl font-bold text-indigo-800"},[(0,l.Lk)("i",{class:"fas fa-wallet mr-3 text-indigo-600"}),(0,l.eW)(" Quản lý ví người dùng ")])],-1)),a.loading?((0,l.uX)(),(0,l.CE)("div",yu,t[7]||(t[7]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),(0,l.Lk)("p",{class:"text-indigo-600 font-medium"},"Đang tải dữ liệu...",-1)]))):((0,l.uX)(),(0,l.CE)("div",ku,[(0,l.Lk)("div",Lu,[t[10]||(t[10]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-users mr-2"}),(0,l.eW)(" Danh sách ví người dùng ")])],-1)),(0,l.Lk)("div",wu,[(0,l.Lk)("div",Cu,[(0,l.Lk)("div",_u,[t[8]||(t[8]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-search text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),placeholder:"Tìm kiếm người dùng...",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[r.Jo,a.searchQuery]])])]),0===a.filteredWallets.length?((0,l.uX)(),(0,l.CE)("div",Fu,t[9]||(t[9]=[(0,l.Lk)("div",{class:"text-gray-400 text-5xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-search"})],-1),(0,l.Lk)("p",{class:"text-gray-500"},"Không tìm thấy người dùng nào",-1)]))):((0,l.uX)(),(0,l.CE)("div",Su,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.filteredWallets,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.sellerId,class:(0,F.C4)(["border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-50 transition-colors",{"bg-indigo-50 border-indigo-300":a.selectedWallet&&a.selectedWallet.sellerId===e.sellerId}]),onClick:t=>a.selectWallet(e)},[(0,l.Lk)("div",Tu,[(0,l.Lk)("div",null,[(0,l.Lk)("p",Eu,(0,F.v_)(e.sellerName),1),(0,l.Lk)("p",Pu,"ID: "+(0,F.v_)(e.sellerId),1)]),(0,l.Lk)("div",Du,[(0,l.Lk)("p",Mu,(0,F.v_)(a.formatCurrency(e.balance)),1),e.pendingBalance>0?((0,l.uX)(),(0,l.CE)("p",Au," + "+(0,F.v_)(a.formatCurrency(e.pendingBalance))+" đang chờ ",1)):(0,l.Q3)("",!0)])])],10,Iu))),128))]))])]),(0,l.Lk)("div",Uu,[t[29]||(t[29]=(0,l.Lk)("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4"},[(0,l.Lk)("h2",{class:"text-xl font-bold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave mr-2"}),(0,l.eW)(" Thao tác với ví ")])],-1)),(0,l.Lk)("div",Nu,[a.selectedWallet?((0,l.uX)(),(0,l.CE)("div",Xu,[(0,l.Lk)("div",Bu,[(0,l.Lk)("div",Ou,[(0,l.Lk)("div",null,[(0,l.Lk)("h3",Ku,(0,F.v_)(a.selectedWallet.sellerName),1),(0,l.Lk)("p",Vu,"ID: "+(0,F.v_)(a.selectedWallet.sellerId),1)]),(0,l.Lk)("div",Ru,[t[12]||(t[12]=(0,l.Lk)("p",{class:"text-sm text-gray-500"},"Cập nhật lần cuối",-1)),(0,l.Lk)("p",ju,(0,F.v_)(a.formatDate(a.selectedWallet.lastUpdated)),1)])]),(0,l.Lk)("div",Hu,[(0,l.Lk)("div",Qu,[t[13]||(t[13]=(0,l.Lk)("p",{class:"text-sm text-gray-500 mb-1"},"Số dư hiện tại",-1)),(0,l.Lk)("p",qu,(0,F.v_)(a.formatCurrency(a.selectedWallet.balance)),1)]),(0,l.Lk)("div",$u,[t[14]||(t[14]=(0,l.Lk)("p",{class:"text-sm text-gray-500 mb-1"},"Số dư đang chờ",-1)),(0,l.Lk)("p",Gu,(0,F.v_)(a.formatCurrency(a.selectedWallet.pendingBalance)),1)])])]),(0,l.Lk)("div",Ju,[t[27]||(t[27]=(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thao tác với ví",-1)),(0,l.Lk)("div",Zu,[(0,l.Lk)("div",Yu,[t[20]||(t[20]=(0,l.Lk)("h4",{class:"font-medium text-green-800 mb-3 flex items-center"},[(0,l.Lk)("i",{class:"fas fa-plus-circle mr-2"}),(0,l.eW)(" Cộng tiền vào ví ")],-1)),(0,l.Lk)("div",zu,[t[16]||(t[16]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Số tiền cần cộng",-1)),(0,l.Lk)("div",em,[t[15]||(t[15]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.addAmount=e),type:"number",min:"1000",step:"1000",placeholder:"Nhập số tiền",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[r.Jo,a.addAmount]])])]),(0,l.Lk)("div",tm,[t[18]||(t[18]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mô tả",-1)),(0,l.Lk)("div",sm,[t[17]||(t[17]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-comment-alt text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.addDescription=e),type:"text",placeholder:"Nhập mô tả (tùy chọn)",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[r.Jo,a.addDescription]])])]),(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.addToWallet&&a.addToWallet(...e)),class:"w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center justify-center",disabled:!a.addAmount||a.addAmount<1e3||a.loading},t[19]||(t[19]=[(0,l.Lk)("i",{class:"fas fa-plus-circle mr-2"},null,-1),(0,l.eW)(" Cộng tiền ")]),8,am)]),(0,l.Lk)("div",rm,[t[26]||(t[26]=(0,l.Lk)("h4",{class:"font-medium text-red-800 mb-3 flex items-center"},[(0,l.Lk)("i",{class:"fas fa-minus-circle mr-2"}),(0,l.eW)(" Trừ tiền từ ví ")],-1)),(0,l.Lk)("div",nm,[t[22]||(t[22]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Số tiền cần trừ",-1)),(0,l.Lk)("div",lm,[t[21]||(t[21]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.subtractAmount=e),type:"number",min:"1000",step:"1000",max:a.selectedWallet.balance,placeholder:"Nhập số tiền",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,8,im),[[r.Jo,a.subtractAmount]])]),(0,l.Lk)("p",om,"Số dư hiện tại: "+(0,F.v_)(a.formatCurrency(a.selectedWallet.balance)),1)]),(0,l.Lk)("div",dm,[t[24]||(t[24]=(0,l.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mô tả",-1)),(0,l.Lk)("div",cm,[t[23]||(t[23]=(0,l.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,l.Lk)("i",{class:"fas fa-comment-alt text-gray-400"})],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.subtractDescription=e),type:"text",placeholder:"Nhập mô tả (tùy chọn)",class:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,512),[[r.Jo,a.subtractDescription]])])]),(0,l.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>a.subtractFromWallet&&a.subtractFromWallet(...e)),class:"w-full py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center justify-center",disabled:!a.subtractAmount||a.subtractAmount<1e3||a.subtractAmount>a.selectedWallet.balance||a.loading},t[25]||(t[25]=[(0,l.Lk)("i",{class:"fas fa-minus-circle mr-2"},null,-1),(0,l.eW)(" Trừ tiền ")]),8,um)])])]),t[28]||(t[28]=(0,l.Lk)("div",null,[(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[(0,l.Lk)("i",{class:"fas fa-history mr-2"}),(0,l.eW)(" Lịch sử giao dịch ")]),(0,l.Lk)("div",{class:"bg-gray-100 rounded-lg p-6 text-center"},[(0,l.Lk)("p",{class:"text-gray-500"},"Chức năng lịch sử giao dịch sẽ được cập nhật trong phiên bản tiếp theo")])],-1))])):((0,l.uX)(),(0,l.CE)("div",Wu,t[11]||(t[11]=[(0,l.Lk)("div",{class:"text-gray-400 text-6xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-wallet"})],-1),(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-500 mb-2"},"Chưa chọn ví người dùng",-1),(0,l.Lk)("p",{class:"text-gray-400 text-sm"},"Vui lòng chọn một người dùng từ danh sách bên trái",-1)])))])])]))])])}var gm={name:"WalletManagement",setup(){const e=pu(),t=(0,Bt.KR)(!1),s=(0,Bt.KR)(""),a=(0,Bt.KR)(null),r=(0,Bt.KR)(""),n=(0,Bt.KR)(""),i=(0,Bt.KR)(""),o=(0,Bt.KR)(""),d=(0,l.EW)(()=>e.wallets),c=(0,l.EW)(()=>{if(!s.value)return d.value;const e=s.value.toLowerCase();return d.value.filter(t=>t.sellerName.toLowerCase().includes(e)||t.sellerId.toString().includes(e))}),u=e=>{a.value=e,r.value="",n.value="",i.value="",o.value=""},m=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),g=e=>{const t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},p=async()=>{if(a.value&&r.value&&!(r.value<1e3)){t.value=!0;try{const t=await e.updateWalletBalance({sellerId:a.value.sellerId,amount:parseFloat(r.value),type:"add",description:n.value||"Cộng tiền vào ví"});t&&(a.value=e.wallets.find(e=>e.sellerId===a.value.sellerId),r.value="",n.value="")}catch(s){console.error("Error adding to wallet:",s)}finally{t.value=!1}}},f=async()=>{if(!a.value||!i.value||i.value<1e3||i.value>a.value.balance)return;const s=await ts().fire({title:"Xác nhận trừ tiền",text:`Bạn có chắc chắn muốn trừ ${m(i.value)} từ ví của ${a.value.sellerName}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Xác nhận trừ tiền",cancelButtonText:"Hủy"});if(s.isConfirmed){t.value=!0;try{const t=await e.updateWalletBalance({sellerId:a.value.sellerId,amount:parseFloat(i.value),type:"subtract",description:o.value||"Trừ tiền từ ví"});t&&(a.value=e.wallets.find(e=>e.sellerId===a.value.sellerId),i.value="",o.value="")}catch(r){console.error("Error subtracting from wallet:",r)}finally{t.value=!1}}};return(0,l.sV)(async()=>{t.value=!0,await e.fetchWallets(),t.value=!1}),{loading:t,wallets:d,searchQuery:s,filteredWallets:c,selectedWallet:a,addAmount:r,addDescription:n,subtractAmount:i,subtractDescription:o,selectWallet:u,formatCurrency:m,formatDate:g,addToWallet:p,subtractFromWallet:f}}};const pm=(0,c.A)(gm,[["render",mm],["__scopeId","data-v-5a277243"]]);var fm=pm;const hm={key:0,class:"flex justify-center my-8"},bm={key:1},xm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},vm={class:"bg-white rounded-lg shadow p-6"},ym={class:"flex items-center"},km={class:"ml-4"},Lm={class:"text-2xl font-semibold"},wm={class:"bg-white rounded-lg shadow p-6"},Cm={class:"flex items-center"},_m={class:"ml-4"},Fm={class:"text-2xl font-semibold"},Sm={class:"bg-white rounded-lg shadow p-6"},Im={class:"flex items-center"},Tm={class:"ml-4"},Em={class:"text-2xl font-semibold"},Pm={class:"bg-white rounded-lg shadow p-6"},Dm={class:"flex items-center"},Mm={class:"ml-4"},Am={class:"text-2xl font-semibold"},Um={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Nm={class:"bg-white rounded-lg shadow col-span-1"},Wm={class:"p-4"},Xm={class:"flex items-center"},Bm={class:"w-8 h-8 flex items-center justify-center rounded-full bg-indigo-100 text-indigo-800 font-bold"},Om={class:"ml-3"},Km={class:"font-medium"},Vm={class:"text-sm text-gray-500"},Rm={class:"text-right"},jm={class:"font-semibold"},Hm={class:"bg-white rounded-lg shadow col-span-1 lg:col-span-2"},Qm={class:"p-4 h-80"},qm={ref:"ordersChart"};function $m(e,t,s,a,r,n){return(0,l.uX)(),(0,l.CE)("div",null,[t[11]||(t[11]=(0,l.Lk)("h1",{class:"text-2xl font-bold mb-6"},"Dashboard",-1)),a.loading?((0,l.uX)(),(0,l.CE)("div",hm,t[0]||(t[0]=[(0,l.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"},null,-1)]))):((0,l.uX)(),(0,l.CE)("div",bm,[(0,l.Lk)("div",xm,[(0,l.Lk)("div",vm,[(0,l.Lk)("div",ym,[t[2]||(t[2]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-indigo-100 text-indigo-500"},[(0,l.Lk)("i",{class:"fas fa-users text-xl"})],-1)),(0,l.Lk)("div",km,[t[1]||(t[1]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Tổng người dùng",-1)),(0,l.Lk)("p",Lm,(0,F.v_)(a.totalUsers),1)])])]),(0,l.Lk)("div",wm,[(0,l.Lk)("div",Cm,[t[4]||(t[4]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-green-100 text-green-500"},[(0,l.Lk)("i",{class:"fas fa-store text-xl"})],-1)),(0,l.Lk)("div",_m,[t[3]||(t[3]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Tổng người bán",-1)),(0,l.Lk)("p",Fm,(0,F.v_)(a.totalSellers),1)])])]),(0,l.Lk)("div",Sm,[(0,l.Lk)("div",Im,[t[6]||(t[6]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-blue-100 text-blue-500"},[(0,l.Lk)("i",{class:"fas fa-shopping-cart text-xl"})],-1)),(0,l.Lk)("div",Tm,[t[5]||(t[5]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Tổng đơn hàng",-1)),(0,l.Lk)("p",Em,(0,F.v_)(a.totalOrders),1)])])]),(0,l.Lk)("div",Pm,[(0,l.Lk)("div",Dm,[t[8]||(t[8]=(0,l.Lk)("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-500"},[(0,l.Lk)("i",{class:"fas fa-money-bill-wave text-xl"})],-1)),(0,l.Lk)("div",Mm,[t[7]||(t[7]=(0,l.Lk)("p",{class:"text-gray-500 text-sm"},"Doanh thu hôm nay",-1)),(0,l.Lk)("p",Am,(0,F.v_)(a.formatCurrency(a.todayRevenue)),1)])])])]),(0,l.Lk)("div",Um,[(0,l.Lk)("div",Nm,[t[9]||(t[9]=(0,l.Lk)("div",{class:"p-4 border-b"},[(0,l.Lk)("h2",{class:"text-lg font-semibold"},"Top Sellers")],-1)),(0,l.Lk)("div",Wm,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.topSellers,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"flex items-center justify-between py-3 border-b last:border-0"},[(0,l.Lk)("div",Xm,[(0,l.Lk)("div",Bm,(0,F.v_)(t+1),1),(0,l.Lk)("div",Om,[(0,l.Lk)("p",Km,(0,F.v_)(e.name),1),(0,l.Lk)("p",Vm,(0,F.v_)(e.orders)+" đơn hàng",1)])]),(0,l.Lk)("div",Rm,[(0,l.Lk)("p",jm,(0,F.v_)(a.formatCurrency(e.sales)),1)])]))),128))])]),(0,l.Lk)("div",Hm,[t[10]||(t[10]=(0,l.Lk)("div",{class:"p-4 border-b"},[(0,l.Lk)("h2",{class:"text-lg font-semibold"},"Đơn hàng theo ngày")],-1)),(0,l.Lk)("div",Qm,[(0,l.Lk)("canvas",qm,null,512)])])])]))])}const Gm=(0,n.nY)("dashboard",{state:()=>({totalUsers:0,totalSellers:0,totalOrders:0,todayRevenue:0,topSellers:[],ordersByDay:[],loading:!1,error:null}),actions:{async fetchDashboardData(){this.loading=!0;try{const e=await zt.getDashboardData(),t=e.data;this.totalUsers=t.totalUsers,this.totalSellers=t.totalSellers,this.totalOrders=t.totalOrders,this.todayRevenue=t.todayRevenue,this.topSellers=t.topSellers,this.ordersByDay=t.ordersByDay}catch(e){this.error=e.message||"Failed to fetch dashboard data",ts().fire({title:"Error!",text:this.error,icon:"error",confirmButtonText:"OK"})}finally{this.loading=!1}}}});var Jm=s(3861),Zm={name:"DashboardView",setup(){const e=Gm(),t=(0,Bt.KR)(null);let s=null;const a=(0,l.EW)(()=>e.loading),r=(0,l.EW)(()=>e.totalUsers),n=(0,l.EW)(()=>e.totalSellers),i=(0,l.EW)(()=>e.totalOrders),o=(0,l.EW)(()=>e.todayRevenue),d=(0,l.EW)(()=>e.topSellers),c=(0,l.EW)(()=>e.ordersByDay),u=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),m=()=>{if(!c.value.length)return;const e=t.value.getContext("2d");s&&s.destroy(),s=new Jm.Ay(e,{type:"bar",data:{labels:c.value.map(e=>e.date),datasets:[{label:"Số đơn hàng",data:c.value.map(e=>e.count),backgroundColor:"rgba(99, 102, 241, 0.5)",borderColor:"rgb(99, 102, 241)",borderWidth:1},{label:"Doanh thu (triệu VND)",data:c.value.map(e=>e.revenue/1e6),backgroundColor:"rgba(16, 185, 129, 0.5)",borderColor:"rgb(16, 185, 129)",borderWidth:1,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Số đơn hàng"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"Doanh thu (triệu VND)"},grid:{drawOnChartArea:!1}}}}})};return(0,l.sV)(async()=>{await e.fetchDashboardData(),m()}),{loading:a,totalUsers:r,totalSellers:n,totalOrders:i,todayRevenue:o,topSellers:d,ordersByDay:c,ordersChart:t,formatCurrency:u}}};const Ym=(0,c.A)(Zm,[["render",$m]]);var zm=Ym;const eg={class:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4"},tg={class:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center"},sg={class:"flex justify-center space-x-4"};function ag(e,t,s,a,r,n){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",eg,[(0,l.Lk)("div",tg,[t[2]||(t[2]=(0,l.Lk)("div",{class:"text-red-500 text-6xl mb-4"},[(0,l.Lk)("i",{class:"fas fa-exclamation-triangle"})],-1)),t[3]||(t[3]=(0,l.Lk)("h1",{class:"text-2xl font-bold text-gray-800 mb-4"},"Không có quyền truy cập",-1)),t[4]||(t[4]=(0,l.Lk)("p",{class:"text-gray-600 mb-6"}," Bạn không có quyền truy cập vào trang này. Vui lòng liên hệ quản trị viên nếu bạn cần hỗ trợ. ",-1)),(0,l.Lk)("div",sg,[(0,l.bF)(i,{to:"/admin",class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"},{default:(0,l.k6)(()=>t[1]||(t[1]=[(0,l.eW)(" Quay lại Dashboard ")])),_:1,__:[1]}),(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e)),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400"}," Đăng xuất ")])])])}var rg={name:"UnauthorizedView",setup(){const e=(0,g.rd)(),t=ss(),s=()=>{t.logout(),e.push("/admin/login")};return{logout:s}}};const ng=(0,c.A)(rg,[["render",ag]]);var lg=ng;const ig=(e,t,s)=>{const a=localStorage.getItem("adminToken");a?s():s("/admin/login")},og=e=>(t,s,a)=>{const r=localStorage.getItem("adminUser");if(!r)return void a("/admin/login");const n=JSON.parse(r);"admin"===e&&"admin"===n.role||"admin_or_subadmin"===e&&("admin"===n.role||"sub_admin"===n.role)?a():a("/admin/unauthorized")},dg=[{path:"/",name:"home",component:St},{path:"/admin/login",name:"adminLogin",component:ns},{path:"/admin/unauthorized",name:"unauthorized",component:lg},{path:"/admin",component:_s,beforeEnter:ig,children:[{path:"",name:"adminHome",redirect:{name:"dashboard"}},{path:"dashboard",name:"dashboard",component:zm,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"users",name:"userManagement",component:nr,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"products",name:"productManagement",component:Ei,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"products/create",name:"createProduct",component:Go,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"orders",name:"orderManagement",component:En,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"orders/create",name:"createOrder",component:Gl,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"spins",name:"spinManagement",component:xc,meta:{requiresAuth:!0,role:"admin"},beforeEnter:og("admin")},{path:"commissions",name:"commissionManagement",component:bu,meta:{requiresAuth:!0,role:"admin_or_subadmin"},beforeEnter:og("admin_or_subadmin")},{path:"wallets",name:"walletManagement",component:fm,meta:{requiresAuth:!0,role:"admin"},beforeEnter:og("admin")}]}],cg=(0,g.aE)({history:(0,g.LA)("/"),routes:dg});var ug=cg;s(323);const mg=(0,r.Ef)(m);mg.use((0,n.Ey)()),mg.use(ug),mg.mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,n){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],n=e[c][2];for(var i=!0,o=0;o<a.length;o++)(!1&n||l>=n)&&Object.keys(s.O).every(function(e){return s.O[e](a[o])})?a.splice(o--,1):(i=!1,n<l&&(l=n));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,l=a[0],i=a[1],o=a[2],d=0;if(l.some(function(t){return 0!==e[t]})){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(o)var c=o(s)}for(t&&t(a);d<l.length;d++)n=l[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},a=self["webpackChunkecommerce_homepage"]=self["webpackChunkecommerce_homepage"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(4516)});a=s.O(a)})();
//# sourceMappingURL=app.5bf76f7e.js.map